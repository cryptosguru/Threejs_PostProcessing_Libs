"use strict";function _typeof2(e){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof2(e)}(function(e){'use strict';var oe=Number.parseFloat,re=Math.atan2,ie=Math.acos,se=Math.ceil,le=Math.sqrt,ue=Math.cos,ge=Math.sin,pe=Math.PI,me=Number.parseInt,fe=Math.abs,ve=Math.max,Ae=Math.min,he=Math.floor,ye=Math.pow,xe=Math.round;function t(e){return t="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},t(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(){return d=l()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var a=Function.bind.apply(e,o),r=new a;return n&&s(r,n.prototype),r},d.apply(null,arguments)}function u(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function g(e){var t="function"==typeof Map?new Map:void 0;return g=function(e){function n(){return d(e,arguments,i(this).constructor)}if(null===e||!u(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)},g(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return t&&("object"===_typeof2(t)||"function"==typeof t)?t:p(e)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=i(e),null!==e););return e}function h(e,t,n){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=A(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(n):o.value}},h(e,t,n||e)}function C(e){return b(e)||E(e)||S()}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function E(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function S(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function T(e,t){var n=e.__state.conversionName.toString(),o=xe(e.r),r=xe(e.g),i=xe(e.b),l=e.a,a=xe(e.h),d=e.s.toFixed(1),s=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);6>c.length;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+o+","+r+","+i+")":"CSS_RGBA"===n?"rgba("+o+","+r+","+i+","+l+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+r+","+i+"]":"RGBA_ARRAY"===n?"["+o+","+r+","+i+","+l+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+",a:"+l+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+d+",v:"+s+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+d+",v:"+s+",a:"+l+"}":"unknown format"}function M(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(Ge.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(Ge.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function k(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(Ge.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(Ge.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}function D(e){if("0"===e||Me.isUndefined(e))return 0;var t=e.match(He);return Me.isNull(t)?0:parseFloat(t[1])}function B(e){var t=e.toString();return-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0}function P(e,t){var n=ye(10,t);return xe(e*n)/n}function w(e,t,n,a,o){return a+(o-a)*((e-t)/(n-t))}function L(e,t,n,a){e.style.background="",Me.each(qe,function(o){e.style.cssText+="background: "+o+"linear-gradient("+t+", "+n+" 0%, "+a+" 100%); "})}function R(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}function I(e,t,n){var a=document.createElement("li");return t&&a.appendChild(t),n?e.__ul.insertBefore(a,n):e.__ul.appendChild(a),e.onResize(),a}function F(e){Ve.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Ve.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function O(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function _(e,t,n){if(n.__li=t,n.__gui=e,Me.extend(n,{options:function(t){if(1<arguments.length){var a=n.__li.nextElementSibling;return n.remove(),U(e,n.object,n.property,{before:a,factoryArgs:[Me.toArray(arguments)]})}if(Me.isArray(t)||Me.isObject(t)){var o=n.__li.nextElementSibling;return n.remove(),U(e,n.object,n.property,{before:o,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Ke){var a=new je(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Me.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],o=a[e];n[e]=a[e]=function(){var e=Array.prototype.slice.call(arguments);return o.apply(a,e),t.apply(n,e)}}),Ve.addClass(t,"has-slider"),n.domElement.insertBefore(a.domElement,n.domElement.firstElementChild)}else if(n instanceof je){var o=function(t){if(Me.isNumber(n.__min)&&Me.isNumber(n.__max)){var a=n.__li.firstElementChild.firstElementChild.innerHTML,o=-1<n.__gui.__listening.indexOf(n);n.remove();var r=U(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(a),o&&r.listen(),r}return t};n.min=Me.compose(o,n.min),n.max=Me.compose(o,n.max)}else n instanceof Qe?(Ve.bind(t,"click",function(){Ve.fakeEvent(n.__checkbox,"click")}),Ve.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof Je?(Ve.bind(t,"click",function(){Ve.fakeEvent(n.__button,"click")}),Ve.bind(t,"mouseover",function(){Ve.addClass(n.__button,"hover")}),Ve.bind(t,"mouseout",function(){Ve.removeClass(n.__button,"hover")})):n instanceof Ze&&(Ve.addClass(t,"color"),n.updateDisplay=Me.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=Me.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&O(e.getRoot(),!0),t},n.setValue)}function G(e,t){var n=e.getRoot(),a=n.__rememberedObjects.indexOf(t.object);if(-1!==a){var o=n.__rememberedObjectIndecesToControllers[a];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[a]=o),o[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,i=void 0;if(r[e.preset])i=r[e.preset];else if(r.Default)i=r.Default;else return;if(i[a]&&void 0!==i[a][t.property]){var s=i[a][t.property];t.initialValue=s,t.setValue(s)}}}}function U(e,t,n,a){if(void 0===t[n])throw new Error("Object \""+t+"\" has no property \""+n+"\"");var o;if(a.color)o=new Ze(t,n);else{var r=[t,n].concat(a.factoryArgs);o=$e.apply(e,r)}a.before instanceof Ue&&(a.before=a.before.__li),G(e,o),Ve.addClass(o.domElement,"c");var i=document.createElement("span");Ve.addClass(i,"property-name"),i.innerHTML=o.property;var s=document.createElement("div");s.appendChild(i),s.appendChild(o.domElement);var l=I(e,s,a.before);return Ve.addClass(l,gt.CLASS_CONTROLLER_ROW),o instanceof Ze?Ve.addClass(l,"color"):Ve.addClass(l,Re(o.getValue())),_(e,l,o),e.__controllers.push(o),o}function N(e,t){return document.location.href+"."+t}function H(e,t,n){var a=document.createElement("option");a.innerHTML=t,a.value=t,e.__preset_select.appendChild(a),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function V(e,t){t.style.display=e.useLocalStorage?"block":"none"}function Q(e){var t=e.__save_row=document.createElement("li");Ve.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Ve.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Ve.addClass(n,"button gears");var a=document.createElement("span");a.innerHTML="Save",Ve.addClass(a,"button"),Ve.addClass(a,"save");var o=document.createElement("span");o.innerHTML="New",Ve.addClass(o,"button"),Ve.addClass(o,"save-as");var r=document.createElement("span");r.innerHTML="Revert",Ve.addClass(r,"button"),Ve.addClass(r,"revert");var i=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?Me.each(e.load.remembered,function(t,n){H(e,n,n===e.preset)}):H(e,"Default",!1),Ve.bind(i,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(i),t.appendChild(n),t.appendChild(a),t.appendChild(o),t.appendChild(r),it){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),d=document.getElementById("dg-save-locally");d.style.display="block","true"===localStorage.getItem(N(e,"isLocal"))&&l.setAttribute("checked","checked"),V(e,s),Ve.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,V(e,s)})}var c=document.getElementById("dg-new-constructor");Ve.bind(c,"keydown",function(t){t.metaKey&&(67===t.which||67===t.keyCode)&&st.hide()}),Ve.bind(n,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),st.show(),c.focus(),c.select()}),Ve.bind(a,"click",function(){e.save()}),Ve.bind(o,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),Ve.bind(r,"click",function(){e.revert()})}function Y(t){function n(n){return n.preventDefault(),t.width+=r-n.clientX,t.onResize(),r=n.clientX,!1}function a(){Ve.removeClass(t.__closeButton,gt.CLASS_DRAG),Ve.unbind(window,"mousemove",n),Ve.unbind(window,"mouseup",a)}function o(o){return o.preventDefault(),r=o.clientX,Ve.addClass(t.__closeButton,gt.CLASS_DRAG),Ve.bind(window,"mousemove",n),Ve.bind(window,"mouseup",a),!1}var r;t.__resize_handle=document.createElement("div"),Me.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Ve.bind(t.__resize_handle,"mousedown",o),Ve.bind(t.__closeButton,"mousedown",o),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function X(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function W(e,t){var n={};return Me.each(e.__rememberedObjects,function(a,o){var r={},i=e.__rememberedObjectIndecesToControllers[o];Me.each(i,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[o]=r}),n}function j(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function K(e){0!==e.length&&et.call(window,function(){K(e)}),Me.each(e,function(e){e.updateDisplay()})}function J(){if(null===Rt){var t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),n=new Float32Array([0,0,2,0,0,2]);Rt=new e.BufferGeometry,Rt.addAttribute("position",new e.BufferAttribute(t,3)),Rt.addAttribute("uv",new e.BufferAttribute(n,2))}return Rt}function Z(e,t){for(var n=[],a;null!==(a=e.exec(t));)n.push(a[1]);return n}function q(e,t,n){var a=!0,o=!1,r=void 0,i,s;try{for(var l=t[Symbol.iterator](),d,c;!(a=(d=l.next()).done);a=!0){c=d.value,i="$1"+e+c.charAt(0).toUpperCase()+c.slice(1),s=new RegExp("([^\\.])(\\b"+c+"\\b)","g");var u=!0,g=!1,p=void 0;try{for(var m=n.entries()[Symbol.iterator](),f,v;!(u=(f=m.next()).done);u=!0)v=f.value,null!==v[1]&&n.set(v[0],v[1].replace(s,i))}catch(e){g=!0,p=e}finally{try{u||null==m["return"]||m["return"]()}finally{if(g)throw p}}}}catch(e){o=!0,r=e}finally{try{a||null==l["return"]||l["return"]()}finally{if(o)throw r}}}function $(e,t,n,a,o,r,i){var s=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,l=/(?:varying\s+\w+\s+(\w*))/g,d=t.blendMode,c=new Map([["fragment",t.fragmentShader],["vertex",t.vertexShader]]),u=c.get("fragment")!==void 0&&0<=c.get("fragment").indexOf("mainImage"),g=c.get("fragment")!==void 0&&0<=c.get("fragment").indexOf("mainUv"),p=[],m=[],f=!1,v=!1;if(c.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(g&&0!=(i&Xt.CONVOLUTION))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!u&&!g)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{if(g&&(n.set(Dt.FRAGMENT_MAIN_UV,n.get(Dt.FRAGMENT_MAIN_UV)+"\t"+e+"MainUv(UV);\n"),f=!0),null!==c.get("vertex")&&0<=c.get("vertex").indexOf("mainSupport")){var A="\t"+e+"MainSupport(";0<=c.get("vertex").indexOf("uv")&&(A+="vUv"),A+=");\n",n.set(Dt.VERTEX_MAIN_SUPPORT,n.get(Dt.VERTEX_MAIN_SUPPORT)+A),p=p.concat(Z(l,c.get("vertex"))),m=m.concat(p).concat(Z(s,c.get("vertex")))}if(m=m.concat(Z(s,c.get("fragment"))).concat(Array.from(t.uniforms.keys())).concat(Array.from(t.defines.keys())),t.uniforms.forEach(function(t,n){return r.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)}),t.defines.forEach(function(t,n){return o.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)}),q(e,m,o),q(e,m,c),a.set(d.blendFunction,d),u){var h=e+"MainImage(color0, UV, ";0!=(i&Xt.DEPTH)&&0<=c.get("fragment").indexOf("depth")&&(h+="depth, ",v=!0),h+="color1);\n\t";var y=e+"BlendOpacity";r.set(y,d.opacity),h+="color0 = blend"+d.blendFunction+"(color0, color1, "+y+");\n\n\t",n.set(Dt.FRAGMENT_MAIN_IMAGE,n.get(Dt.FRAGMENT_MAIN_IMAGE)+h),n.set(Dt.FRAGMENT_HEAD,n.get(Dt.FRAGMENT_HEAD)+"uniform float "+y+";\n\n")}n.set(Dt.FRAGMENT_HEAD,n.get(Dt.FRAGMENT_HEAD)+c.get("fragment")+"\n"),null!==c.get("vertex")&&n.set(Dt.VERTEX_HEAD,n.get(Dt.VERTEX_HEAD)+c.get("vertex")+"\n")}return{varyings:p,transformedUv:f,readDepth:v}}function ee(e,t){return e+Math.random()*(t-e)}function te(e){requestAnimationFrame(te),Pa.render(e)}function ne(t){var n=t.demo,a=Ba.getRenderer().getSize(new e.Vector2);Da.setSize(a.width,a.height),Ba.replaceRenderer(Da),Ba.reset(),Ba.addPass(n.renderPass),document.getElementById("viewport").children[0].style.display="initial"}function ae(e){e.demo.renderPass.camera=e.demo.camera,document.getElementById("viewport").children[0].style.display="none"}var Ce="default"in e?e["default"]:e,be=function(){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"demo";n(this,t),this.id=a,this.renderer=null,this.loadingManager=new e.LoadingManager,this.assets=new Map,this.scene=new e.Scene,this.camera=null,this.controls=null,this.ready=!1}return o(t,[{key:"setRenderer",value:function(e){return this.renderer=e,this}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(){}},{key:"reset",value:function(){var t=this.scene.fog;return this.scene=new e.Scene,this.scene.fog=t,this.camera=null,null!==this.controls&&(this.controls.dispose(),this.controls=null),this.ready=!1,this}}]),t}(),Ee=function(){function e(){n(this,e),this.listenerFunctions=new Map,this.listenerObjects=new Map}return o(e,[{key:"addEventListener",value:function(e,t){var n="function"==typeof t?this.listenerFunctions:this.listenerObjects;n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))}},{key:"removeEventListener",value:function(e,t){var n="function"==typeof t?this.listenerFunctions:this.listenerObjects;if(n.has(e)){var a=n.get(e);a["delete"](t),0===a.size&&n["delete"](e)}}},{key:"dispatchEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,n=t.listenerFunctions,a=t.listenerObjects,o,r;if(e.target=t,n.has(e.type)){o=n.get(e.type);var i=!0,s=!1,l=void 0;try{for(var d=o[Symbol.iterator](),c;!(i=(c=d.next()).done);i=!0)r=c.value,r.call(t,e)}catch(e){s=!0,l=e}finally{try{i||null==d["return"]||d["return"]()}finally{if(s)throw l}}}if(a.has(e.type)){o=a.get(e.type);var u=!0,g=!1,p=void 0;try{for(var m=o[Symbol.iterator](),f;!(u=(f=m.next()).done);u=!0)r=f.value,r.handleEvent(e)}catch(e){g=!0,p=e}finally{try{u||null==m["return"]||m["return"]()}finally{if(g)throw p}}}}}]),e}(),Se=Array.prototype.forEach,Te=Array.prototype.slice,Me={BREAK:{},extend:function(e){return this.each(Te.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(Te.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=Te.call(arguments);return function(){for(var t=Te.call(arguments),n=e.length-1;0<=n;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(Se&&e.forEach&&e.forEach===Se)e.forEach(t,n);else if(e.length===e.length+0){var a=void 0,o=void 0;for(a=0,o=e.length;a<o;a++)if(a in e&&t.call(n,e[a],a)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var a;return function(){var o=this,r=arguments,i=n||!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(o,r)},t),i&&e.apply(o,r)}},toArray:function(e){return e.toArray?e.toArray():Te.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return null===e},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},ke=[{litmus:Me.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:T},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:T},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:T},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:T}}},{litmus:Me.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Me.isArray,conversions:{RGB_ARRAY:{read:function(e){return!(3!==e.length)&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return!(4!==e.length)&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Me.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(Me.isNumber(e.r)&&Me.isNumber(e.g)&&Me.isNumber(e.b)&&Me.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(Me.isNumber(e.r)&&Me.isNumber(e.g)&&Me.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(Me.isNumber(e.h)&&Me.isNumber(e.s)&&Me.isNumber(e.v)&&Me.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(Me.isNumber(e.h)&&Me.isNumber(e.s)&&Me.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],De=void 0,Be=void 0,Pe=function(){Be=!1;var e=1<arguments.length?Me.toArray(arguments):arguments[0];return Me.each(ke,function(t){if(t.litmus(e))return Me.each(t.conversions,function(t,n){if(De=t.read(e),!1===Be&&!1!==De)return Be=De,De.conversionName=n,De.conversion=t,Me.BREAK}),Me.BREAK}),Be},we=void 0,Le={hsv_to_rgb:function(e,n,a){var o=he(e/60)%6,r=e/60-he(e/60),i=a*(1-n),s=a*(1-r*n),l=a*(1-(1-r)*n),t=[[a,l,i],[s,a,i],[i,a,l],[i,s,a],[l,i,a],[a,i,s]][o];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,n){var a=Ae(e,t,n),o=ve(e,t,n),r=o-a,i=void 0,l=void 0;if(0!==o)l=r/o;else return{h:NaN,s:0,v:0};return i=e===o?(t-n)/r:t===o?2+(n-e)/r:4+(e-t)/r,i/=6,0>i&&(i+=1),{h:360*i,s:l,v:o/255}},rgb_to_hex:function(e,t,n){var a=this.hex_with_component(0,2,e);return a=this.hex_with_component(a,1,t),a=this.hex_with_component(a,0,n),a},component_from_hex:function(e,t){return 255&e>>8*t},hex_with_component:function(e,t,n){return n<<(we=8*t)|e&~(255<<we)}},Re="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},Ie=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Fe=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Oe=function e(t,n,a){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(o===void 0){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,a)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(a)},ze=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+t(n));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},_e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&("object"===t(n)||"function"==typeof n)?n:e},Ge=function(){function e(){if(Ie(this,e),this.__state=Pe.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Fe(e,[{key:"toString",value:function(){return T(this)}},{key:"toHexString",value:function(){return T(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();Ge.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=Le.component_from_hex(e.__state.hex,n);else if("HSV"===e.__state.space)Me.extend(e.__state,Le.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw new Error("Corrupted color state")},Ge.recalculateHSV=function(e){var t=Le.rgb_to_hsv(e.r,e.g,e.b);Me.extend(e.__state,{s:t.s,v:t.v}),Me.isNaN(t.h)?Me.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},Ge.COMPONENTS=["r","g","b","h","s","v","hex","a"],M(Ge.prototype,"r",2),M(Ge.prototype,"g",1),M(Ge.prototype,"b",0),k(Ge.prototype,"h"),k(Ge.prototype,"s"),k(Ge.prototype,"v"),Object.defineProperty(Ge.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(Ge.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=Le.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var Ue=function(){function e(t,n){Ie(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Fe(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),Ne={};Me.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){Me.each(e,function(n){Ne[n]=t})});var He=/(\d+(\.\d+)?)px/,Ve={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var a=n,o=t;Me.isUndefined(o)&&(o=!0),Me.isUndefined(a)&&(a=!0),e.style.position="absolute",o&&(e.style.left=0,e.style.right=0),a&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,a){var o=n||{},r=Ne[t];if(!r)throw new Error("Event type "+t+" not supported.");var i=document.createEvent(r);switch(r){case"MouseEvents":{var s=o.x||o.clientX||0,l=o.y||o.clientY||0;i.initMouseEvent(t,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=i.initKeyboardEvent||i.initKeyEvent;Me.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break}default:{i.initEvent(t,o.bubbles||!1,o.cancelable||!0);break}}Me.defaults(i,a),e.dispatchEvent(i)},bind:function(e,t,n,a){return e.addEventListener?e.addEventListener(t,n,a||!1):e.attachEvent&&e.attachEvent("on"+t,n),Ve},unbind:function(e,t,n,a){return e.removeEventListener?e.removeEventListener(t,n,a||!1):e.detachEvent&&e.detachEvent("on"+t,n),Ve},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Ve},removeClass:function(e,t){if(!t)e.className=void 0;else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),a=n.indexOf(t);-1!==a&&(n.splice(a,1),e.className=n.join(" "))}return Ve},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return D(t["border-left-width"])+D(t["border-right-width"])+D(t["padding-left"])+D(t["padding-right"])+D(t.width)},getHeight:function(e){var t=getComputedStyle(e);return D(t["border-top-width"])+D(t["border-bottom-width"])+D(t["padding-top"])+D(t["padding-bottom"])+D(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Qe=function(e){function t(e,n){Ie(this,t);var a=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=a;return a.__prev=a.getValue(),a.__checkbox=document.createElement("input"),a.__checkbox.setAttribute("type","checkbox"),Ve.bind(a.__checkbox,"change",function(){o.setValue(!o.__prev)},!1),a.domElement.appendChild(a.__checkbox),a.updateDisplay(),a}return ze(t,e),Fe(t,[{key:"setValue",value:function(e){var n=Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ue),Ye=function(e){function t(e,n,a){Ie(this,t);var o=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=a,i=o;if(o.__select=document.createElement("select"),Me.isArray(r)){var s={};Me.each(r,function(e){s[e]=e}),r=s}return Me.each(r,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),i.__select.appendChild(n)}),o.updateDisplay(),Ve.bind(o.__select,"change",function(){var e=this.options[this.selectedIndex].value;i.setValue(e)}),o.domElement.appendChild(o.__select),o}return ze(t,e),Fe(t,[{key:"setValue",value:function(e){var n=Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Ve.isActive(this.__select)?this:(this.__select.value=this.getValue(),Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(Ue),Xe=function(e){function t(e,n){function a(){r.setValue(r.__input.value)}Ie(this,t);var o=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o;return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),Ve.bind(o.__input,"keyup",a),Ve.bind(o.__input,"change",a),Ve.bind(o.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),Ve.bind(o.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return ze(t,e),Fe(t,[{key:"updateDisplay",value:function(){return Ve.isActive(this.__input)||(this.__input.value=this.getValue()),Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ue),We=function(e){function t(e,n,a){var o=Math.LN10,r=Math.log;Ie(this,t);var i=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=a||{};return i.__min=s.min,i.__max=s.max,i.__step=s.step,i.__impliedStep=Me.isUndefined(i.__step)?0===i.initialValue?1:ye(10,he(r(fe(i.initialValue))/o))/10:i.__step,i.__precision=B(i.__impliedStep),i}return ze(t,e),Fe(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&0!=n%this.__step&&(n=xe(n/this.__step)*this.__step),Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=B(e),this}}]),t}(Ue),je=function(e){function t(e,n,a){function o(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function r(t){var e=d-t.clientY;l.setValue(l.getValue()+e*l.__impliedStep),d=t.clientY}function i(){Ve.unbind(window,"mousemove",r),Ve.unbind(window,"mouseup",i),o()}Ie(this,t);var s=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a));s.__truncationSuspended=!1;var l=s,d=void 0;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),Ve.bind(s.__input,"change",function(){var e=parseFloat(l.__input.value);Me.isNaN(e)||l.setValue(e)}),Ve.bind(s.__input,"blur",function(){o()}),Ve.bind(s.__input,"mousedown",function(t){Ve.bind(window,"mousemove",r),Ve.bind(window,"mouseup",i),d=t.clientY}),Ve.bind(s.__input,"keydown",function(t){13===t.keyCode&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1,o())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return ze(t,e),Fe(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():P(this.getValue(),this.__precision),Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(We),Ke=function(e){function t(e,n,a,o,r){function i(t){t.preventDefault();var e=u.__background.getBoundingClientRect();return u.setValue(w(t.clientX,e.left,e.right,u.__min,u.__max)),!1}function s(){Ve.unbind(window,"mousemove",i),Ve.unbind(window,"mouseup",s),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function l(t){var e=t.touches[0].clientX,n=u.__background.getBoundingClientRect();u.setValue(w(e,n.left,n.right,u.__min,u.__max))}function d(){Ve.unbind(window,"touchmove",l),Ve.unbind(window,"touchend",d),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}Ie(this,t);var c=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:a,max:o,step:r})),u=c;return c.__background=document.createElement("div"),c.__foreground=document.createElement("div"),Ve.bind(c.__background,"mousedown",function(t){document.activeElement.blur(),Ve.bind(window,"mousemove",i),Ve.bind(window,"mouseup",s),i(t)}),Ve.bind(c.__background,"touchstart",function(t){1!==t.touches.length||(Ve.bind(window,"touchmove",l),Ve.bind(window,"touchend",d),l(t))}),Ve.addClass(c.__background,"slider"),Ve.addClass(c.__foreground,"slider-fg"),c.updateDisplay(),c.__background.appendChild(c.__foreground),c.domElement.appendChild(c.__background),c}return ze(t,e),Fe(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Oe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(We),Je=function(e){function t(e,n,a){Ie(this,t);var o=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.__button=document.createElement("div"),o.__button.innerHTML=void 0===a?"Fire":a,Ve.bind(o.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),Ve.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return ze(t,e),Fe(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(Ue),Ze=function(e){function t(e,n){function a(t){d(t),Ve.bind(window,"mousemove",d),Ve.bind(window,"touchmove",d),Ve.bind(window,"mouseup",r),Ve.bind(window,"touchend",r)}function o(t){c(t),Ve.bind(window,"mousemove",c),Ve.bind(window,"touchmove",c),Ve.bind(window,"mouseup",i),Ve.bind(window,"touchend",i)}function r(){Ve.unbind(window,"mousemove",d),Ve.unbind(window,"touchmove",d),Ve.unbind(window,"mouseup",r),Ve.unbind(window,"touchend",r),l()}function i(){Ve.unbind(window,"mousemove",c),Ve.unbind(window,"touchmove",c),Ve.unbind(window,"mouseup",i),Ve.unbind(window,"touchend",i),l()}function s(){var e=Pe(this.value);!1===e?this.value=g.__color.toString():(g.__color.__state=e,g.setValue(g.__color.toOriginal()))}function l(){g.__onFinishChange&&g.__onFinishChange.call(g,g.__color.toOriginal())}function d(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=g.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,a=n.clientX,o=n.clientY,r=(a-e.left)/(e.right-e.left),i=1-(o-e.top)/(e.bottom-e.top);return 1<i?i=1:0>i&&(i=0),1<r?r=1:0>r&&(r=0),g.__color.v=i,g.__color.s=r,g.setValue(g.__color.toOriginal()),!1}function c(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=g.__hue_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,a=n.clientY,o=1-(a-e.top)/(e.bottom-e.top);return 1<o?o=1:0>o&&(o=0),g.__color.h=360*o,g.setValue(g.__color.toOriginal()),!1}Ie(this,t);var u=_e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));u.__color=new Ge(u.getValue()),u.__temp=new Ge(0);var g=u;u.domElement=document.createElement("div"),Ve.makeSelectable(u.domElement,!1),u.__selector=document.createElement("div"),u.__selector.className="selector",u.__saturation_field=document.createElement("div"),u.__saturation_field.className="saturation-field",u.__field_knob=document.createElement("div"),u.__field_knob.className="field-knob",u.__field_knob_border="2px solid ",u.__hue_knob=document.createElement("div"),u.__hue_knob.className="hue-knob",u.__hue_field=document.createElement("div"),u.__hue_field.className="hue-field",u.__input=document.createElement("input"),u.__input.type="text",u.__input_textShadow="0 1px 1px ",Ve.bind(u.__input,"keydown",function(t){13===t.keyCode&&s.call(this)}),Ve.bind(u.__input,"blur",s),Ve.bind(u.__selector,"mousedown",function(){Ve.addClass(this,"drag").bind(window,"mouseup",function(){Ve.removeClass(g.__selector,"drag")})}),Ve.bind(u.__selector,"touchstart",function(){Ve.addClass(this,"drag").bind(window,"touchend",function(){Ve.removeClass(g.__selector,"drag")})});var p=document.createElement("div");return Me.extend(u.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Me.extend(u.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:u.__field_knob_border+(.5>u.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Me.extend(u.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Me.extend(u.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Me.extend(p.style,{width:"100%",height:"100%",background:"none"}),L(p,"top","rgba(0,0,0,0)","#000"),Me.extend(u.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),R(u.__hue_field),Me.extend(u.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:u.__input_textShadow+"rgba(0,0,0,0.7)"}),Ve.bind(u.__saturation_field,"mousedown",a),Ve.bind(u.__saturation_field,"touchstart",a),Ve.bind(u.__field_knob,"mousedown",a),Ve.bind(u.__field_knob,"touchstart",a),Ve.bind(u.__hue_field,"mousedown",o),Ve.bind(u.__hue_field,"touchstart",o),u.__saturation_field.appendChild(p),u.__selector.appendChild(u.__field_knob),u.__selector.appendChild(u.__saturation_field),u.__selector.appendChild(u.__hue_field),u.__hue_field.appendChild(u.__hue_knob),u.domElement.appendChild(u.__input),u.domElement.appendChild(u.__selector),u.updateDisplay(),u}return ze(t,e),Fe(t,[{key:"updateDisplay",value:function(){var e=Pe(this.getValue());if(!1!==e){var t=!1;Me.each(Ge.COMPONENTS,function(n){if(!Me.isUndefined(e[n])&&!Me.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&Me.extend(this.__color.__state,e)}Me.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=.5>this.__color.v||.5<this.__color.s?255:0,a=255-n;Me.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,L(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Me.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}}]),t}(Ue),qe=["-moz-","-o-","-webkit-","-ms-",""],$e=function(e,t){var n=e[t];return Me.isArray(arguments[2])||Me.isObject(arguments[2])?new Ye(e,t,arguments[2]):Me.isNumber(n)?Me.isNumber(arguments[2])&&Me.isNumber(arguments[3])?Me.isNumber(arguments[4])?new Ke(e,t,arguments[2],arguments[3],arguments[4]):new Ke(e,t,arguments[2],arguments[3]):Me.isNumber(arguments[4])?new je(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new je(e,t,{min:arguments[2],max:arguments[3]}):Me.isString(n)?new Xe(e,t):Me.isFunction(n)?new Je(e,t,""):Me.isBoolean(n)?new Qe(e,t):null},et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},tt=function(){function e(){Ie(this,e),this.backgroundElement=document.createElement("div"),Me.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Ve.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Me.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Ve.bind(this.backgroundElement,"click",function(){t.hide()})}return Fe(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Me.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function e(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Ve.unbind(t.domElement,"webkitTransitionEnd",e),Ve.unbind(t.domElement,"transitionend",e),Ve.unbind(t.domElement,"oTransitionEnd",e)};Ve.bind(this.domElement,"webkitTransitionEnd",e),Ve.bind(this.domElement,"transitionend",e),Ve.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Ve.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Ve.getHeight(this.domElement)/2+"px"}}]),e}(),nt=function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");({load:function(e,t){var n=t||document,a=n.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,n.getElementsByTagName("head")[0].appendChild(a)},inject:function(e,t){var n=t||document,a=document.createElement("style");a.type="text/css",a.innerHTML=e;var o=n.getElementsByTagName("head")[0];try{o.appendChild(a)}catch(t){}}}).inject(nt);var at=72,ot=20,rt="Default",it=function(){try{return!!window.localStorage}catch(t){return!1}}(),st=void 0,lt=!0,dt=void 0,ct=!1,ut=[],gt=function e(t){var n=this,a=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Ve.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=Me.defaults(a,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),a=Me.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),Me.isUndefined(a.load)?a.load={preset:rt}:a.preset&&(a.load.preset=a.preset),Me.isUndefined(a.parent)&&a.hideable&&ut.push(this),a.resizable=Me.isUndefined(a.parent)&&a.resizable,a.autoPlace&&Me.isUndefined(a.scrollable)&&(a.scrollable=!0);var o=it&&"true"===localStorage.getItem(N(this,"isLocal")),r=void 0,i=void 0;if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},closeOnTop:{get:function(){return a.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:a.load.preset},set:function(e){n.parent?n.getRoot().preset=e:a.load.preset=e,j(this),n.revert()}},width:{get:function(){return a.width},set:function(e){a.width=e,X(n,e)}},name:{get:function(){return a.name},set:function(e){a.name=e,i&&(i.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(t){a.closed=t,a.closed?Ve.addClass(n.__ul,e.CLASS_CLOSED):Ve.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return o},set:function(e){it&&(o=e,e?Ve.bind(window,"unload",r):Ve.unbind(window,"unload",r),localStorage.setItem(N(n,"isLocal"),e))}}}),Me.isUndefined(a.parent)){if(this.closed=a.closed||!1,Ve.addClass(this.domElement,e.CLASS_MAIN),Ve.makeSelectable(this.domElement,!1),it&&o){n.useLocalStorage=!0;var s=localStorage.getItem(N(this,"gui"));s&&(a.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Ve.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),a.closeOnTop?(Ve.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Ve.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Ve.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===a.closed&&(a.closed=!0);var l=document.createTextNode(a.name);Ve.addClass(l,"controller-name"),i=I(n,l);var d=function(t){return t.preventDefault(),n.closed=!n.closed,!1};Ve.addClass(this.__ul,e.CLASS_CLOSED),Ve.addClass(i,"title"),Ve.bind(i,"click",d),a.closed||(this.closed=!1)}a.autoPlace&&(Me.isUndefined(a.parent)&&(lt&&(dt=document.createElement("div"),Ve.addClass(dt,"dg"),Ve.addClass(dt,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(dt),lt=!1),dt.appendChild(this.domElement),Ve.addClass(this.domElement,e.CLASS_AUTO_PLACE)),!this.parent&&X(n,a.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Ve.bind(window,"resize",this.__resizeHandler),Ve.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Ve.bind(this.__ul,"transitionend",this.__resizeHandler),Ve.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),a.resizable&&Y(this),r=function(){it&&"true"===localStorage.getItem(N(n,"isLocal"))&&localStorage.setItem(N(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=r,a.parent||function(){var e=n.getRoot();e.width+=1,Me.defer(function(){e.width-=1})}()};gt.toggleHide=function(){ct=!ct,Me.each(ut,function(e){e.domElement.style.display=ct?"none":""})},gt.CLASS_AUTO_PLACE="a",gt.CLASS_AUTO_PLACE_CONTAINER="ac",gt.CLASS_MAIN="main",gt.CLASS_CONTROLLER_ROW="cr",gt.CLASS_TOO_TALL="taller-than-window",gt.CLASS_CLOSED="closed",gt.CLASS_CLOSE_BUTTON="close-button",gt.CLASS_CLOSE_TOP="close-top",gt.CLASS_CLOSE_BOTTOM="close-bottom",gt.CLASS_DRAG="drag",gt.DEFAULT_WIDTH=245,gt.TEXT_CLOSED="Close Controls",gt.TEXT_OPEN="Open Controls",gt._keydownHandler=function(t){"text"!==document.activeElement.type&&(t.which===at||t.keyCode===at)&&gt.toggleHide()},Ve.bind(window,"keydown",gt._keydownHandler,!1),Me.extend(gt.prototype,{add:function(e,t){return U(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return U(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Me.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&dt.removeChild(this.domElement);var e=this;Me.each(this.__folders,function(t){e.removeFolder(t)}),Ve.unbind(window,"keydown",gt._keydownHandler,!1),F(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error("You already have a folder in this GUI by the name \""+e+"\"");var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new gt(t);this.__folders[e]=n;var a=I(this,n.domElement);return Ve.addClass(a,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],F(e);var t=this;Me.each(e.__folders,function(t){e.removeFolder(t)}),Me.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Ve.getOffset(e.__ul).top,n=0;Me.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=Ve.getHeight(t))}),window.innerHeight-t-ot<n?(Ve.addClass(e.domElement,gt.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-ot+"px"):(Ve.removeClass(e.domElement,gt.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Me.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Me.debounce(function(){this.onResize()},50),remember:function(){if(Me.isUndefined(st)&&(st=new tt,st.domElement.innerHTML="<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>"),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Me.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&Q(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&X(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,!e.remembered&&(e.remembered={}),e.remembered[this.preset]=W(this)),e.folders={},Me.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=W(this),O(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[rt]=W(this,!0)),this.load.remembered[e]=W(this),this.preset=e,H(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Me.each(this.__controllers,function(t){this.getRoot().load.remembered?G(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),Me.each(this.__folders,function(e){e.revert(e)}),e||O(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&K(this.__listening)},updateDisplay:function(){Me.each(this.__controllers,function(e){e.updateDisplay()}),Me.each(this.__folders,function(e){e.updateDisplay()})}});var pt=gt,mt=function(e){function t(e){var a;return n(this,t),a=f(this,i(t).call(this,e)),a.previousDemo=null,a.demo=null,a}return r(t,e),t}(function e(t){n(this,e),this.type=t,this.target=null}),ft=new mt("change"),vt=new mt("load"),At=function(t){function a(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=o.aside,s=void 0===r?t:r,l=o.renderer,d;return n(this,a),d=f(this,i(a).call(this)),d.renderer=void 0===l?function(){var n=new e.WebGLRenderer;return n.setSize(t.clientWidth,t.clientHeight),n.setPixelRatio(window.devicePixelRatio),n}():l,t.appendChild(d.renderer.domElement),d.clock=new e.Clock,d.menu=new pt({autoPlace:!1}),s.appendChild(d.menu.domElement),d.demos=new Map,d.demo=null,d.currentDemo=null,d}return r(a,t),o(a,[{key:"resetMenu",value:function(){var e=this,t=this.menu.domElement.parentNode,n=new pt({autoPlace:!1});if(1<this.demos.size){var a=n.add(this,"demo",Array.from(this.demos.keys()));a.onChange(function(){return e.loadDemo()})}return t.removeChild(this.menu.domElement),t.appendChild(n.domElement),this.menu.destroy(),this.menu=n,n}},{key:"startDemo",value:function(e){e.id===this.demo&&(e.initialize(),e.registerOptions(this.resetMenu()),e.ready=!0,vt.demo=e,this.dispatchEvent(vt))}},{key:"loadDemo",value:function(){var e=this,t=this.demos.get(this.demo),n=this.currentDemo,a=this.renderer;window.location.hash=t.id,null!==n&&n.reset(),this.menu.domElement.style.display="none",ft.previousDemo=n,ft.demo=t,this.currentDemo=t,this.dispatchEvent(ft),a.clear(),t.load().then(function(){return e.startDemo(t)})["catch"](console.error)}},{key:"addDemo",value:function(e){var t=window.location.hash.slice(1),n=this.currentDemo;return this.demos.set(e.id,e.setRenderer(this.renderer)),(null===this.demo&&0===t.length||e.id===t)&&(this.demo=e.id,this.loadDemo()),this.resetMenu(),null!==n&&n.ready&&n.registerOptions(this.menu),this}},{key:"removeDemo",value:function(e){var t=this.demos,n;return t.has(e)&&(t["delete"](e),this.demo===e&&0<t.size?(n=t.entries().next().value,this.demo=n[0],this.currentDemo=n[1],this.loadDemo()):(this.demo=null,this.currentDemo=null,this.renderer.clear())),this}},{key:"setSize",value:function(t,n){var a=this.currentDemo;if(this.renderer.setSize(t,n),null!==a&&null!==a.camera){var o=a.camera;o instanceof e.OrthographicCamera?(o.left=t/-2,o.right=t/2,o.top=n/2,o.bottom=n/-2,o.updateProjectionMatrix()):!(o instanceof e.CubeCamera)&&(o.aspect=t/n,o.updateProjectionMatrix())}}},{key:"render",value:function(){var e=this.currentDemo,t=this.clock.getDelta();null!==e&&e.ready&&e.render(t)}}]),a}(Ee),ht="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",yt=function(t){function a(){return n(this,a),f(this,i(a).call(this,{type:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{previousLuminanceBuffer:new e.Uniform(null),currentLuminanceBuffer:new e.Uniform(null),minLuminance:new e.Uniform(.01),deltaTime:new e.Uniform(0),tau:new e.Uniform(1)},fragmentShader:"uniform sampler2D previousLuminanceBuffer;uniform sampler2D currentLuminanceBuffer;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float previousLuminance=texture2D(previousLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;float currentLuminance=texture2D(currentLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;previousLuminance=max(minLuminance,previousLuminance);currentLuminance=max(minLuminance,currentLuminance);float adaptedLum=previousLuminance+(currentLuminance-previousLuminance)*(1.0-exp(-deltaTime*tau));gl_FragColor.r=adaptedLum;}",vertexShader:ht,depthWrite:!1,depthTest:!1}))}return r(a,t),a}(e.ShaderMaterial),xt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2;return n(this,a),f(this,i(a).call(this,{type:"ColorEdgesMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new e.Uniform(null),texelSize:new e.Uniform(t)},fragmentShader:"uniform sampler2D inputBuffer;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;void main(){const vec2 threshold=vec2(EDGE_THRESHOLD);vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges*=step(maxDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}))}return r(a,t),o(a,[{key:"setLocalContrastAdaptationFactor",value:function(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("2"),this.needsUpdate=!0}},{key:"setEdgeDetectionThreshold",value:function(e){e=Ae(ve(e,.05),.5),this.defines.EDGE_THRESHOLD=e.toFixed("2"),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Ct=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,o;return n(this,a),o=f(this,i(a).call(this,{type:"ConvolutionMaterial",uniforms:{inputBuffer:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2()),halfTexelSize:new e.Uniform(new e.Vector2()),kernel:new e.Uniform(0),scale:new e.Uniform(1)},fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;/*Packing multiple texture coordinates into one varying and using a swizzle toextract them in the fragment shader still causes a dependent texture read.*/varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1})),o.setTexelSize(t.x,t.y),o.kernelSize=Et.LARGE,o}return r(a,t),o(a,[{key:"getKernel",value:function(){return bt[this.kernelSize]}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}}]),a}(e.ShaderMaterial),bt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Et={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},St=function(t){function a(){return n(this,a),f(this,i(a).call(this,{type:"CopyMaterial",uniforms:{inputBuffer:new e.Uniform(null),opacity:new e.Uniform(1)},fragmentShader:"uniform sampler2D inputBuffer;uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;}",vertexShader:ht,depthWrite:!1,depthTest:!1}))}return r(a,t),a}(e.ShaderMaterial),Tt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=1<arguments.length?arguments[1]:void 0,r;return n(this,a),r=f(this,i(a).call(this,{type:"DepthComparisonMaterial",uniforms:{depthBuffer:new e.Uniform(t),cameraNear:new e.Uniform(.3),cameraFar:new e.Uniform(1e3)},fragmentShader:"#include <packing>\n#include <clipping_planes_pars_fragment>\nuniform sampler2D depthBuffer;uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)? 1.0 : 0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",vertexShader:"#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}",depthWrite:!1,depthTest:!1,morphTargets:!0,skinning:!0})),r.adoptCameraSettings(o),r}return r(a,t),o(a,[{key:"adoptCameraSettings",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null!==t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof e.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}}]),a}(e.ShaderMaterial),Mt=function(t){function a(){return n(this,a),f(this,i(a).call(this,{type:"DepthMaskMaterial",uniforms:{depthBuffer0:new e.Uniform(null),depthBuffer1:new e.Uniform(null),inputBuffer:new e.Uniform(null)},fragmentShader:"uniform sampler2D depthBuffer0;uniform sampler2D depthBuffer1;uniform sampler2D inputBuffer;varying vec2 vUv;void main(){float d0=texture2D(depthBuffer0,vUv).r;float d1=texture2D(depthBuffer1,vUv).r;if(d0<d1){discard;}gl_FragColor=texture2D(inputBuffer,vUv);}",vertexShader:ht,depthWrite:!1,depthTest:!1}))}return r(a,t),a}(e.ShaderMaterial),kt=function(t){function a(t,o,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,l=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4],d;if(n(this,a),d=f(this,i(a).call(this,{type:"EffectMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{inputBuffer:new e.Uniform(null),depthBuffer:new e.Uniform(null),resolution:new e.Uniform(new e.Vector2()),texelSize:new e.Uniform(new e.Vector2()),cameraNear:new e.Uniform(.3),cameraFar:new e.Uniform(1e3),aspect:new e.Uniform(1),time:new e.Uniform(0)},fragmentShader:"#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#include <dithering_fragment>\n}".replace(Dt.FRAGMENT_HEAD,t.get(Dt.FRAGMENT_HEAD)).replace(Dt.FRAGMENT_MAIN_UV,t.get(Dt.FRAGMENT_MAIN_UV)).replace(Dt.FRAGMENT_MAIN_IMAGE,t.get(Dt.FRAGMENT_MAIN_IMAGE)),vertexShader:"uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(Dt.VERTEX_HEAD,t.get(Dt.VERTEX_HEAD)).replace(Dt.VERTEX_MAIN_SUPPORT,t.get(Dt.VERTEX_MAIN_SUPPORT)),dithering:l,depthWrite:!1,depthTest:!1})),null!==o){var c=!0,u=!1,g=void 0;try{for(var p=o.entries()[Symbol.iterator](),m,v;!(c=(m=p.next()).done);c=!0)v=m.value,d.defines[v[0]]=v[1]}catch(e){u=!0,g=e}finally{try{c||null==p["return"]||p["return"]()}finally{if(u)throw g}}}if(null!==r){var A=!0,h=!1,y=void 0;try{for(var x=r.entries()[Symbol.iterator](),C,b;!(A=(C=x.next()).done);A=!0)b=C.value,d.uniforms[b[0]]=b[1]}catch(e){h=!0,y=e}finally{try{A||null==x["return"]||x["return"]()}finally{if(h)throw y}}}return d.adoptCameraSettings(s),d}return r(a,t),o(a,[{key:"setSize",value:function(e,t){e=ve(e,1),t=ve(t,1),this.uniforms.resolution.value.set(e,t),this.uniforms.texelSize.value.set(1/e,1/t),this.uniforms.aspect.value=e/t}},{key:"adoptCameraSettings",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null!==t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof e.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}},{key:"depthPacking",get:function(){return me(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0)}}]),a}(e.ShaderMaterial),Dt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Bt=function(t){function a(t){return n(this,a),f(this,i(a).call(this,{type:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new e.Uniform(null),lightPosition:new e.Uniform(t),density:new e.Uniform(1),decay:new e.Uniform(1),weight:new e.Uniform(1),exposure:new e.Uniform(1),clampMax:new e.Uniform(1)},fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=coord-lightPosition;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 texel;vec4 color=vec4(0.0);/*Estimate the probability of occlusion at each pixel by summing samplesalong a ray to the light position.*/for(int i=0;i<SAMPLES_INT;++i){coord-=delta;texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\n#include <dithering_fragment>\n}",vertexShader:ht,depthWrite:!1,depthTest:!1}))}return r(a,t),o(a,[{key:"samples",get:function(){return me(this.defines.SAMPLES_INT)},set:function(e){e=he(e),this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Pt=function(t){function a(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r;n(this,a);var s=null!==o;return r=f(this,i(a).call(this,{type:"LuminanceMaterial",uniforms:{inputBuffer:new e.Uniform(null),threshold:new e.Uniform(0),smoothing:new e.Uniform(1),range:new e.Uniform(s?o:new e.Vector2)},fragmentShader:"#include <common>\nuniform sampler2D inputBuffer;\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:ht,depthWrite:!1,depthTest:!1})),r.colorOutput=t,r.useThreshold=!0,r.useRange=s,r}return r(a,t),o(a,[{key:"setColorOutputEnabled",value:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"setLuminanceRangeEnabled",value:function(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}},{key:"threshold",get:function(){return this.uniforms.threshold.value},set:function(e){this.uniforms.threshold.value=e}},{key:"smoothing",get:function(){return this.uniforms.smoothing.value},set:function(e){this.uniforms.smoothing.value=e}},{key:"useThreshold",get:function(){return void 0!==this.defines.THRESHOLD},set:function(e){e?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}},{key:"colorOutput",get:function(){return void 0!==this.defines.COLOR},set:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"useRange",get:function(){return void 0!==this.defines.RANGE},set:function(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}},{key:"luminanceRange",get:function(){return void 0!==this.defines.RANGE},set:function(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),wt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,o;return n(this,a),o=f(this,i(a).call(this,{type:"OutlineEdgesMaterial",uniforms:{maskTexture:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2())},fragmentShader:"uniform sampler2D maskTexture;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(maskTexture,vUv0).rg;vec2 c1=texture2D(maskTexture,vUv1).rg;vec2 c2=texture2D(maskTexture,vUv2).rg;vec2 c3=texture2D(maskTexture,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)? vec2(d,0.0): vec2(0.0,d);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1})),o.setTexelSize(t.x,t.y),o}return r(a,t),o(a,[{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t)}}]),a}(e.ShaderMaterial),Lt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Vector2;return n(this,a),f(this,i(a).call(this,{type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new e.Uniform(null),areaTexture:new e.Uniform(null),searchTexture:new e.Uniform(null),texelSize:new e.Uniform(t),resolution:new e.Uniform(o)},fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\nuniform sampler2D inputBuffer;uniform sampler2D areaTexture;uniform sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}/***Allows to decode two binary values from a bilinear-filtered access.**Bilinear access for fetching 'e' have a 0.25 offset,and we are interested*in the R and G edges:**+---G---+-------+*|x o R   x|*+-------+-------+**Then,if one of these edge is enabled:*Red:(0.75*X+0.25*1)=>0.25 or 1.0*Green:(0.75*1+0.25*X)=>0.75 or 1.0**This function will unpack the values(mad+mul+round):*wolframalpha.com: round(x*abs(5*x-5*0.75))plot 0 to 1*/vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}/***Diagonal pattern searches.*/vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}/***Calculates the area corresponding to a certain diagonal distance and crossing*edges 'e'.*/vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}/***Searches for diagonal patterns and returns the corresponding weights.*/vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}/***Determines how much length should be added in the last step of the searches.**Takes the bilinearly interpolated edge(see @PSEUDO_GATHER4),and adds 0,1*or 2 depending on which edges and crossing edges are active.*/float searchLength(const in vec2 e,const in float offset){/*The texture is flipped vertically,with left and right cases taking halfof the space horizontally.*/vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}/***Horizontal search for the second pass.*/float searchXLeft(in vec2 texCoord,const in float end){/*@PSEUDO_GATHER4This texCoord has been offset by(-0.25,-0.125)in the vertex shader tosample between edges,thus fetching four edges in a row.Sampling with different offsets in each direction allows to disambiguatewhich edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}/***Vertical search for the second pass.*/float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}/***Determines the areas at each side of the current edge.*/vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}/***Corner detection.*/void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=saturate(factor);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=saturate(factor);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\n/*Diagonals have both north and west edges,so searching for them in one ofthe boundaries is enough.*/weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;/*Now fetch the left crossing edges,two at a time using bilinearfiltering. Sampling at-0.25(see @CROSSING_OFFSET)enables to discern whatvalue each edge has.*/float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;/*Translate distances to pixel units for better interleave arithmetic andmemory accesses.*/d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}))}return r(a,t),o(a,[{key:"setOrthogonalSearchSteps",value:function(e){e=Ae(ve(e,0),112),this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}},{key:"setDiagonalSearchSteps",value:function(e){e=Ae(ve(e,0),20),this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}},{key:"setCornerRounding",value:function(e){e=Ae(ve(e,0),100),this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}},{key:"diagonalDetection",get:function(){return void 0===this.defines.DISABLE_DIAG_DETECTION},set:function(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}},{key:"cornerRounding",get:function(){return void 0===this.defines.DISABLE_CORNER_DETECTION},set:function(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Rt=null,It=function(){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Pass",o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Scene,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new e.OrthographicCamera(-1,1,1,-1,0,1);n(this,t),this.name=a,this.scene=o,this.camera=r,this.screen=null,this.needsSwap=!0,this.needsDepthTexture=!1,this.renderToScreen=!1,this.enabled=!0}return o(t,[{key:"getFullscreenMaterial",value:function(){return null===this.screen?null:this.screen.material}},{key:"setFullscreenMaterial",value:function(t){var n=this.screen;null===n?(n=new e.Mesh(J(),t),n.frustumCulled=!1,null===this.scene&&(this.scene=new e.Scene),this.scene.add(n),this.screen=n):n.material=t}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(){}},{key:"render",value:function(){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(){}},{key:"initialize",value:function(){}},{key:"dispose",value:function(){var e=this.getFullscreenMaterial();null!==e&&e.dispose();for(var t=0,n=Object.keys(this),a;t<n.length;t++)a=n[t],null!==this[a]&&"function"==typeof this[a].dispose&&this[a].dispose()}}]),t}(),Ft=-1,Ot=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.resolutionScale,r=void 0===o?.5:o,s=t.width,l=void 0===s?Ft:s,d=t.height,c=void 0===d?Ft:d,u=t.kernelSize,g=void 0===u?Et.LARGE:u,p;return n(this,a),p=f(this,i(a).call(this,"BlurPass")),p.renderTargetX=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),p.renderTargetX.texture.name="Blur.TargetX",p.renderTargetY=p.renderTargetX.clone(),p.renderTargetY.texture.name="Blur.TargetY",p.originalSize=new e.Vector2,p.resolution=new e.Vector2(l,c),p.resolutionScale=r,p.convolutionMaterial=new Ct,p.ditheredConvolutionMaterial=new Ct,p.ditheredConvolutionMaterial.dithering=!0,p.dithering=!1,p.kernelSize=g,p}return r(a,t),o(a,[{key:"getOriginalSize",value:function(){return this.originalSize}},{key:"getResolutionScale",value:function(){return this.resolutionScale}},{key:"setResolutionScale",value:function(e){this.resolutionScale=e,this.setSize(this.originalSize.x,this.originalSize.y)}},{key:"render",value:function(e,t,n){var a=this.scene,o=this.camera,r=this.renderTargetX,s=this.renderTargetY,d=this.convolutionMaterial,c=d.uniforms,u=d.getKernel(),g=t,p,m,f;for(this.setFullscreenMaterial(d),m=0,f=u.length-1;m<f;++m)p=0==m%2?r:s,c.kernel.value=u[m],c.inputBuffer.value=g.texture,e.setRenderTarget(p),e.render(a,o),g=p;this.dithering&&(d=this.ditheredConvolutionMaterial,c=d.uniforms,this.setFullscreenMaterial(d)),c.kernel.value=u[m],c.inputBuffer.value=g.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(a,o)}},{key:"setSize",value:function(e,t){var n=this.resolution,a=e/t;this.originalSize.set(e,t),n.x!==Ft&&n.y!==Ft?(e=ve(1,n.x),t=ve(1,n.y)):n.x===Ft?n.y===Ft?(e=ve(1,xe(e*this.resolutionScale)),t=ve(1,xe(t*this.resolutionScale))):(e=xe(ve(1,n.y)*a),t=ve(1,n.y)):(e=ve(1,n.x),t=xe(ve(1,n.y)/a)),this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t),this.convolutionMaterial.setTexelSize(1/e,1/t),this.ditheredConvolutionMaterial.setTexelSize(1/e,1/t)}},{key:"initialize",value:function(t,n){n||(this.renderTargetX.texture.format=e.RGBFormat,this.renderTargetY.texture.format=e.RGBFormat)}},{key:"width",get:function(){return this.renderTargetX.width},set:function(e){this.resolution.x=e,this.setSize(this.originalSize.x,this.originalSize.y)}},{key:"height",get:function(){return this.renderTargetX.height},set:function(e){this.resolution.y=e,this.setSize(this.originalSize.x,this.originalSize.y)}},{key:"scale",get:function(){return this.convolutionMaterial.uniforms.scale.value},set:function(e){this.convolutionMaterial.uniforms.scale.value=e,this.ditheredConvolutionMaterial.uniforms.scale.value=e}},{key:"kernelSize",get:function(){return this.convolutionMaterial.kernelSize},set:function(e){this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}}],[{key:"AUTO_SIZE",get:function(){return Ft}}]),a}(It),zt=function(e){function t(){var e;return n(this,t),e=f(this,i(t).call(this,"ClearMaskPass",null,null)),e.needsSwap=!1,e}return r(t,e),o(t,[{key:"render",value:function(e){var t=e.state.buffers.stencil;t.setLocked(!1),t.setTest(!1)}}]),t}(It),_t=new e.Color,Gt=function(e){function t(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r;return n(this,t),r=f(this,i(t).call(this,"ClearPass",null,null)),r.needsSwap=!1,r.color=e,r.depth=a,r.stencil=o,r.overrideClearColor=null,r.overrideClearAlpha=-1,r}return r(t,e),o(t,[{key:"render",value:function(e,t){var n=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),r=null!==n,i=0<=a;r?(_t.copy(e.getClearColor()),e.setClearColor(n,i?a:o)):i&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),r?e.setClearColor(_t,o):i&&e.setClearAlpha(o)}}]),t}(It),Ut=function(e){function t(e,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r;return n(this,t),r=f(this,i(t).call(this,"RenderPass",e,a)),r.needsSwap=!1,r.overrideMaterial=o,r.clearPass=new Gt,r.depthTexture=null,r}return r(t,e),o(t,[{key:"getClearPass",value:function(){return this.clearPass}},{key:"getDepthTexture",value:function(){return this.depthTexture}},{key:"setDepthTexture",value:function(e){this.depthTexture=e}},{key:"render",value:function(e,t,n){var a=this.scene,o=this.renderToScreen?null:t,r=a.overrideMaterial;null===this.depthTexture||this.renderToScreen||(t.depthTexture=this.depthTexture,n.depthTexture=null),this.clear&&(this.clearPass.renderToScreen=this.renderToScreen,this.clearPass.render(e,t)),a.overrideMaterial=this.overrideMaterial,e.setRenderTarget(o),e.render(a,this.camera),a.overrideMaterial=r}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}}]),t}(It),Nt=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=r.resolutionScale,l=void 0===s?1:s,d=r.renderTarget,c;n(this,a),c=f(this,i(a).call(this,"DepthPass")),c.needsSwap=!1,c.renderPass=new Ut(t,o,new e.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,morphTargets:!0,skinning:!0}));var u=c.renderPass.getClearPass();return u.overrideClearColor=new e.Color(16777215),u.overrideClearAlpha=1,c.renderTarget=d,void 0===c.renderTarget&&(c.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1}),c.renderTarget.texture.name="DepthPass.Target"),c.resolutionScale=l,c.originalSize=new e.Vector2,c}return r(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.resolutionScale}},{key:"setResolutionScale",value:function(e){this.resolutionScale=e,this.setSize(this.originalSize.x,this.originalSize.y)}},{key:"render",value:function(e){var t=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,t)}},{key:"setSize",value:function(e,t){this.originalSize.set(e,t),this.renderTarget.setSize(ve(1,xe(e*this.resolutionScale)),ve(1,xe(t*this.resolutionScale)))}}]),a}(It),Ht={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Vt=new Map([[Ht.SKIP,null],[Ht.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[Ht.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[Ht.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[Ht.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Ht.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Ht.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[Ht.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[Ht.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[Ht.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[Ht.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[Ht.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Ht.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[Ht.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[Ht.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Ht.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Ht.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[Ht.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Ht.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),Qt=function(){function t(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;n(this,t),this.blendFunction=a,this.opacity=new e.Uniform(o)}return o(t,[{key:"getShaderCode",value:function(){return Vt.get(this.blendFunction)}}]),t}(),Yt=function(){function e(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=o.attributes,i=void 0===r?Xt.NONE:r,s=o.blendFunction,l=void 0===s?Ht.SCREEN:s,d=o.defines,c=void 0===d?new Map:d,u=o.uniforms,g=void 0===u?new Map:u,p=o.extensions,m=void 0===p?null:p,f=o.vertexShader,v=void 0===f?null:f;n(this,e),this.name=t,this.attributes=i,this.fragmentShader=a,this.vertexShader=v,this.defines=c,this.uniforms=g,this.extensions=m,this.blendMode=new Qt(l)}return o(e,[{key:"setDepthTexture",value:function(){}},{key:"update",value:function(){}},{key:"setSize",value:function(){}},{key:"initialize",value:function(){}},{key:"dispose",value:function(){for(var e=0,t=Object.keys(this),n;e<t.length;e++)n=t[e],null!==this[n]&&"function"==typeof this[n].dispose&&this[n].dispose()}}]),e}(),Xt={CONVOLUTION:2,DEPTH:1,NONE:0},Wt=function(e){function t(e){var a;n(this,t),a=f(this,i(t).call(this,"EffectPass")),a.mainCamera=e;for(var o=arguments.length,r=Array(1<o?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];return a.effects=r.sort(function(e,t){return t.attributes-e.attributes}),a.skipRendering=!1,a.quantize=!1,a.uniforms=0,a.varyings=0,a.minTime=1,a.maxTime=1e3,a.setFullscreenMaterial(a.createMaterial()),a}return r(t,e),o(t,[{key:"createMaterial",value:function(){var e=/\bblend\b/g,t=new Map([[Dt.FRAGMENT_HEAD,""],[Dt.FRAGMENT_MAIN_UV,""],[Dt.FRAGMENT_MAIN_IMAGE,""],[Dt.VERTEX_HEAD,""],[Dt.VERTEX_MAIN_SUPPORT,""]]),n=new Map,a=new Map,o=new Map,r=new Set,i=0,s=0,l=0,d=!1,c=!1,u=!0,g=!1,p=void 0,m;try{for(var f=this.effects[Symbol.iterator](),v,A;!(u=(v=f.next()).done);u=!0)if(A=v.value,A.blendMode.blendFunction===Ht.SKIP)l|=A.attributes&Xt.DEPTH;else if(0!=(l&Xt.CONVOLUTION)&&0!=(A.attributes&Xt.CONVOLUTION))console.error("Convolution effects cannot be merged",A);else if(l|=A.attributes,m=$("e"+i++,A,t,n,a,o,l),s+=m.varyings.length,d=d||m.transformedUv,c=c||m.readDepth,null!==A.extensions){var h=!0,y=!1,x=void 0;try{for(var C=A.extensions[Symbol.iterator](),b,E;!(h=(b=C.next()).done);h=!0)E=b.value,r.add(E)}catch(e){y=!0,x=e}finally{try{h||null==C["return"]||C["return"]()}finally{if(y)throw x}}}}catch(e){g=!0,p=e}finally{try{u||null==f["return"]||f["return"]()}finally{if(g)throw p}}var S=!0,T=!1,M=void 0;try{for(var k=n.values()[Symbol.iterator](),D,B;!(S=(D=k.next()).done);S=!0)B=D.value,t.set(Dt.FRAGMENT_HEAD,t.get(Dt.FRAGMENT_HEAD)+B.getShaderCode().replace(e,"blend"+B.blendFunction)+"\n")}catch(e){T=!0,M=e}finally{try{S||null==k["return"]||k["return"]()}finally{if(T)throw M}}0!=(l&Xt.DEPTH)&&(c&&t.set(Dt.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(Dt.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=!0),d?(t.set(Dt.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(Dt.FRAGMENT_MAIN_UV)),a.set("UV","transformedUv")):a.set("UV","vUv"),t.forEach(function(e,t,n){return n.set(t,e.trim())}),this.uniforms=o.size,this.varyings=s,this.skipRendering=0===i,this.needsSwap=!this.skipRendering;var P=new kt(t,a,o,this.mainCamera,this.dithering);if(0<r.size){var w=!0,L=!1,R=void 0;try{for(var I=r[Symbol.iterator](),F,O;!(w=(F=I.next()).done);w=!0)O=F.value,P.extensions[O]=!0}catch(e){L=!0,R=e}finally{try{w||null==I["return"]||I["return"]()}finally{if(L)throw R}}}return P}},{key:"recompile",value:function(){var e=this.getFullscreenMaterial(),t=0,n=0,a=null,o=0;if(null!==e){var r=e.uniforms.resolution.value;t=r.x,n=r.y,a=e.uniforms.depthBuffer.value,o=e.depthPacking,e.dispose(),this.uniforms=0,this.varyings=0}e=this.createMaterial(),e.setSize(t,n),this.setFullscreenMaterial(e),this.setDepthTexture(a,o)}},{key:"getDepthTexture",value:function(){var e=this.getFullscreenMaterial();return null===e?null:e.uniforms.depthBuffer.value}},{key:"setDepthTexture",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.depthPacking=t,n.needsUpdate=!0;var a=!0,o=!1,r=void 0;try{for(var i=this.effects[Symbol.iterator](),s,l;!(a=(s=i.next()).done);a=!0)l=s.value,l.setDepthTexture(e,t)}catch(e){o=!0,r=e}finally{try{a||null==i["return"]||i["return"]()}finally{if(o)throw r}}}},{key:"render",value:function(e,t,n,a){var o=this.getFullscreenMaterial(),r=o.uniforms.time.value+a,i=!0,s=!1,l=void 0;try{for(var d=this.effects[Symbol.iterator](),c,u;!(i=(c=d.next()).done);i=!0)u=c.value,u.update(e,t,a)}catch(e){s=!0,l=e}finally{try{i||null==d["return"]||d["return"]()}finally{if(s)throw l}}(!this.skipRendering||this.renderToScreen)&&(o.uniforms.inputBuffer.value=t.texture,o.uniforms.time.value=r<=this.maxTime?r:this.minTime,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera))}},{key:"setSize",value:function(e,t){this.getFullscreenMaterial().setSize(e,t);var n=!0,a=!1,o=void 0;try{for(var r=this.effects[Symbol.iterator](),i,s;!(n=(i=r.next()).done);n=!0)s=i.value,s.setSize(e,t)}catch(e){a=!0,o=e}finally{try{n||null==r["return"]||r["return"]()}finally{if(a)throw o}}}},{key:"initialize",value:function(e,t){var n=e.capabilities,a=Ae(n.maxFragmentUniforms,n.maxVertexUniforms);this.uniforms>a&&console.warn("The current rendering context doesn't support more than "+a+" uniforms, but "+this.uniforms+" were defined"),a=n.maxVaryings,this.varyings>a&&console.warn("The current rendering context doesn't support more than "+a+" varyings, but "+this.varyings+" were defined");var o=!0,r=!1,i=void 0;try{for(var s=this.effects[Symbol.iterator](),l,d;!(o=(l=s.next()).done);o=!0)d=l.value,d.initialize(e,t)}catch(e){r=!0,i=e}finally{try{o||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"dispose",value:function(){h(i(t.prototype),"dispose",this).call(this);var e=!0,n=!1,a=void 0;try{for(var o=this.effects[Symbol.iterator](),r,s;!(e=(r=o.next()).done);e=!0)s=r.value,s.dispose()}catch(e){n=!0,a=e}finally{try{e||null==o["return"]||o["return"]()}finally{if(n)throw a}}}},{key:"dithering",get:function(){return this.quantize},set:function(e){if(this.quantize!==e){var t=this.getFullscreenMaterial();null!==t&&(t.dithering=e,t.needsUpdate=!0),this.quantize=e}}}]),t}(It),jt=function(e){function t(e,a){var o;return n(this,t),o=f(this,i(t).call(this,"MaskPass",e,a)),o.needsSwap=!1,o.clearPass=new Gt(!1,!1,!0),o.inverse=!1,o}return r(t,e),o(t,[{key:"render",value:function(e,t,n){var a=e.getContext(),o=e.state.buffers,r=this.scene,i=this.camera,s=this.clearPass,l=this.inverse?0:1;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,l,4294967295),o.stencil.setClear(1-l),o.stencil.setLocked(!0),this.clear&&(this.renderToScreen?s.render(e,null):(s.render(e,t),s.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(r,i)):(e.setRenderTarget(t),e.render(r,i),e.setRenderTarget(n),e.render(r,i)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}},{key:"clear",get:function(){return this.clearPass.enabled},set:function(e){this.clearPass.enabled=e}}]),t}(It),Kt=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=r.resolutionScale,l=void 0===s?1:s,d=r.renderTarget,c;n(this,a),c=f(this,i(a).call(this,"NormalPass")),c.needsSwap=!1,c.renderPass=new Ut(t,o,new e.MeshNormalMaterial({morphTargets:!0,skinning:!0}));var u=c.renderPass.getClearPass();return u.overrideClearColor=new e.Color(7829503),u.overrideClearAlpha=1,c.renderTarget=d,void 0===c.renderTarget&&(c.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBFormat,stencilBuffer:!1}),c.renderTarget.texture.name="NormalPass.Target"),c.resolutionScale=l,c.originalSize=new e.Vector2,c}return r(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.resolutionScale}},{key:"setResolutionScale",value:function(e){this.resolutionScale=e,this.setSize(this.originalSize.x,this.originalSize.y)}},{key:"render",value:function(e){var t=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,t,t)}},{key:"setSize",value:function(e,t){this.originalSize.set(e,t),this.renderTarget.setSize(ve(1,xe(e*this.resolutionScale)),ve(1,xe(t*this.resolutionScale)))}}]),a}(It),Jt=function(t){function a(t){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r;return n(this,a),r=f(this,i(a).call(this,"SavePass")),r.setFullscreenMaterial(new St),r.needsSwap=!1,r.renderTarget=t,void 0===t&&(r.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),r.renderTarget.texture.name="SavePass.Target"),r.resize=o,r}return r(a,t),o(a,[{key:"render",value:function(e,t){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}},{key:"setSize",value:function(e,t){this.resize&&(e=ve(1,e),t=ve(1,t),this.renderTarget.setSize(e,t))}}]),a}(It),Zt=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"inputBuffer",o;return n(this,t),o=f(this,i(t).call(this,"ShaderPass")),o.setFullscreenMaterial(e),o.uniform=null,o.setInput(a),o}return r(t,e),o(t,[{key:"setInput",value:function(e){var t=this.getFullscreenMaterial();if(this.uniform=null,null!==t){var n=t.uniforms;void 0!==n&&void 0!==n[e]&&(this.uniform=n[e])}}},{key:"render",value:function(e,t,n){null!==this.uniform&&(this.uniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}]),t}(It),qt=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=a.depthBuffer,r=a.stencilBuffer;n(this,t),this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(void 0===o||o,void 0!==r&&r),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new Zt(new St()),this.depthTexture=null,this.passes=[]}return o(t,[{key:"getRenderer",value:function(){return this.renderer}},{key:"replaceRenderer",value:function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=this.renderer;if(null!==a&&a!==t){var o=a.getSize(new e.Vector2),r=t.getSize(new e.Vector2),i=a.domElement.parentNode;this.renderer=t,this.renderer.autoClear=!1,o.equals(r)||this.setSize(),n&&null!==i&&(i.removeChild(a.domElement),i.appendChild(t.domElement))}return a}},{key:"createDepthTexture",value:function(){var t=this.depthTexture=new e.DepthTexture;return this.inputBuffer.stencilBuffer&&(t.format=e.DepthStencilFormat,t.type=e.UnsignedInt248Type),t}},{key:"createBuffer",value:function(t,n){var a=this.renderer.getDrawingBufferSize(new e.Vector2),o=this.renderer.getContext().getContextAttributes().alpha,r=new e.WebGLRenderTarget(a.width,a.height,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:o?e.RGBAFormat:e.RGBFormat,depthBuffer:t,stencilBuffer:n});return r.texture.name="EffectComposer.Buffer",r.texture.generateMipmaps=!1,r}},{key:"addPass",value:function(t,n){var a=this.passes,o=this.renderer,r=o.getDrawingBufferSize(new e.Vector2);if(t.setSize(r.width,r.height),t.initialize(o,o.getContext().getContextAttributes().alpha),void 0===n?a.push(t):a.splice(n,0,t),t.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var i=this.createDepthTexture(),s=!0,l=!1,d=void 0;try{for(var c=a[Symbol.iterator](),u;!(s=(u=c.next()).done);s=!0)t=u.value,t.setDepthTexture(i)}catch(e){l=!0,d=e}finally{try{s||null==c["return"]||c["return"]()}finally{if(l)throw d}}}else t.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function(e){var t=this.passes,n=0<t.splice(t.indexOf(e),1).length;if(n&&null!==this.depthTexture){var a=function(e,t){return e||t.needsDepthTexture},o=t.reduce(a,!1);if(!o){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.outputBuffer.depthTexture=null;var r=!0,i=!1,s=void 0;try{for(var l=t[Symbol.iterator](),d;!(r=(d=l.next()).done);r=!0)e=d.value,e.setDepthTexture(null)}catch(e){i=!0,s=e}finally{try{r||null==l["return"]||l["return"]()}finally{if(i)throw s}}}}}},{key:"render",value:function(e){var t=this.renderer,n=this.copyPass,a=this.inputBuffer,o=this.outputBuffer,r=!1,i=!0,s=!1,l=void 0,d,c,u;try{for(var g=this.passes[Symbol.iterator](),p,m;!(i=(p=g.next()).done);i=!0)m=p.value,m.enabled&&(m.render(t,a,o,e,r),m.needsSwap&&(r&&(n.renderToScreen=m.renderToScreen,d=t.getContext(),c=t.state.buffers.stencil,c.setFunc(d.NOTEQUAL,1,4294967295),n.render(t,a,o,e,r),c.setFunc(d.EQUAL,1,4294967295)),u=a,a=o,o=u),m instanceof jt?r=!0:m instanceof zt&&(r=!1))}catch(e){s=!0,l=e}finally{try{i||null==g["return"]||g["return"]()}finally{if(s)throw l}}}},{key:"setSize",value:function(t,n){var a=this.renderer;if(void 0===t||void 0===n){var o=a.getSize(new e.Vector2);t=o.width,n=o.height}a.setSize(t,n);var r=a.getDrawingBufferSize(new e.Vector2);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);var i=!0,s=!1,l=void 0;try{for(var d=this.passes[Symbol.iterator](),c,u;!(i=(c=d.next()).done);i=!0)u=c.value,u.setSize(r.width,r.height)}catch(e){s=!0,l=e}finally{try{i||null==d["return"]||d["return"]()}finally{if(s)throw l}}}},{key:"reset",value:function(){var e=this.createBuffer(this.inputBuffer.depthBuffer,this.inputBuffer.stencilBuffer);this.dispose(),this.inputBuffer=e,this.outputBuffer=e.clone(),this.depthTexture=null,this.copyPass=new Zt(new St())}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var a=this.passes[Symbol.iterator](),o,r;!(e=(o=a.next()).done);e=!0)r=o.value,r.dispose()}catch(e){t=!0,n=e}finally{try{e||null==a["return"]||a["return"]()}finally{if(t)throw n}}this.passes=[],null!==this.inputBuffer&&(this.inputBuffer.dispose(),this.inputBuffer=null),null!==this.outputBuffer&&(this.outputBuffer.dispose(),this.outputBuffer=null),null!==this.depthTexture&&this.depthTexture.dispose(),this.copyPass.dispose()}}]),t}(),$t=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,o;return n(this,t),o=f(this,i(t).call(this)),o.currentLayer=a,void 0!==e&&o.set(e),o}return r(t,e),o(t,[{key:"clear",value:function(){var e=this.layer,n=!0,a=!1,o=void 0;try{for(var r=this[Symbol.iterator](),s,l;!(n=(s=r.next()).done);n=!0)l=s.value,l.layers.disable(e)}catch(e){a=!0,o=e}finally{try{n||null==r["return"]||r["return"]()}finally{if(a)throw o}}return h(i(t.prototype),"clear",this).call(this)}},{key:"set",value:function(e){this.clear();var t=!0,n=!1,a=void 0;try{for(var o=e[Symbol.iterator](),r,i;!(t=(r=o.next()).done);t=!0)i=r.value,this.add(i)}catch(e){n=!0,a=e}finally{try{t||null==o["return"]||o["return"]()}finally{if(n)throw a}}return this}},{key:"indexOf",value:function(e){return this.has(e)?0:-1}},{key:"add",value:function(e){return e.layers.enable(this.layer),h(i(t.prototype),"add",this).call(this,e),this}},{key:"delete",value:function(e){return this.has(e)&&e.layers.disable(this.layer),h(i(t.prototype),"delete",this).call(this,e)}},{key:"setVisible",value:function(e){var t=!0,n=!1,a=void 0;try{for(var o=this[Symbol.iterator](),r,i;!(t=(r=o.next()).done);t=!0)i=r.value,e?i.layers.enable(0):i.layers.disable(0)}catch(e){n=!0,a=e}finally{try{t||null==o["return"]||o["return"]()}finally{if(n)throw a}}return this}},{key:"layer",get:function(){return this.currentLayer},set:function(e){this.clear(),this.currentLayer=e}}]),t}(g(Set)),en="uniform sampler2D texture;\n#ifdef ASPECT_CORRECTION\nvarying vec2 vUv2;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#ifdef ASPECT_CORRECTION\noutputColor=texture2D(texture,vUv2);\n#else\noutputColor=texture2D(texture,uv);\n#endif\n}",tn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.SCREEN:o,s=t.luminanceThreshold,l=void 0===s?.9:s,d=t.luminanceSmoothing,c=void 0===d?.025:d,u=t.resolutionScale,g=void 0===u?.5:u,p=t.width,m=void 0===p?Ot.AUTO_SIZE:p,v=t.height,A=void 0===v?Ot.AUTO_SIZE:v,h=t.kernelSize,y=void 0===h?Et.LARGE:h,x;return n(this,a),x=f(this,i(a).call(this,"BloomEffect",en,{blendFunction:r,uniforms:new Map([["texture",new e.Uniform(null)]])})),x.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),x.renderTarget.texture.name="Bloom.Target",x.renderTarget.texture.generateMipmaps=!1,x.uniforms.get("texture").value=x.renderTarget.texture,x.blurPass=new Ot({resolutionScale:g,width:m,height:A,kernelSize:y}),x.luminancePass=new Zt(new Pt(!0)),x.luminanceMaterial.threshold=l,x.luminanceMaterial.smoothing=c,x}return r(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){var t=this.blurPass;t.setResolutionScale(e),this.renderTarget.setSize(t.width,t.height)}},{key:"update",value:function(e,t){var n=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,n),this.blurPass.render(e,n,n)):this.blurPass.render(e,t,n)}},{key:"setSize",value:function(e,t){var n=this.blurPass;n.setSize(e,t),this.renderTarget.setSize(n.width,n.height)}},{key:"initialize",value:function(t,n){this.blurPass.initialize(t,n),n||(this.renderTarget.texture.format=e.RGBFormat)}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"luminanceMaterial",get:function(){return this.luminancePass.getFullscreenMaterial()}},{key:"width",get:function(){return this.blurPass.width},set:function(e){var t=this.blurPass;t.width=e,this.renderTarget.setSize(t.width,t.height)}},{key:"height",get:function(){return this.blurPass.height},set:function(e){var t=this.blurPass;t.height=e,this.renderTarget.setSize(t.width,t.height)}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead."),1},set:function(){console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.")}}]),a}(Yt),nn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.focus,l=void 0===s?.5:s,d=t.dof,c=void 0===d?.02:d,u=t.aperture,g=void 0===u?.015:u,p=t.maxBlur,m=void 0===p?1:p;return n(this,a),f(this,i(a).call(this,"BokehEffect","uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);float focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(depth,focusNear);float high=step(focusFar,depth);float factor=(depth-focusNear)*low+(depth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}",{blendFunction:r,attributes:Xt.CONVOLUTION|Xt.DEPTH,uniforms:new Map([["focus",new e.Uniform(l)],["dof",new e.Uniform(c)],["aperture",new e.Uniform(g)],["maxBlur",new e.Uniform(m)]])}))}return r(a,t),a}(Yt),an=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.brightness,l=void 0===s?0:s,d=t.contrast,c=void 0===d?0:d;return n(this,a),f(this,i(a).call(this,"BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:r,uniforms:new Map([["brightness",new e.Uniform(l)],["contrast",new e.Uniform(c)]])}))}return r(a,t),a}(Yt),on=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ht.NORMAL;return n(this,t),f(this,i(t).call(this,"ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}",{blendFunction:e}))}return r(t,e),t}(Yt),rn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.bits,l=void 0===s?16:s,d;return n(this,a),d=f(this,i(a).call(this,"ColorDepthEffect","uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",{blendFunction:r,uniforms:new Map([["factor",new e.Uniform(1)]])})),d.bits=0,d.setBitDepth(l),d}return r(a,t),o(a,[{key:"getBitDepth",value:function(){return this.bits}},{key:"setBitDepth",value:function(e){this.bits=e,this.uniforms.get("factor").value=ye(2,e/3)}}]),a}(Yt),sn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.offset,l=void 0===s?new e.Vector2(.001,5e-4):s;return n(this,a),f(this,i(a).call(this,"ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;color.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;outputColor=color;}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}",blendFunction:r,attributes:Xt.CONVOLUTION,uniforms:new Map([["offset",new e.Uniform(l)]])}))}return r(a,t),o(a,[{key:"offset",get:function(){return this.uniforms.get("offset").value},set:function(e){this.uniforms.get("offset").value=e}}]),a}(Yt),ln=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.blendFunction,o=void 0===a?Ht.NORMAL:a,r=e.inverted,s;return n(this,t),s=f(this,i(t).call(this,"DepthEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef INVERTED\nvec3 color=vec3(1.0-depth);\n#else\nvec3 color=vec3(depth);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:o,attributes:Xt.DEPTH})),s.inverted=void 0!==r&&r,s}return r(t,e),o(t,[{key:"inverted",get:function(){return this.defines.has("INVERTED")},set:function(e){e?this.defines.set("INVERTED","1"):this.defines["delete"]("INVERTED")}}]),t}(Yt),dn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.angle,l=void 0===s?.5*pe:s,d=t.scale,c=void 0===d?1:d,u;return n(this,a),u=f(this,i(a).call(this,"DotScreenEffect","uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",{blendFunction:r,uniforms:new Map([["angle",new e.Uniform(new e.Vector2())],["scale",new e.Uniform(c)]])})),u.setAngle(l),u}return r(a,t),o(a,[{key:"setAngle",value:function(e){this.uniforms.get("angle").value.set(ge(e),ue(e))}}]),a}(Yt),cn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.gamma,l=void 0===s?2:s;return n(this,a),f(this,i(a).call(this,"GammaCorrectionEffect","uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}",{blendFunction:r,uniforms:new Map([["gamma",new e.Uniform(l)]])}))}return r(a,t),a}(Yt),un="Glitch.Generated",gn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.chromaticAberrationOffset,l=void 0===s?null:s,d=t.delay,c=void 0===d?new e.Vector2(1.5,3.5):d,u=t.duration,g=void 0===u?new e.Vector2(.6,1):u,p=t.strength,m=void 0===p?new e.Vector2(.3,1):p,v=t.columns,A=void 0===v?.05:v,h=t.ratio,y=void 0===h?.85:h,x=t.perturbationMap,C=void 0===x?null:x,b=t.dtSize,E=void 0===b?64:b,S;return n(this,a),S=f(this,i(a).call(this,"GlitchEffect","uniform sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seed;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){vec4 normal=texture2D(perturbationMap,uv*random*random);if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seed.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seed.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}uv.x+=normal.x*seed.x*(random*0.2);uv.y+=normal.y*seed.y*(random*0.2);}}",{blendFunction:r,uniforms:new Map([["perturbationMap",new e.Uniform(null)],["columns",new e.Uniform(A)],["active",new e.Uniform(!1)],["random",new e.Uniform(.02)],["seed",new e.Uniform(new e.Vector2())],["distortion",new e.Uniform(new e.Vector2())]])})),S.perturbationMap=null,S.setPerturbationMap(null===C?S.generatePerturbationMap(E):C),S.perturbationMap.generateMipmaps=!1,S.delay=c,S.duration=g,S.breakPoint=new e.Vector2(ee(S.delay.x,S.delay.y),ee(S.duration.x,S.duration.y)),S.time=0,S.seed=S.uniforms.get("seed").value,S.distortion=S.uniforms.get("distortion").value,S.mode=pn.SPORADIC,S.strength=m,S.ratio=y,S.chromaticAberrationOffset=l,S}return r(a,t),o(a,[{key:"getPerturbationMap",value:function(){return this.perturbationMap}},{key:"setPerturbationMap",value:function(t){null!==this.perturbationMap&&this.perturbationMap.name===un&&this.perturbationMap.dispose(),t.wrapS=t.wrapT=e.RepeatWrapping,t.magFilter=t.minFilter=e.NearestFilter,this.perturbationMap=t,this.uniforms.get("perturbationMap").value=t}},{key:"generatePerturbationMap",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:64,n=t*t,a=new Float32Array(3*n),o,r;for(o=0;o<n;++o)r=Math.random(),a[3*o]=r,a[3*o+1]=r,a[3*o+2]=r;var s=new e.DataTexture(a,t,t,e.RGBFormat,e.FloatType);return s.name=un,s.needsUpdate=!0,s}},{key:"update",value:function(e,t,n){var o=this.mode,i=this.breakPoint,l=this.chromaticAberrationOffset,d=this.strength,s=this.time,c=!1,u=0,g=0,p;o!==pn.DISABLED&&(o===pn.SPORADIC&&(s+=n,p=s>i.x,s>=i.x+i.y&&(i.set(ee(this.delay.x,this.delay.y),ee(this.duration.x,this.duration.y)),s=0)),u=Math.random(),this.uniforms.get("random").value=u,p&&u>this.ratio||o===pn.CONSTANT_WILD?(c=!0,u*=.03*d.y,g=ee(-pe,Math.PI),this.seed.set(ee(-d.y,d.y),ee(-d.y,d.y)),this.distortion.set(ee(0,1),ee(0,1))):(p||o===pn.CONSTANT_MILD)&&(c=!0,u*=.03*d.x,g=ee(-pe,Math.PI),this.seed.set(ee(-d.x,d.x),ee(-d.x,d.x)),this.distortion.set(ee(0,1),ee(0,1))),this.time=s),null!==l&&(c?l.set(ue(g),ge(g)).multiplyScalar(u):l.set(0,0)),this.uniforms.get("active").value=c}},{key:"active",get:function(){return this.uniforms.get("active").value}}]),a}(Yt),pn={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},mn=new e.Vector3,v=new e.Matrix4,m=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=r.blendFunction,l=void 0===s?Ht.SCREEN:s,d=r.samples,c=void 0===d?60:d,u=r.density,g=void 0===u?.96:u,p=r.decay,m=void 0===p?.9:p,v=r.weight,A=void 0===v?.4:v,h=r.exposure,y=void 0===h?.6:h,x=r.clampMax,C=void 0===x?1:x,b=r.resolutionScale,E=void 0===b?.5:b,S=r.width,T=void 0===S?Ot.AUTO_SIZE:S,M=r.height,k=void 0===M?Ot.AUTO_SIZE:M,D=r.kernelSize,B=void 0===D?Et.SMALL:D,P=r.blur,w;return n(this,a),w=f(this,i(a).call(this,"GodRaysEffect",en,{blendFunction:l,attributes:Xt.DEPTH,uniforms:new Map([["texture",new e.Uniform(null)]])})),w.camera=t,w.lightSource=o,w.lightSource.material.depthWrite=!1,w.lightSource.material.transparent=!0,w.lightScene=new e.Scene,w.screenPosition=new e.Vector2,w.renderTargetX=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),w.renderTargetX.texture.name="GodRays.TargetX",w.renderTargetY=w.renderTargetX.clone(),w.renderTargetY.texture.name="GodRays.TargetY",w.uniforms.get("texture").value=w.renderTargetY.texture,w.renderTargetLight=w.renderTargetX.clone(),w.renderTargetLight.texture.name="GodRays.Light",w.renderTargetLight.depthBuffer=!0,w.renderTargetLight.depthTexture=new e.DepthTexture,w.renderPassLight=new Ut(w.lightScene,t),w.renderPassLight.getClearPass().overrideClearColor=new e.Color(0),w.clearPass=new Gt(!0,!1,!1),w.blurPass=new Ot({resolutionScale:E,width:T,height:k,kernelSize:B}),w.depthMaskPass=new Zt(new Mt()),w.godRaysPass=new Zt(function(){var e=new Bt(w.screenPosition);return e.uniforms.density.value=g,e.uniforms.decay.value=m,e.uniforms.weight.value=A,e.uniforms.exposure.value=y,e.uniforms.clampMax.value=C,e}()),w.samples=c,w.blur=void 0===P||P,w}return r(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){var t=this.blurPass.getOriginalSize();this.blurPass.setResolutionScale(e),this.setSize(t.x,t.y)}},{key:"setDepthTexture",value:function(e){var t=this.depthMaskPass.getFullscreenMaterial();t.uniforms.depthBuffer0.value=e,t.uniforms.depthBuffer1.value=this.renderTargetLight.depthTexture}},{key:"update",value:function(e){var t=this.lightSource,n=t.parent,a=t.matrixAutoUpdate,o=this.renderTargetX,r=this.renderTargetLight;a||v.copy(t.matrix),t.material.depthWrite=!0,t.matrixAutoUpdate=!1,t.updateWorldMatrix(!0,!1),t.matrix.copy(t.matrixWorld),this.lightScene.add(t),this.renderPassLight.render(e,r),this.clearPass.render(e,o),this.depthMaskPass.render(e,r,o),t.material.depthWrite=!1,t.matrixAutoUpdate=a,a||t.matrix.copy(v),null!==n&&n.add(t),mn.setFromMatrixPosition(t.matrixWorld).project(this.camera),this.screenPosition.set(ve(0,Ae(1,.5*(mn.x+1))),ve(0,Ae(1,.5*(mn.y+1)))),this.blur&&this.blurPass.render(e,o,o),this.godRaysPass.render(e,o,this.renderTargetY)}},{key:"setSize",value:function(e,t){this.blurPass.setSize(e,t),this.renderPassLight.setSize(e,t),this.depthMaskPass.setSize(e,t),this.godRaysPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t),this.renderTargetLight.setSize(e,t)}},{key:"initialize",value:function(t,n){this.blurPass.initialize(t,n),this.renderPassLight.initialize(t,n),this.depthMaskPass.initialize(t,n),this.godRaysPass.initialize(t,n),n||(this.renderTargetX.texture.format=e.RGBFormat,this.renderTargetY.texture.format=e.RGBFormat,this.renderTargetLight.texture.format=e.RGBFormat)}},{key:"texture",get:function(){return this.renderTargetY.texture}},{key:"godRaysMaterial",get:function(){return this.godRaysPass.getFullscreenMaterial()}},{key:"width",get:function(){return this.blurPass.width},set:function(e){var t=this.blurPass;t.width=e,this.renderTargetX.setSize(t.width,t.height),this.renderTargetY.setSize(t.width,t.height),this.renderTargetLight.setSize(t.width,t.height)}},{key:"height",get:function(){return this.blurPass.height},set:function(e){var t=this.blurPass;t.height=e,this.renderTargetX.setSize(t.width,t.height),this.renderTargetY.setSize(t.width,t.height),this.renderTargetLight.setSize(t.width,t.height)}},{key:"dithering",get:function(){return this.godRaysMaterial.dithering},set:function(e){var t=this.godRaysMaterial;t.dithering=e,t.needsUpdate=!0}},{key:"blur",get:function(){return this.blurPass.enabled},set:function(e){this.blurPass.enabled=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"samples",get:function(){return this.godRaysMaterial.samples},set:function(e){this.godRaysMaterial.samples=e}}]),a}(Yt),de=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.OVERLAY:o,s=t.scale,l=void 0===s?1:s,d=t.lineWidth,c=void 0===d?0:d,u;return n(this,a),u=f(this,i(a).call(this,"GridEffect","uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",{blendFunction:r,uniforms:new Map([["scale",new e.Uniform(new e.Vector2())],["lineWidth",new e.Uniform(c)]])})),u.resolution=new e.Vector2,u.scale=ve(l,1e-6),u.lineWidth=ve(c,0),u}return r(a,t),o(a,[{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"getLineWidth",value:function(){return this.lineWidth}},{key:"setLineWidth",value:function(e){this.lineWidth=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t);var n=this.scale*(.125*t);this.uniforms.get("scale").value.set(e/t*n,n),this.uniforms.get("lineWidth").value=n/t+this.lineWidth}}]),a}(Yt),ce=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.hue,l=void 0===s?0:s,d=t.saturation,c=void 0===d?0:d,u;return n(this,a),u=f(this,i(a).call(this,"HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:r,uniforms:new Map([["hue",new e.Uniform(new e.Vector3())],["saturation",new e.Uniform(c)]])})),u.setHue(l),u}return r(a,t),o(a,[{key:"setHue",value:function(e){var t=ge(e),n=ue(e);this.uniforms.get("hue").value.set(2*n,-le(3)*t-n,le(3)*t-n).addScalar(1).divideScalar(3)}}]),a}(Yt),fn=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.blendFunction,o=void 0===a?Ht.SCREEN:a,r=e.premultiply,s;return n(this,t),s=f(this,i(t).call(this,"NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(inputColor.rgb*noise,inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:o})),s.premultiply=void 0!==r&&r,s}return r(t,e),o(t,[{key:"premultiply",get:function(){return this.defines.has("PREMULTIPLY")},set:function(e){e?this.defines.set("PREMULTIPLY","1"):this.defines["delete"]("PREMULTIPLY")}}]),t}(Yt),vn=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=r.blendFunction,l=void 0===s?Ht.SCREEN:s,d=r.patternTexture,c=void 0===d?null:d,u=r.edgeStrength,g=void 0===u?1:u,p=r.pulseSpeed,m=void 0===p?0:p,v=r.visibleEdgeColor,A=void 0===v?16777215:v,h=r.hiddenEdgeColor,y=void 0===h?2230538:h,x=r.resolutionScale,C=void 0===x?.5:x,b=r.width,E=void 0===b?Ot.AUTO_SIZE:b,S=r.height,T=void 0===S?Ot.AUTO_SIZE:S,M=r.kernelSize,k=void 0===M?Et.VERY_SMALL:M,D=r.blur,B=r.xRay,P;n(this,a),P=f(this,i(a).call(this,"OutlineEffect","uniform sampler2D edgeTexture;uniform sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)? 1.0 : hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",{uniforms:new Map([["maskTexture",new e.Uniform(null)],["edgeTexture",new e.Uniform(null)],["edgeStrength",new e.Uniform(g)],["visibleEdgeColor",new e.Uniform(new e.Color(A))],["hiddenEdgeColor",new e.Uniform(new e.Color(y))],["pulse",new e.Uniform(1)]])})),P.blendMode=function(e){return new Proxy(P.blendMode,{set:function(t,n,a){return a===Ht.ALPHA?e.set("ALPHA","1"):e["delete"]("ALPHA"),t[n]=a,!0}})}(P.defines),P.blendMode.blendFunction=l,P.setPatternTexture(c),P.xRay=void 0===B||B,P.scene=t,P.camera=o,P.renderTargetMask=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,format:e.RGBFormat}),P.renderTargetMask.texture.name="Outline.Mask",P.uniforms.get("maskTexture").value=P.renderTargetMask.texture,P.renderTargetEdges=P.renderTargetMask.clone(),P.renderTargetEdges.texture.name="Outline.Edges",P.renderTargetEdges.depthBuffer=!1,P.renderTargetBlurredEdges=P.renderTargetEdges.clone(),P.renderTargetBlurredEdges.texture.name="Outline.BlurredEdges",P.clearPass=new Gt,P.clearPass.overrideClearColor=new e.Color(0),P.clearPass.overrideClearAlpha=1,P.depthPass=new Nt(t,o),P.maskPass=new Ut(t,o,new Tt(P.depthPass.renderTarget.texture,o));var w=P.maskPass.getClearPass();return w.overrideClearColor=new e.Color(16777215),w.overrideClearAlpha=1,P.blurPass=new Ot({resolutionScale:C,width:E,height:T,kernelSize:k}),P.blur=void 0!==D&&D,P.outlineEdgesPass=new Zt(new wt()),P.outlineEdgesPass.getFullscreenMaterial().uniforms.maskTexture.value=P.renderTargetMask.texture,P.time=0,P.selection=new $t,P.pulseSpeed=m,P}return r(a,t),o(a,[{key:"setPatternTexture",value:function(t){null===t?(this.defines["delete"]("USE_PATTERN"),this.uniforms["delete"]("patternScale"),this.uniforms["delete"]("patternTexture"),this.vertexShader=null):(t.wrapS=t.wrapT=e.RepeatWrapping,this.defines.set("USE_PATTERN","1"),this.uniforms.set("patternScale",new e.Uniform(1)),this.uniforms.set("patternTexture",new e.Uniform(t)),this.vertexShader="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}")}},{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){var t=this.blurPass.getOriginalSize();this.blurPass.setResolutionScale(e),this.depthPass.setResolutionScale(e),this.setSize(t.x,t.y)}},{key:"setSelection",value:function(e){return this.selection.set(e),this}},{key:"clearSelection",value:function(){return this.selection.clear(),this}},{key:"selectObject",value:function(e){return this.selection.add(e),this}},{key:"deselectObject",value:function(e){return this.selection["delete"](e),this}},{key:"update",value:function(e,t,n){var a=this.scene,o=this.camera,r=this.selection,i=this.uniforms.get("pulse"),s=a.background,l=o.layers.mask;0<r.size?(a.background=null,i.value=1,0<this.pulseSpeed&&(i.value=.625+.375*ue(10*(this.time*this.pulseSpeed))),this.time+=n,r.setVisible(!1),this.depthPass.render(e),r.setVisible(!0),o.layers.set(r.layer),this.maskPass.render(e,this.renderTargetMask),o.layers.mask=l,a.background=s,this.outlineEdgesPass.render(e,null,this.renderTargetEdges),this.blur&&this.blurPass.render(e,this.renderTargetEdges,this.renderTargetBlurredEdges)):0<this.time&&(this.clearPass.render(e,this.renderTargetMask),this.time=0)}},{key:"setSize",value:function(e,t){this.renderTargetMask.setSize(e,t),this.depthPass.setSize(e,t),this.blurPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTargetEdges.setSize(e,t),this.renderTargetBlurredEdges.setSize(e,t),this.outlineEdgesPass.getFullscreenMaterial().setTexelSize(1/e,1/t)}},{key:"initialize",value:function(e,t){this.blurPass.initialize(e,t),this.depthPass.initialize(e,t),this.maskPass.initialize(e,t)}},{key:"width",get:function(){return this.blurPass.width},set:function(e){var t=this.blurPass;t.width=e,this.renderTargetEdges.setSize(t.width,t.height),this.renderTargetBlurredEdges.setSize(t.width,t.height),this.outlineEdgesPass.getFullscreenMaterial().setTexelSize(1/t.width,1/t.height)}},{key:"height",get:function(){return this.blurPass.height},set:function(e){var t=this.blurPass;t.height=e,this.renderTargetEdges.setSize(t.width,t.height),this.renderTargetBlurredEdges.setSize(t.width,t.height),this.outlineEdgesPass.getFullscreenMaterial().setTexelSize(1/t.width,1/t.height)}},{key:"selectionLayer",get:function(){return this.selection.layer},set:function(e){this.selection.layer=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"blur",get:function(){return this.blurPass.enabled},set:function(e){this.blurPass.enabled=e,this.uniforms.get("edgeTexture").value=e?this.renderTargetBlurredEdges.texture:this.renderTargetEdges.texture}},{key:"xRay",get:function(){return this.defines.has("X_RAY")},set:function(e){e?this.defines.set("X_RAY","1"):this.defines["delete"]("X_RAY")}}]),a}(Yt),An=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30,o;return n(this,a),o=f(this,i(a).call(this,"PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new e.Uniform(!1)],["d",new e.Uniform(new e.Vector2())]])})),o.resolution=new e.Vector2,o.granularity=t,o}return r(a,t),o(a,[{key:"getGranularity",value:function(){return this.granularity}},{key:"setGranularity",value:function(e){e=he(e),0<e%2&&(e+=1);var t=this.uniforms;t.get("active").value=0<e,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}}]),a}(Yt),hn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.focus,l=void 0===s?1:s,d=t.focalLength,c=void 0===d?24:d,u=t.luminanceThreshold,g=void 0===u?.5:u,p=t.luminanceGain,m=void 0===p?2:p,v=t.bias,A=void 0===v?.5:v,h=t.fringe,y=void 0===h?.7:h,x=t.maxBlur,C=void 0===x?1:x,b=t.rings,E=void 0===b?3:b,S=t.samples,T=void 0===S?2:S,M=t.showFocus,k=t.manualDoF,D=t.pentagon,B;return n(this,a),B=f(this,i(a).call(this,"RealisticBokehEffect","uniform float focus;uniform float focalLength;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\n#ifdef MANUAL_DOF\nuniform vec4 dof;\n#endif\n#ifdef PENTAGON\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\n#endif\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\n#ifdef PENTAGON\nfloat p=pentagon(wh);\n#else\nfloat p=1.0;\n#endif\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float linearDepth=(-cameraFar*cameraNear/(depth*(cameraFar-cameraNear)-cameraFar));\n#ifdef MANUAL_DOF\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)? farDoF : nearDoF;\n#else\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*focus*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\n#endif\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\n#ifdef SHOW_FOCUS\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:r,attributes:Xt.CONVOLUTION|Xt.DEPTH,uniforms:new Map([["focus",new e.Uniform(l)],["focalLength",new e.Uniform(c)],["luminanceThreshold",new e.Uniform(g)],["luminanceGain",new e.Uniform(m)],["bias",new e.Uniform(A)],["fringe",new e.Uniform(y)],["maxBlur",new e.Uniform(C)]])})),B.rings=E,B.samples=T,B.showFocus=void 0!==M&&M,B.manualDoF=void 0!==k&&k,B.pentagon=void 0!==D&&D,B}return r(a,t),o(a,[{key:"rings",get:function(){return me(this.defines.get("RINGS_INT"))},set:function(e){e=he(e),this.defines.set("RINGS_INT",e.toFixed(0)),this.defines.set("RINGS_FLOAT",e.toFixed(1))}},{key:"samples",get:function(){return me(this.defines.get("SAMPLES_INT"))},set:function(e){e=he(e),this.defines.set("SAMPLES_INT",e.toFixed(0)),this.defines.set("SAMPLES_FLOAT",e.toFixed(1))}},{key:"showFocus",get:function(){return this.defines.has("SHOW_FOCUS")},set:function(e){e?this.defines.set("SHOW_FOCUS","1"):this.defines["delete"]("SHOW_FOCUS")}},{key:"manualDoF",get:function(){return this.defines.has("MANUAL_DOF")},set:function(t){t?(this.defines.set("MANUAL_DOF","1"),this.uniforms.set("dof",new e.Uniform(new e.Vector4(.2,1,.2,2)))):(this.defines["delete"]("MANUAL_DOF"),this.uniforms["delete"]("dof"))}},{key:"pentagon",get:function(){return this.defines.has("PENTAGON")},set:function(e){e?this.defines.set("PENTAGON","1"):this.defines["delete"]("PENTAGON")}}]),a}(Yt),yn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.OVERLAY:o,s=t.density,l=void 0===s?1.25:s,d;return n(this,a),d=f(this,i(a).call(this,"ScanlineEffect","uniform float count;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 sl=vec2(sin(uv.y*count),cos(uv.y*count));vec3 scanlines=vec3(sl.x,sl.y,sl.x);outputColor=vec4(scanlines,inputColor.a);}",{blendFunction:r,uniforms:new Map([["count",new e.Uniform(0)]])})),d.resolution=new e.Vector2,d.density=l,d}return r(a,t),o(a,[{key:"getDensity",value:function(){return this.density}},{key:"setDensity",value:function(e){this.density=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.uniforms.get("count").value=xe(t*this.density)}}]),a}(Yt),xn=new e.Vector3,Cn=new e.Vector3,bn=function(t){function a(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Vector3,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=r.speed,l=void 0===s?2:s,d=r.maxRadius,c=void 0===d?1:d,u=r.waveSize,g=void 0===u?.2:u,p=r.amplitude,m=void 0===p?.05:p,v;return n(this,a),v=f(this,i(a).call(this,"ShockWaveEffect","uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",{vertexShader:"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",uniforms:new Map([["active",new e.Uniform(!1)],["center",new e.Uniform(new e.Vector2(.5,.5))],["cameraDistance",new e.Uniform(1)],["size",new e.Uniform(1)],["radius",new e.Uniform(-g)],["maxRadius",new e.Uniform(c)],["waveSize",new e.Uniform(g)],["amplitude",new e.Uniform(m)]])})),v.camera=t,v.epicenter=o,v.screenPosition=v.uniforms.get("center").value,v.speed=l,v.time=0,v.active=!1,v}return r(a,t),o(a,[{key:"explode",value:function(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}},{key:"update",value:function(e,t,n){var a=this.epicenter,o=this.camera,r=this.uniforms,i;if(this.active){var s=r.get("waveSize").value;o.getWorldDirection(xn),Cn.copy(o.position).sub(a),xn.angleTo(Cn)>.5*pe&&(r.get("cameraDistance").value=o.position.distanceTo(a),xn.copy(a).project(o),this.screenPosition.set(.5*(xn.x+1),.5*(xn.y+1))),this.time+=n*this.speed,i=this.time-s,r.get("radius").value=i,i>=2*(r.get("maxRadius").value+s)&&(this.active=!1,r.get("active").value=!1)}}}]),a}(Yt),En=function(t){function a(t,o,r){var s;return n(this,a),s=f(this,i(a).call(this,r)),s.scene=t,s.camera=o,s.clearPass=new Gt(!0,!0,!1),s.clearPass.overrideClearColor=new e.Color(0),s.renderPass=new Ut(t,o),s.renderPass.clear=!1,s.blackoutPass=new Ut(t,o,new e.MeshBasicMaterial({color:0})),s.blackoutPass.clear=!1,s.backgroundPass=function(){var n=new e.Scene,a=new Ut(n,o);return n.background=t.background,a.clear=!1,a}(),s.renderTargetSelection=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!0}),s.renderTargetSelection.texture.name="Bloom.Selection",s.renderTargetSelection.texture.generateMipmaps=!1,s.selection=new $t,s.inverted=!1,s}return r(a,t),o(a,[{key:"update",value:function(e,t,n){var o=this.scene,r=this.camera,s=this.selection,l=this.renderTargetSelection,d=o.background,c=r.layers.mask;this.clearPass.render(e,l),this.ignoreBackground||this.backgroundPass.render(e,l),o.background=null,this.inverted?(r.layers.set(s.layer),this.blackoutPass.render(e,l),r.layers.mask=c,s.setVisible(!1),this.renderPass.render(e,l),s.setVisible(!0)):(s.setVisible(!1),this.blackoutPass.render(e,l),s.setVisible(!0),r.layers.set(s.layer),this.renderPass.render(e,l),r.layers.mask=c),o.background=d,h(i(a.prototype),"update",this).call(this,e,l,n)}},{key:"setSize",value:function(e,t){var n=this.blurPass;h(i(a.prototype),"setSize",this).call(this,e,t),this.backgroundPass.setSize(e,t),this.blackoutPass.setSize(e,t),this.renderPass.setSize(e,t),this.renderTargetSelection.setSize(n.width,n.height)}},{key:"initialize",value:function(t,n){h(i(a.prototype),"initialize",this).call(this,t,n),this.backgroundPass.initialize(t,n),this.blackoutPass.initialize(t,n),this.renderPass.initialize(t,n),n||(this.renderTargetSelection.texture.format=e.RGBFormat)}},{key:"ignoreBackground",get:function(){return!this.backgroundPass.enabled},set:function(e){this.backgroundPass.enabled=!e}}]),a}(tn),Sn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.intensity,l=void 0===s?1:s;return n(this,a),f(this,i(a).call(this,"SepiaEffect","uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0-0.607*intensity,0.769*intensity,0.189*intensity)),dot(inputColor.rgb,vec3(0.349*intensity,1.0-0.314*intensity,0.168*intensity)),dot(inputColor.rgb,vec3(0.272*intensity,0.534*intensity,1.0-0.869*intensity)));outputColor=vec4(color,inputColor.a);}",{blendFunction:r,uniforms:new Map([["intensity",new e.Uniform(l)]])}))}return r(a,t),a}(Yt),Tn=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Mn.HIGH,s;return n(this,a),s=f(this,i(a).call(this,"SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:Ht.NORMAL,attributes:Xt.CONVOLUTION,uniforms:new Map([["weightMap",new e.Uniform(null)]])})),s.renderTargetColorEdges=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:e.RGBFormat}),s.renderTargetColorEdges.texture.name="SMAA.ColorEdges",s.renderTargetWeights=s.renderTargetColorEdges.clone(),s.renderTargetWeights.texture.name="SMAA.Weights",s.renderTargetWeights.texture.format=e.RGBAFormat,s.uniforms.get("weightMap").value=s.renderTargetWeights.texture,s.clearPass=new Gt(!0,!1,!1),s.clearPass.overrideClearColor=new e.Color(0),s.clearPass.overrideClearAlpha=1,s.colorEdgesPass=new Zt(new xt()),s.weightsPass=new Zt(new Lt()),s.weightsPass.getFullscreenMaterial().uniforms.searchTexture.value=function(){var n=new e.Texture(t);return n.name="SMAA.Search",n.magFilter=e.NearestFilter,n.minFilter=e.NearestFilter,n.format=e.RGBAFormat,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!0,n}(),s.weightsPass.getFullscreenMaterial().uniforms.areaTexture.value=function(){var t=new e.Texture(o);return t.name="SMAA.Area",t.minFilter=e.LinearFilter,t.format=e.RGBAFormat,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!1,t}(),s.applyPreset(r),s}return r(a,t),o(a,[{key:"setEdgeDetectionThreshold",value:function(e){this.colorEdgesPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}},{key:"setOrthogonalSearchSteps",value:function(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}},{key:"applyPreset",value:function(e){var t=this.colorEdgesMaterial,n=this.weightsMaterial;e===Mn.LOW?(t.setEdgeDetectionThreshold(.15),n.setOrthogonalSearchSteps(4),n.diagonalDetection=!1,n.cornerRounding=!1):e===Mn.MEDIUM?(t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(8),n.diagonalDetection=!1,n.cornerRounding=!1):e===Mn.HIGH?(t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(16),n.setDiagonalSearchSteps(8),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0):e===Mn.ULTRA?(t.setEdgeDetectionThreshold(.05),n.setOrthogonalSearchSteps(32),n.setDiagonalSearchSteps(16),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0):void 0}},{key:"update",value:function(e,t){this.clearPass.render(e,this.renderTargetColorEdges),this.colorEdgesPass.render(e,t,this.renderTargetColorEdges),this.weightsPass.render(e,this.renderTargetColorEdges,this.renderTargetWeights)}},{key:"setSize",value:function(e,t){var n=this.colorEdgesPass.getFullscreenMaterial(),a=this.weightsPass.getFullscreenMaterial();this.renderTargetColorEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),a.uniforms.resolution.value.set(e,t),a.uniforms.texelSize.value.set(1/e,1/t),n.uniforms.texelSize.value.copy(a.uniforms.texelSize.value)}},{key:"colorEdgesMaterial",get:function(){return this.colorEdgesPass.getFullscreenMaterial()}},{key:"weightsMaterial",get:function(){return this.weightsPass.getFullscreenMaterial()}}],[{key:"searchImageDataURL",get:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"}},{key:"areaImageDataURL",get:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC"}}]),a}(Yt),Mn={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},kn=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=r.blendFunction,l=void 0===s?Ht.MULTIPLY:s,d=r.samples,c=void 0===d?11:d,u=r.rings,g=void 0===u?4:u,p=r.distanceThreshold,m=void 0===p?.65:p,v=r.distanceFalloff,A=void 0===v?.1:v,h=r.rangeThreshold,y=void 0===h?.0015:h,x=r.rangeFalloff,C=void 0===x?.01:x,b=r.luminanceInfluence,E=void 0===b?.7:b,S=r.radius,T=void 0===S?18.25:S,M=r.scale,k=void 0===M?1:M,D=r.bias,B=void 0===D?.5:D,P;return n(this,a),P=f(this,i(a).call(this,"SSAOEffect","uniform sampler2D normalBuffer;uniform mat4 cameraProjectionMatrix;uniform mat4 cameraInverseProjectionMatrix;uniform vec2 radiusStep;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;uniform float seed;uniform float luminanceInfluence;uniform float scale;uniform float bias;float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){float clipW=cameraProjectionMatrix[2][3]*viewZ+cameraProjectionMatrix[3][3];vec4 clipPosition=vec4((vec3(screenPosition,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(cameraInverseProjectionMatrix*clipPosition).xyz;}float getOcclusion(const in vec3 p,const in vec3 n,const in vec3 sampleViewPosition){vec3 viewDelta=sampleViewPosition-p;float d=length(viewDelta)*scale;return max(0.0,dot(n,viewDelta)/d-bias)/(1.0+pow2(d));}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){vec2 radius=radiusStep;float angle=rand(uv+seed)*PI2;float occlusionSum=0.0;for(int i=0;i<SAMPLES_INT;++i){vec2 coord=uv+vec2(cos(angle),sin(angle))*radius;radius+=radiusStep;angle+=ANGLE_STEP;float sampleDepth=readDepth(coord);float proximity=abs(depth-sampleDepth);if(sampleDepth<distanceCutoff.y&&proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 sampleViewPosition=getViewPosition(coord,sampleDepth,getViewZ(sampleDepth));occlusionSum+=getOcclusion(p,n,sampleViewPosition)*falloff;}}return occlusionSum/SAMPLES_FLOAT;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float ao=1.0;if(depth<distanceCutoff.y){vec3 viewPosition=getViewPosition(uv,depth,getViewZ(depth));vec3 viewNormal=unpackRGBToNormal(texture2D(normalBuffer,uv).xyz);ao-=getAmbientOcclusion(viewPosition,viewNormal,depth,uv);float l=linearToRelativeLuminance(inputColor.rgb);ao=mix(ao,1.0,max(l*luminanceInfluence,smoothstep(distanceCutoff.x,distanceCutoff.y,depth)));}outputColor=vec4(vec3(ao),inputColor.a);}",{blendFunction:l,attributes:Xt.DEPTH,defines:new Map([["RINGS_INT","0"],["SAMPLES_INT","0"],["SAMPLES_FLOAT","0.0"]]),uniforms:new Map([["normalBuffer",new e.Uniform(o)],["cameraInverseProjectionMatrix",new e.Uniform(new e.Matrix4())],["cameraProjectionMatrix",new e.Uniform(new e.Matrix4())],["radiusStep",new e.Uniform(new e.Vector2())],["distanceCutoff",new e.Uniform(new e.Vector2())],["proximityCutoff",new e.Uniform(new e.Vector2())],["seed",new e.Uniform(Math.random())],["luminanceInfluence",new e.Uniform(E)],["scale",new e.Uniform(k)],["bias",new e.Uniform(B)]])})),P.r=0,P.resolution=new e.Vector2(1,1),P.camera=t,P.samples=c,P.rings=g,P.radius=T,P.setDistanceCutoff(m,A),P.setProximityCutoff(y,C),P}return r(a,t),o(a,[{key:"updateAngleStep",value:function(){this.defines.set("ANGLE_STEP",(2*pe*this.rings/this.samples).toFixed(11))}},{key:"updateRadiusStep",value:function(){var e=this.r/this.samples;this.uniforms.get("radiusStep").value.set(e,e).divide(this.resolution)}},{key:"setDistanceCutoff",value:function(e,t){this.uniforms.get("distanceCutoff").value.set(e,Ae(e+t,1-1e-6))}},{key:"setProximityCutoff",value:function(e,t){this.uniforms.get("proximityCutoff").value.set(e,Ae(e+t,1-1e-6))}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.updateRadiusStep(),this.uniforms.get("cameraInverseProjectionMatrix").value.getInverse(this.camera.projectionMatrix),this.uniforms.get("cameraProjectionMatrix").value.copy(this.camera.projectionMatrix)}},{key:"samples",get:function(){return me(this.defines.get("SAMPLES_INT"))},set:function(e){e=he(e),this.defines.set("SAMPLES_INT",e.toFixed(0)),this.defines.set("SAMPLES_FLOAT",e.toFixed(1)),this.updateAngleStep(),this.updateRadiusStep()}},{key:"rings",get:function(){return me(this.defines.get("RINGS_INT"))},set:function(e){e=he(e),this.defines.set("RINGS_INT",e.toFixed(0)),this.updateAngleStep()}},{key:"radius",get:function(){return this.r},set:function(e){this.r=e,this.updateRadiusStep()}}]),a}(Yt),Dn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.texture,l=void 0===s?null:s,d=t.aspectCorrection,c;return n(this,a),c=f(this,i(a).call(this,"TextureEffect",en,{blendFunction:r,uniforms:new Map([["texture",new e.Uniform(l)]])})),c.aspectCorrection=void 0!==d&&d,c}return r(a,t),o(a,[{key:"aspectCorrection",get:function(){return this.defines.has("ASPECT_CORRECTION")},set:function(t){t?(this.defines.set("ASPECT_CORRECTION","1"),this.uniforms.set("scale",new e.Uniform(1)),this.vertexShader="uniform float scale;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=uv*vec2(aspect,1.0)*scale;}"):(this.defines["delete"]("ASPECT_CORRECTION"),this.uniforms["delete"]("scale"),this.vertexShader=null)}}]),a}(Yt),Bn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.blendFunction,r=void 0===o?Ht.NORMAL:o,s=t.adaptive,l=t.resolution,d=void 0===l?256:l,c=t.middleGrey,u=void 0===c?.6:c,g=t.maxLuminance,p=void 0===g?16:g,m=t.averageLuminance,v=void 0===m?1:m,A=t.adaptationRate,h=void 0===A?2:A,y;n(this,a),y=f(this,i(a).call(this,"ToneMappingEffect","uniform sampler2D luminanceMap;uniform float middleGrey;uniform float maxLuminance;uniform float averageLuminance;vec3 toneMap(vec3 c){\n#ifdef ADAPTED_LUMINANCE\nfloat lumAvg=texture2D(luminanceMap,vec2(0.5)).r;\n#else\nfloat lumAvg=averageLuminance;\n#endif\nfloat lumPixel=linearToRelativeLuminance(c);float lumScaled=(lumPixel*middleGrey)/lumAvg;float lumCompressed=(lumScaled*(1.0+(lumScaled/(maxLuminance*maxLuminance))))/(1.0+lumScaled);return lumCompressed*c;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(toneMap(inputColor.rgb),inputColor.a);}",{blendFunction:r,uniforms:new Map([["luminanceMap",new e.Uniform(null)],["middleGrey",new e.Uniform(u)],["maxLuminance",new e.Uniform(p)],["averageLuminance",new e.Uniform(v)]])})),y.renderTargetLuminance=new e.WebGLRenderTarget(1,1,{minFilter:void 0===e.LinearMipmapLinearFilter?e.LinearMipMapLinearFilter:e.LinearMipmapLinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:e.RGBFormat}),y.renderTargetLuminance.texture.name="ToneMapping.Luminance",y.renderTargetLuminance.texture.generateMipmaps=!0,y.renderTargetAdapted=y.renderTargetLuminance.clone(),y.renderTargetAdapted.texture.name="ToneMapping.AdaptedLuminance",y.renderTargetAdapted.texture.generateMipmaps=!1,y.renderTargetAdapted.texture.minFilter=e.LinearFilter,y.renderTargetPrevious=y.renderTargetAdapted.clone(),y.renderTargetPrevious.texture.name="ToneMapping.PreviousLuminance",y.savePass=new Jt(y.renderTargetPrevious,!1),y.luminancePass=new Zt(new Pt());var x=y.luminancePass.getFullscreenMaterial();return x.useThreshold=!1,y.adaptiveLuminancePass=new Zt(new yt()),y.adaptationRate=h,y.resolution=d,y.adaptive=void 0===s||s,y}return r(a,t),o(a,[{key:"update",value:function(e,t,n){if(this.adaptive){this.luminancePass.render(e,t,this.renderTargetLuminance);var a=this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;a.previousLuminanceBuffer.value=this.renderTargetPrevious.texture,a.currentLuminanceBuffer.value=this.renderTargetLuminance.texture,a.deltaTime.value=n,this.adaptiveLuminancePass.render(e,null,this.renderTargetAdapted),this.savePass.render(e,this.renderTargetAdapted)}}},{key:"setSize",value:function(e,t){this.savePass.setSize(e,t)}},{key:"initialize",value:function(t){var n=new Gt(!0,!1,!1);n.overrideClearColor=new e.Color(8388607),n.render(t,this.renderTargetPrevious),n.dispose()}},{key:"resolution",get:function(){return this.renderTargetLuminance.width},set:function(e){var t=Math.log2,n=ve(0,se(t(e)));e=ye(2,n),this.renderTargetLuminance.setSize(e,e),this.renderTargetPrevious.setSize(e,e),this.renderTargetAdapted.setSize(e,e),this.adaptiveLuminancePass.getFullscreenMaterial().defines.MIP_LEVEL_1X1=n.toFixed(1)}},{key:"adaptive",get:function(){return this.defines.has("ADAPTED_LUMINANCE")},set:function(e){e?(this.defines.set("ADAPTED_LUMINANCE","1"),this.uniforms.get("luminanceMap").value=this.renderTargetAdapted.texture):(this.defines["delete"]("ADAPTED_LUMINANCE"),this.uniforms.get("luminanceMap").value=null)}},{key:"adaptationRate",get:function(){return this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value},set:function(e){this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value=e}},{key:"distinction",get:function(){return console.warn(this.name,"The distinction field has been removed."),1},set:function(){console.warn(this.name,"The distinction field has been removed.")}}]),a}(Yt),Pn=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:Ht.NORMAL,eskil:!1,offset:.5,darkness:.5},t);return o=f(this,i(a).call(this,"VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#ifdef ESKIL\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#else\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:r.blendFunction,uniforms:new Map([["offset",new e.Uniform(r.offset)],["darkness",new e.Uniform(r.darkness)]])})),o.eskil=r.eskil,o}return r(a,t),o(a,[{key:"eskil",get:function(){return this.defines.has("ESKIL")},set:function(e){e?this.defines.set("ESKIL","1"):this.defines["delete"]("ESKIL")}}]),a}(Yt),wn={MOVE_FORWARD:0,MOVE_LEFT:1,MOVE_BACKWARD:2,MOVE_RIGHT:3,MOVE_DOWN:4,MOVE_UP:5,ZOOM_OUT:6,ZOOM_IN:7},Ln=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.x=t,this.y=a,this.z=o}return o(e,[{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"setFromSpherical",value:function(e){this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var a=ge(t)*e;return this.x=a*ge(n),this.y=ue(t)*e,this.z=a*ue(n),this}},{key:"setFromCylindrical",value:function(e){this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*ge(t),this.y=n,this.z=e*ue(t),this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=a,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"crossVectors",value:function(e,t){var n=e.x,a=e.y,o=e.z,r=t.x,i=t.y,s=t.z;return this.x=a*s-o*i,this.y=o*r-n*s,this.z=n*i-a*r,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"transformDirection",value:function(t){var n=this.x,a=this.y,o=this.z,r=t.elements;return this.x=r[0]*n+r[4]*a+r[8]*o,this.y=r[1]*n+r[5]*a+r[9]*o,this.z=r[2]*n+r[6]*a+r[10]*o,this.normalize()}},{key:"applyMatrix3",value:function(t){var n=this.x,a=this.y,o=this.z,r=t.elements;return this.x=r[0]*n+r[3]*a+r[6]*o,this.y=r[1]*n+r[4]*a+r[7]*o,this.z=r[2]*n+r[5]*a+r[8]*o,this}},{key:"applyMatrix4",value:function(t){var n=this.x,a=this.y,o=this.z,r=t.elements;return this.x=r[0]*n+r[4]*a+r[8]*o+r[12],this.y=r[1]*n+r[5]*a+r[9]*o+r[13],this.z=r[2]*n+r[6]*a+r[10]*o+r[14],this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,a=this.z,o=e.x,r=e.y,i=e.z,s=e.w,l=s*t+r*a-i*n,d=s*n+i*t-o*a,c=s*a+o*n-r*t,u=-o*t-r*n-i*a;return this.x=l*s+u*-o+d*-i-c*-r,this.y=d*s+u*-r+c*-o-l*-i,this.z=c*s+u*-i+l*-r-d*-o,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"reflect",value:function(e){var t=e.x,n=e.y,a=e.z;return this.sub(e.multiplyScalar(2*this.dot(e))),e.set(t,n,a),this}},{key:"angleTo",value:function(e){var t=this.dot(e)/le(this.lengthSquared()*e.lengthSquared());return ie(Ae(ve(t,-1),1))}},{key:"manhattanLength",value:function(){return fe(this.x)+fe(this.y)+fe(this.z)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return le(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanDistanceTo",value:function(e){return fe(this.x-e.x)+fe(this.y-e.y)+fe(this.z-e.z)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return t*t+n*n+a*a}},{key:"distanceTo",value:function(e){return le(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=Ae(this.x,e.x),this.y=Ae(this.y,e.y),this.z=Ae(this.z,e.z),this}},{key:"max",value:function(e){return this.x=ve(this.x,e.x),this.y=ve(this.y,e.y),this.z=ve(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=ve(e.x,Ae(t.x,this.x)),this.y=ve(e.y,Ae(t.y,this.y)),this.z=ve(e.z,Ae(t.z,this.z)),this}},{key:"floor",value:function(){return this.x=he(this.x),this.y=he(this.y),this.z=he(this.z),this}},{key:"ceil",value:function(){return this.x=se(this.x),this.y=se(this.y),this.z=se(this.z),this}},{key:"round",value:function(){return this.x=xe(this.x),this.y=xe(this.y),this.z=xe(this.z),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}}]),e}(),Rn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=a}return o(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this}},{key:"applyMatrix3",value:function(t){var n=this.x,a=this.y,o=t.elements;return this.x=o[0]*n+o[3]*a+o[6],this.y=o[1]*n+o[4]*a+o[7],this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"manhattanLength",value:function(){return fe(this.x)+fe(this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return le(this.x*this.x+this.y*this.y)}},{key:"manhattanDistanceTo",value:function(e){return fe(this.x-e.x)+fe(this.y-e.y)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"distanceTo",value:function(e){return le(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=Ae(this.x,e.x),this.y=Ae(this.y,e.y),this}},{key:"max",value:function(e){return this.x=ve(this.x,e.x),this.y=ve(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=ve(e.x,Ae(t.x,this.x)),this.y=ve(e.y,Ae(t.y,this.y)),this}},{key:"floor",value:function(){return this.x=he(this.x),this.y=he(this.y),this}},{key:"ceil",value:function(){return this.x=se(this.x),this.y=se(this.y),this}},{key:"round",value:function(){return this.x=xe(this.x),this.y=xe(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"angle",value:function e(){var e=re(this.y,this.x);return 0>e&&(e+=2*pe),e}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)}},{key:"rotateAround",value:function(e,t){var n=ue(t),a=ge(t),o=this.x-e.x,r=this.y-e.y;return this.x=o*n-r*a+e.x,this.y=o*a+r*n+e.y,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"width",get:function(){return this.x},set:function(e){return this.x=e}},{key:"height",get:function(){return this.y},set:function(e){return this.y=e}}]),e}(),In={XYZ:"XYZ",YZX:"YZX",ZXY:"ZXY",XZY:"XZY",YXZ:"YXZ",ZYX:"ZYX"},Fn=new Ln,On=new Ln,zn=new Ln,c=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return o(e,[{key:"set",value:function(e,t,n,a,o,r,i,s,l,d,c,u,g,p,m,f){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=a,v[1]=o,v[5]=r,v[9]=i,v[13]=s,v[2]=l,v[6]=d,v[10]=c,v[14]=u,v[3]=g,v[7]=p,v[11]=m,v[15]=f,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,n=this.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,a;for(a=0;16>a;++a)n[a]=e[a+t];return this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,a;for(a=0;16>a;++a)e[a+t]=n[a];return e}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return le(ve(t,n,a))}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setPosition",value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,a=1/Fn.setFromMatrixColumn(e,0).length(),o=1/Fn.setFromMatrixColumn(e,1).length(),r=1/Fn.setFromMatrixColumn(e,2).length();return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var n=this.elements,o=t.x,r=t.y,i=t.z,s=ue(o),a=ge(o),l=ue(r),c=ge(r),d=ue(i),e=ge(i),u,g,p,m,f,v,A,h,y,x,C,b;switch(t.order){case In.XYZ:{u=s*d,g=s*e,p=a*d,m=a*e,n[0]=l*d,n[4]=-l*e,n[8]=c,n[1]=g+p*c,n[5]=u-m*c,n[9]=-a*l,n[2]=m-u*c,n[6]=p+g*c,n[10]=s*l;break}case In.YXZ:{f=l*d,v=l*e,A=c*d,h=c*e,n[0]=f+h*a,n[4]=A*a-v,n[8]=s*c,n[1]=s*e,n[5]=s*d,n[9]=-a,n[2]=v*a-A,n[6]=h+f*a,n[10]=s*l;break}case In.ZXY:{f=l*d,v=l*e,A=c*d,h=c*e,n[0]=f-h*a,n[4]=-s*e,n[8]=A+v*a,n[1]=v+A*a,n[5]=s*d,n[9]=h-f*a,n[2]=-s*c,n[6]=a,n[10]=s*l;break}case In.ZYX:{u=s*d,g=s*e,p=a*d,m=a*e,n[0]=l*d,n[4]=p*c-g,n[8]=u*c+m,n[1]=l*e,n[5]=m*c+u,n[9]=g*c-p,n[2]=-c,n[6]=a*l,n[10]=s*l;break}case In.YZX:{y=s*l,x=s*c,C=a*l,b=a*c,n[0]=l*d,n[4]=b-y*e,n[8]=C*e+x,n[1]=e,n[5]=s*d,n[9]=-a*d,n[2]=-c*d,n[6]=x*e+C,n[10]=y-b*e;break}case In.XZY:{y=s*l,x=s*c,C=a*l,b=a*c,n[0]=l*d,n[4]=-e,n[8]=c*d,n[1]=y*e+b,n[5]=s*d,n[9]=x*e-C,n[2]=C*e-x,n[6]=a*d,n[10]=b*e+y;break}}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Fn.set(0,0,0),e,On.set(1,1,1))}},{key:"lookAt",value:function(e,t,n){var a=this.elements,o=Fn,r=On,i=zn;return i.subVectors(e,t),0===i.lengthSquared()&&(i.z=1),i.normalize(),o.crossVectors(n,i),0===o.lengthSquared()&&(1===fe(n.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),o.crossVectors(n,i)),o.normalize(),r.crossVectors(i,o),a[0]=o.x,a[4]=r.x,a[8]=i.x,a[1]=o.y,a[5]=r.y,a[9]=i.y,a[2]=o.z,a[6]=r.z,a[10]=i.z,this}},{key:"multiplyMatrices",value:function(e,t){var n=this.elements,a=e.elements,o=t.elements,r=a[0],i=a[4],s=a[8],l=a[12],d=a[1],c=a[5],u=a[9],g=a[13],p=a[2],m=a[6],f=a[10],v=a[14],A=a[3],h=a[7],y=a[11],x=a[15],C=o[0],b=o[4],E=o[8],S=o[12],T=o[1],M=o[5],k=o[9],D=o[13],B=o[2],P=o[6],w=o[10],L=o[14],R=o[3],I=o[7],F=o[11],O=o[15];return n[0]=r*C+i*T+s*B+l*R,n[4]=r*b+i*M+s*P+l*I,n[8]=r*E+i*k+s*w+l*F,n[12]=r*S+i*D+s*L+l*O,n[1]=d*C+c*T+u*B+g*R,n[5]=d*b+c*M+u*P+g*I,n[9]=d*E+c*k+u*w+g*F,n[13]=d*S+c*D+u*L+g*O,n[2]=p*C+m*T+f*B+v*R,n[6]=p*b+m*M+f*P+v*I,n[10]=p*E+m*k+f*w+v*F,n[14]=p*S+m*D+f*L+v*O,n[3]=A*C+h*T+y*B+x*R,n[7]=A*b+h*M+y*P+x*I,n[11]=A*E+h*k+y*w+x*F,n[15]=A*S+h*D+y*L+x*O,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],a=e[8],o=e[12],r=e[1],i=e[5],s=e[9],l=e[13],d=e[2],c=e[6],u=e[10],g=e[14],p=e[3],m=e[7],f=e[11],v=e[15],A=t*i,h=t*s,y=t*l,x=n*r,C=n*s,b=n*l,E=a*r,S=a*i,T=a*l,M=o*r,k=o*i,D=o*s;return p*(D*c-T*c-k*u+b*u+S*g-C*g)+m*(h*g-y*u+M*u-E*g+T*d-D*d)+f*(y*c-A*g-M*c+x*g+k*d-b*d)+v*(-S*d-h*c+A*u+E*c-x*u+C*d)}},{key:"getInverse",value:function(e){var t=this.elements,n=e.elements,a=n[0],o=n[1],r=n[2],i=n[3],s=n[4],l=n[5],d=n[6],c=n[7],u=n[8],g=n[9],p=n[10],m=n[11],f=n[12],v=n[13],A=n[14],h=n[15],y=g*A*c-v*p*c+v*d*m-l*A*m-g*d*h+l*p*h,x=f*p*c-u*A*c-f*d*m+s*A*m+u*d*h-s*p*h,C=u*v*c-f*g*c+f*l*m-s*v*m-u*l*h+s*g*h,b=f*g*d-u*v*d-f*l*p+s*v*p+u*l*A-s*g*A,E=a*y+o*x+r*C+i*b,S;return 0===E?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(S=1/E,t[0]=y*S,t[1]=(v*p*i-g*A*i-v*r*m+o*A*m+g*r*h-o*p*h)*S,t[2]=(l*A*i-v*d*i+v*r*c-o*A*c-l*r*h+o*d*h)*S,t[3]=(g*d*i-l*p*i-g*r*c+o*p*c+l*r*m-o*d*m)*S,t[4]=x*S,t[5]=(u*A*i-f*p*i+f*r*m-a*A*m-u*r*h+a*p*h)*S,t[6]=(f*d*i-s*A*i-f*r*c+a*A*c+s*r*h-a*d*h)*S,t[7]=(s*p*i-u*d*i+u*r*c-a*p*c-s*r*m+a*d*m)*S,t[8]=C*S,t[9]=(f*g*i-u*v*i-f*o*m+a*v*m+u*o*h-a*g*h)*S,t[10]=(s*v*i-f*l*i+f*o*c-a*v*c-s*o*h+a*l*h)*S,t[11]=(u*l*i-s*g*i-u*o*c+a*g*c+s*o*m-a*l*m)*S,t[12]=b*S,t[13]=(u*v*r-f*g*r+f*o*p-a*v*p-u*o*A+a*g*A)*S,t[14]=(f*l*r-s*v*r-f*o*d+a*v*d+s*o*A-a*l*A)*S,t[15]=(s*g*r-u*l*r+u*o*d-a*g*d-s*o*p+a*l*p)*S),this}},{key:"transpose",value:function(){var e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}},{key:"scale",value:function(e,t,n){var a=this.elements;return a[0]*=e,a[4]*=t,a[8]*=n,a[1]*=e,a[5]*=t,a[9]*=n,a[2]*=e,a[6]*=t,a[10]*=n,a[3]*=e,a[7]*=t,a[11]*=n,this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=ue(e),n=ge(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=ue(e),n=ge(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=ue(e),n=ge(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,n){var a=ue(n),o=ge(n),r=1-a,t=e.x,i=e.y,s=e.z,l=r*t,d=r*i;return this.set(l*t+a,l*i-o*s,l*s+o*i,0,l*i+o*s,d*i+a,d*s-o*t,0,l*s-o*i,d*s+o*t,r*s*s+a,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var a=this.elements,o=t.x,r=t.y,i=t.z,s=t.w,l=o+o,d=r+r,c=i+i,u=o*l,g=o*d,p=o*c,m=r*d,f=r*c,v=i*c,A=s*l,h=s*d,y=s*c,x=n.x,C=n.y,b=n.z;return a[0]=(1-(m+v))*x,a[1]=(g+y)*x,a[2]=(p-h)*x,a[3]=0,a[4]=(g-y)*C,a[5]=(1-(u+v))*C,a[6]=(f+A)*C,a[7]=0,a[8]=(p+h)*b,a[9]=(f-A)*b,a[10]=(1-(u+m))*b,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}},{key:"decompose",value:function(e,t,n){var a=this.elements,o=a[0],r=a[1],i=a[2],s=a[4],l=a[5],d=a[6],c=a[8],u=a[9],g=a[10],p=this.determinant(),m=Fn.set(o,r,i).length()*(0>p?-1:1),f=Fn.set(s,l,d).length(),v=Fn.set(c,u,g).length(),A=1/m,h=1/f,y=1/v;return e.x=a[12],e.y=a[13],e.z=a[14],a[0]*=A,a[1]*=A,a[2]*=A,a[4]*=h,a[5]*=h,a[6]*=h,a[8]*=y,a[9]*=y,a[10]*=y,t.setFromRotationMatrix(this),a[0]=o,a[1]=r,a[2]=i,a[4]=s,a[5]=l,a[6]=d,a[8]=c,a[9]=u,a[10]=g,n.x=m,n.y=f,n.z=v,this}},{key:"makePerspective",value:function(e,t,n,a,o,r){var i=this.elements;return i[0]=2*o/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*o/(n-a),i[9]=(n+a)/(n-a),i[13]=0,i[2]=0,i[6]=0,i[10]=-(r+o)/(r-o),i[14]=-2*r*o/(r-o),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,a,o,r){var i=this.elements,s=1/(t-e),l=1/(n-a),d=1/(r-o);return i[0]=2*s,i[4]=0,i[8]=0,i[12]=-((t+e)*s),i[1]=0,i[5]=2*l,i[9]=0,i[13]=-((n+a)*l),i[2]=0,i[6]=0,i[10]=-2*d,i[14]=-((r+o)*d),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}},{key:"equals",value:function(e){var t=this.elements,n=e.elements,a=!0,o;for(o=0;a&&16>o;++o)t[o]!==n[o]&&(a=!1);return a}}]),e}(),_n=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.radius=t,this.phi=a,this.theta=o}return o(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeSafe",value:function(){return this.phi=ve(1e-6,Ae(pe-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=le(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=re(e,n),this.phi=ie(Ae(ve(t/this.radius,-1),1))),this}}]),e}(),Gn={MAIN:0,AUXILIARY:1,SECONDARY:2},Un=new Ln,Nn=new c,Hn=function(){function e(t,a,o,r){n(this,e),this.position=t,this.quaternion=a,this.target=o,this.settings=r,this.spherical=new _n}return o(e,[{key:"setPosition",value:function(e){return this.position=e,this}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"updateQuaternion",value:function(){var e=this.settings,t=e.rotation;return e.general.orbit?Nn.lookAt(Un.subVectors(this.position,this.target),t.pivotOffset,t.up):Nn.lookAt(Un.set(0,0,0),this.target.setFromSpherical(this.spherical),t.up),this.quaternion.setFromRotationMatrix(Nn),this}},{key:"adjustSpherical",value:function(e,t){var n=this.settings,a=n.general.orbit,o=n.rotation,r=this.spherical;return r.theta=o.invertX?r.theta+e:r.theta-e,r.phi=(a||o.invertY)&&!(a&&o.invertY)?r.phi-t:r.phi+t,r.theta=Ae(ve(r.theta,o.minAzimuthalAngle),o.maxAzimuthalAngle),r.phi=Ae(ve(r.phi,o.minPolarAngle),o.maxPolarAngle),r.theta%=2*pe,r.makeSafe(),a&&this.position.setFromSpherical(r).add(this.target),this}},{key:"zoom",value:function e(t){var n=this.settings,a=n.general,o=n.sensitivity,e=n.zoom,r=this.spherical,i,s,l;return a.orbit&&e.enabled&&(i=t*o.zoom,e.invert&&(i=-i),s=ve(e.minDistance,1e-6),l=Ae(e.maxDistance,1/0),r.radius=Ae(ve(r.radius+i,s),l),this.position.setFromSpherical(r).add(this.target)),this}},{key:"update",value:function(){}},{key:"lookAt",value:function(e){var t=this.spherical,n=this.position,a=this.target;return a.copy(e),this.settings.general.orbit?Un.subVectors(n,a):Un.subVectors(a,n).normalize(),t.setFromVector3(Un),t.radius=ve(t.radius,1e-6),this.updateQuaternion(),this}},{key:"getViewDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ln;return e.setFromSpherical(this.spherical).normalize(),this.settings.general.orbit&&e.negate(),e}}]),e}(),Vn=function(){function e(){n(this,e),this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1}return o(e,[{key:"reset",value:function(){return this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1,this}}]),e}(),Qn=new Ln(1,0,0),x=new Ln(0,1,0),y=new Ln(0,0,1),z=new Ln,Yn=function(){function e(t,a,o,r){n(this,e),this.position=t,this.quaternion=a,this.target=o,this.settings=r,this.movementState=new Vn}return o(e,[{key:"setPosition",value:function(e){return this.position=e,this}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"translateOnAxis",value:function(e,t){z.copy(e).applyQuaternion(this.quaternion).multiplyScalar(t),this.position.add(z),this.settings.general.orbit&&this.target.add(z)}},{key:"translate",value:function(e){var t=this.settings.sensitivity,n=this.movementState,a=e*t.translation;n.backward?this.translateOnAxis(y,a):n.forward&&this.translateOnAxis(y,-a),n.right?this.translateOnAxis(Qn,a):n.left&&this.translateOnAxis(Qn,-a),n.up?this.translateOnAxis(x,a):n.down&&this.translateOnAxis(x,-a)}},{key:"update",value:function(e){this.settings.translation.enabled&&this.translate(e)}},{key:"moveTo",value:function(e){return this.settings.general.orbit?this.target.copy(e):this.position.copy(e),this}}]),e}(),Xn=new Proxy({BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,META_LEFT:91,META_RIGHT:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},{get:function(e,t){return t in e?e[t]:1===t.length?t.toUpperCase().charCodeAt(0):void 0}}),Wn=function(){function e(){n(this,e),this.orbit=!0}return o(e,[{key:"copy",value:function(e){return this.orbit=e.orbit,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),jn=function(){function e(){n(this,e),this.defaultActions=new Map,this.actions=new Map}return o(e,[{key:"reset",value:function(){return this.actions=new Map(this.defaultActions),this}},{key:"setDefault",value:function(e){return this.defaultActions=e,this.reset()}},{key:"copy",value:function(e){return this.defaultActions=new Map(e.defaultActions),this.actions=new Map(e.actions),this}},{key:"clearDefault",value:function(){return this.defaultActions.clear(),this}},{key:"clear",value:function(){return this.actions.clear(),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"has",value:function(e){return this.actions.has(e)}},{key:"get",value:function(e){return this.actions.get(e)}},{key:"set",value:function(e,t){return this.actions.set(e,t),this}},{key:"delete",value:function(e){return this.actions["delete"](e)}},{key:"toJSON",value:function(){return{defaultActions:C(this.defaultActions),actions:C(this.actions)}}}]),e}(),Kn=function(){function e(){n(this,e),this.hold=!1,this.lock=!0}return o(e,[{key:"copy",value:function(e){return this.hold=e.hold,this.lock=e.lock,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Jn=function(){function e(){n(this,e),this.up=new Ln,this.up.copy(x),this.pivotOffset=new Ln,this.minAzimuthalAngle=-Infinity,this.maxAzimuthalAngle=1/0,this.minPolarAngle=0,this.maxPolarAngle=pe,this.invertX=!1,this.invertY=!1}return o(e,[{key:"copy",value:function(e){return this.up.copy(e.up),this.pivotOffset.copy(e.pivotOffset),this.minAzimuthalAngle=null===e.minAzimuthalAngle?-Infinity:e.minAzimuthalAngle,this.maxAzimuthalAngle=null===e.maxAzimuthalAngle?1/0:e.maxAzimuthalAngle,this.minPolarAngle=e.minPolarAngle,this.maxPolarAngle=e.maxPolarAngle,this.invertX=e.invertX,this.invertY=e.invertY,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Zn=function(){function e(){n(this,e),this.rotation=.0025,this.translation=1,this.zoom=.1}return o(e,[{key:"copy",value:function(e){return this.rotation=e.rotation,this.translation=e.translation,this.zoom=e.zoom,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),qn=function(){function e(){n(this,e),this.enabled=!0}return o(e,[{key:"copy",value:function(e){return this.enabled=e.enabled,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),$n=function(){function e(){n(this,e),this.enabled=!0,this.invert=!1,this.minDistance=1e-6,this.maxDistance=1/0}return o(e,[{key:"copy",value:function(e){return this.enabled=e.enabled,this.invert=e.invert,this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),ea=function(){function e(){n(this,e),this.general=new Wn,this.keyBindings=new jn,this.keyBindings.setDefault(new Map([[Xn.W,wn.MOVE_FORWARD],[Xn.UP,wn.MOVE_FORWARD],[Xn.A,wn.MOVE_LEFT],[Xn.LEFT,wn.MOVE_LEFT],[Xn.S,wn.MOVE_BACKWARD],[Xn.DOWN,wn.MOVE_BACKWARD],[Xn.D,wn.MOVE_RIGHT],[Xn.RIGHT,wn.MOVE_RIGHT],[Xn.X,wn.MOVE_DOWN],[Xn.SPACE,wn.MOVE_UP],[Xn.PAGE_DOWN,wn.ZOOM_OUT],[Xn.PAGE_UP,wn.ZOOM_IN]])),this.pointer=new Kn,this.rotation=new Jn,this.sensitivity=new Zn,this.translation=new qn,this.zoom=new $n}return o(e,[{key:"copy",value:function(e){return this.general.copy(e.general),this.keyBindings.copy(e.keyBindings),this.pointer.copy(e.pointer),this.rotation.copy(e.rotation),this.sensitivity.copy(e.sensitivity),this.translation.copy(e.translation),this.zoom.copy(e.zoom),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toDataURL",value:function(){return URL.createObjectURL(new Blob([JSON.stringify(this)],{type:"text/json"}))}}]),e}(),ta=function(){function e(){n(this,e)}return o(e,[{key:"execute",value:function(){throw new Error("Strategy#execute method not implemented!")}}]),e}(),na=function(e){function t(e,a){var o;return n(this,t),o=f(this,i(t).call(this)),o.movementState=e,o.direction=a,o}return r(t,e),o(t,[{key:"execute",value:function(e){var t=this.movementState;switch(this.direction){case aa.FORWARD:t.forward=e;break;case aa.LEFT:t.left=e;break;case aa.BACKWARD:t.backward=e;break;case aa.RIGHT:t.right=e;break;case aa.DOWN:t.down=e;break;case aa.UP:t.up=e;}}}]),t}(ta),aa={FORWARD:0,LEFT:1,BACKWARD:2,RIGHT:3,DOWN:4,UP:5},oa=function(e){function t(e,a){var o;return n(this,t),o=f(this,i(t).call(this)),o.rotationManager=e,o.zoomIn=a,o}return r(t,e),o(t,[{key:"execute",value:function(e){e&&this.rotationManager.zoom(this.zoomIn?-1:1)}}]),t}(ta),ra=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.body;n(this,e),this.dom=o,this.position=t,this.quaternion=a,this.target=new Ln,this.settings=new ea,this.rotationManager=new Hn(t,a,this.target,this.settings),this.translationManager=new Yn(t,a,this.target,this.settings),this.strategies=function(e,t){var n=t.movementState;return new Map([[wn.MOVE_FORWARD,new na(n,aa.FORWARD)],[wn.MOVE_LEFT,new na(n,aa.LEFT)],[wn.MOVE_BACKWARD,new na(n,aa.BACKWARD)],[wn.MOVE_RIGHT,new na(n,aa.RIGHT)],[wn.MOVE_DOWN,new na(n,aa.DOWN)],[wn.MOVE_UP,new na(n,aa.UP)],[wn.ZOOM_OUT,new oa(e,!1)],[wn.ZOOM_IN,new oa(e,!0)]])}(this.rotationManager,this.translationManager),this.lastScreenPosition=new Rn,this.dragging=!1,this.enabled=!1,null!==t&&null!==a&&(this.lookAt(this.target),null!==o&&this.setEnabled())}return o(e,[{key:"getDom",value:function(){return this.dom}},{key:"getPosition",value:function(){return this.position}},{key:"getQuaternion",value:function(){return this.quaternion}},{key:"getTarget",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ln;return e.copy(this.target),this.settings.general.orbit||e.add(this.position),e}},{key:"getViewDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ln;return this.rotationManager.getViewDirection(e)}},{key:"setDom",value:function(e){var t=this.enabled;return null!==e&&(t&&this.setEnabled(!1),this.dom=e,this.setEnabled(t)),this}},{key:"setPosition",value:function(e){return this.position=e,this.rotationManager.setPosition(e),this.translationManager.setPosition(e),this.lookAt(this.target)}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this.rotationManager.setQuaternion(e),this.translationManager.setQuaternion(e),this.lookAt(this.target)}},{key:"setTarget",value:function(e){return this.target=e,this.rotationManager.setTarget(e),this.translationManager.setTarget(e),this.lookAt(this.target)}},{key:"setOrbitEnabled",value:function(e){var t=this.settings.general;return t.orbit!==e&&(this.getTarget(this.target),t.orbit=e,this.lookAt(this.target)),this}},{key:"copy",value:function(e){return this.dom=e.getDom(),this.position=e.getPosition(),this.quaternion=e.getQuaternion(),this.target=e.getTarget(),this.settings.copy(e.settings),this.rotationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.translationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.lookAt(this.target)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"handlePointerMoveEvent",value:function(e){var t=this.settings,n=t.pointer,a=t.sensitivity,o=this.rotationManager,r=this.lastScreenPosition,i,s;document.pointerLockElement===this.dom?(!n.hold||this.dragging)&&o.adjustSpherical(e.movementX*a.rotation,e.movementY*a.rotation).updateQuaternion():(i=e.screenX-r.x,s=e.screenY-r.y,r.set(e.screenX,e.screenY),o.adjustSpherical(i*a.rotation,s*a.rotation).updateQuaternion())}},{key:"handleTouchMoveEvent",value:function(e){var t=this.settings.sensitivity,n=this.rotationManager,a=this.lastScreenPosition,o=e.touches[0],r=o.screenX-a.x,i=o.screenY-a.y;a.set(o.screenX,o.screenY),e.preventDefault(),n.adjustSpherical(r*t.rotation,i*t.rotation).updateQuaternion()}},{key:"handleMainPointerButton",value:function(e,t){this.dragging=t,this.settings.pointer.lock?this.setPointerLocked():t?(this.lastScreenPosition.set(e.screenX,e.screenY),this.dom.addEventListener("mousemove",this)):this.dom.removeEventListener("mousemove",this)}},{key:"handleAuxiliaryPointerButton",value:function(){}},{key:"handleSecondaryPointerButton",value:function(){}},{key:"handlePointerButtonEvent",value:function(e,t){switch(e.preventDefault(),e.button){case Gn.MAIN:this.handleMainPointerButton(e,t);break;case Gn.AUXILIARY:this.handleAuxiliaryPointerButton(e,t);break;case Gn.SECONDARY:this.handleSecondaryPointerButton(e,t);}}},{key:"handleTouchEvent",value:function(e,t){var n=e.touches[0];e.preventDefault(),t?(this.lastScreenPosition.set(n.screenX,n.screenY),this.dom.addEventListener("touchmove",this)):this.dom.removeEventListener("touchmove",this)}},{key:"handleKeyboardEvent",value:function(e,t){var n=this.settings.keyBindings;n.has(e.keyCode)&&(e.preventDefault(),this.strategies.get(n.get(e.keyCode)).execute(t))}},{key:"handleWheelEvent",value:function(e){var t=Math.sign;this.rotationManager.zoom(t(e.deltaY))}},{key:"handlePointerLockEvent",value:function(){document.pointerLockElement===this.dom?this.dom.addEventListener("mousemove",this):this.dom.removeEventListener("mousemove",this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.handlePointerMoveEvent(e);break;case"touchmove":this.handleTouchMoveEvent(e);break;case"mousedown":this.handlePointerButtonEvent(e,!0);break;case"mouseup":this.handlePointerButtonEvent(e,!1);break;case"touchstart":this.handleTouchEvent(e,!0);break;case"touchend":this.handleTouchEvent(e,!1);break;case"keydown":this.handleKeyboardEvent(e,!0);break;case"keyup":this.handleKeyboardEvent(e,!1);break;case"wheel":this.handleWheelEvent(e);break;case"pointerlockchange":this.handlePointerLockEvent();}}},{key:"update",value:function(e){this.rotationManager.update(e),this.translationManager.update(e)}},{key:"moveTo",value:function(e){return this.rotationManager.moveTo(e),this}},{key:"lookAt",value:function(e){return this.rotationManager.lookAt(e),this}},{key:"setPointerLocked",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];e?document.pointerLockElement!==this.dom&&void 0!==this.dom.requestPointerLock&&this.dom.requestPointerLock():void 0!==document.exitPointerLock&&document.exitPointerLock()}},{key:"setEnabled",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.dom;return this.translationManager.movementState.reset(),e&&!this.enabled?(document.addEventListener("pointerlockchange",this),document.body.addEventListener("keyup",this),document.body.addEventListener("keydown",this),t.addEventListener("mousedown",this),t.addEventListener("mouseup",this),t.addEventListener("touchstart",this),t.addEventListener("touchend",this),t.addEventListener("wheel",this)):!e&&this.enabled&&(document.removeEventListener("pointerlockchange",this),document.body.removeEventListener("keyup",this),document.body.removeEventListener("keydown",this),t.removeEventListener("mousedown",this),t.removeEventListener("mouseup",this),t.removeEventListener("touchstart",this),t.removeEventListener("touchend",this),t.removeEventListener("wheel",this),t.removeEventListener("mousemove",this),t.removeEventListener("touchmove",this)),this.setPointerLocked(!1),this.enabled=e,this}},{key:"dispose",value:function(){this.setEnabled(!1)}}]),e}(),ia=function(e){function t(e,a){var o;return n(this,t),o=f(this,i(t).call(this,e)),o.composer=a,o.renderPass=new Ut(o.scene,null),o.renderPass.renderToScreen=!0,o}return r(t,e),o(t,[{key:"loadSMAAImages",value:function(){var e=this.assets,t=this.loadingManager,n=new Image,a=new Image;n.addEventListener("load",function(){e.set("smaa-search",this),t.itemEnd("smaa-search")}),a.addEventListener("load",function(){e.set("smaa-area",this),t.itemEnd("smaa-area")}),t.itemStart("smaa-search"),t.itemStart("smaa-area"),n.src=Tn.searchImageDataURL,a.src=Tn.areaImageDataURL}},{key:"render",value:function(e){this.composer.render(e)}},{key:"reset",value:function(){h(i(t.prototype),"reset",this).call(this);var e=new Ut(this.scene,null);return e.enabled=this.renderPass.enabled,e.renderToScreen=!0,this.renderPass=e,this}}]),t}(be),sa=new e.Vector2,la=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"bloom",e)),t.raycaster=null,t.selectedObject=null,t.effect=null,t.pass=null,t.object=null,t}return r(a,t),o(a,[{key:"raycast",value:function(e){var t=this.raycaster;sa.x=2*(e.clientX/window.innerWidth)-1,sa.y=2*-(e.clientY/window.innerHeight)+1,t.setFromCamera(sa,this.camera);var n=t.intersectObjects(this.object.children);if(this.selectedObject=null,0<n.length){var a=n[0];void 0===a.object?console.warn("Encountered an undefined object",n):this.selectedObject=a.object}}},{key:"handleSelection",value:function(){var e=this.effect.selection,t=this.selectedObject;null!==t&&(e.has(t)?e["delete"](t):e.add(t))}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.raycast(e);break;case"mousedown":this.handleSelection();}}},{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space2/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.01,2e3);r.position.set(-10,6,15),r.lookAt(t.position),this.camera=r;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,p,m;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(4*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(.5*Math.random()),c.add(m);this.object=c,t.add(c),m=new e.Mesh(new e.BoxBufferGeometry(.25,8.25,.25),new e.MeshLambertMaterial({color:723723})),c=new e.Object3D;var f,v,A;f=c.clone();var h=m.clone();h.position.set(-4,0,4),f.add(h),h=m.clone(),h.position.set(4,0,4),f.add(h),h=m.clone(),h.position.set(-4,0,-4),f.add(h),h=m.clone(),h.position.set(4,0,-4),f.add(h),v=f.clone(),v.rotation.set(pe/2,0,0),A=f.clone(),A.rotation.set(0,0,pe/2),c.add(f),c.add(v),c.add(A),t.add(c),this.raycaster=new e.Raycaster,o.domElement.addEventListener("mousemove",this),o.domElement.addEventListener("mousedown",this);var y=new Tn(n.get("smaa-search"),n.get("smaa-area"));y.colorEdgesMaterial.setEdgeDetectionThreshold(.05);var x=new En(t,r,{blendFunction:Ht.SCREEN,kernelSize:Et.MEDIUM,luminanceThreshold:.825,luminanceSmoothing:.075,height:480});x.inverted=!0,x.blendMode.opacity.value=2.3,this.effect=x;var C=new Wt(r,y,x);this.pass=C,this.renderPass.renderToScreen=!1,C.renderToScreen=!0,a.addPass(C),l.layers.enable(x.selection.layer),d.layers.enable(x.selection.layer)}},{key:"render",value:function(e){var t=this.object,n=2*pe;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.effect,a=n.blendMode,o={resolution:n.height,"kernel size":n.blurPass.kernelSize,scale:n.blurPass.scale,luminance:{filter:n.luminancePass.enabled,threshold:n.luminanceMaterial.threshold,smoothing:n.luminanceMaterial.smoothing},selection:{inverted:n.inverted,"ignore bg":n.ignoreBackground},opacity:a.opacity.value,"blend mode":a.blendFunction};e.add(o,"resolution",[240,360,480,720,1080]).onChange(function(){n.height=me(o.resolution)}),e.add(o,"kernel size",Et).onChange(function(){n.blurPass.kernelSize=me(o["kernel size"])}),e.add(o,"scale").min(0).max(1).step(.01).onChange(function(){n.blurPass.scale=oe(o.scale)});var r=e.addFolder("Luminance");r.add(o.luminance,"filter").onChange(function(){n.luminancePass.enabled=o.luminance.filter}),r.add(o.luminance,"threshold").min(0).max(1).step(.001).onChange(function(){n.luminanceMaterial.threshold=oe(o.luminance.threshold)}),r.add(o.luminance,"smoothing").min(0).max(1).step(.001).onChange(function(){n.luminanceMaterial.smoothing=oe(o.luminance.smoothing)}),r.open(),r=e.addFolder("Selection"),r.add(o.selection,"inverted").onChange(function(){n.inverted=o.selection.inverted}),r.add(o.selection,"ignore bg").onChange(function(){n.ignoreBackground=o.selection["ignore bg"]}),r.open(),e.add(o,"opacity").min(0).max(4).step(.01).onChange(function(){a.opacity.value=o.opacity}),e.add(o,"blend mode",Ht).onChange(function(){a.blendFunction=me(o["blend mode"]),t.recompile()}),e.add(n,"dithering")}},{key:"reset",value:function(){h(i(a.prototype),"reset",this).call(this);var e=this.composer.renderer.domElement;return e.removeEventListener("mousemove",this),e.removeEventListener("mousedown",this),this}}]),a}(ia),da=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"blur",e)),t.blurPass=null,t.texturePass=null,t.effect=null,t.object=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/sunset/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-15,0,-15),r.lookAt(t.position),this.camera=r;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(1440,200,2e3),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,p,m;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new Jt,v=new Ot({height:480}),A=new Tn(n.get("smaa-search"),n.get("smaa-area")),h=new Dn({texture:f.renderTarget.texture}),y=new Wt(r,A),x=new Wt(r,h);h.blendMode.opacity.value=0,this.renderPass.renderToScreen=!1,x.renderToScreen=!0,this.blurPass=v,this.texturePass=x,this.effect=h,a.addPass(y),a.addPass(f),a.addPass(v),a.addPass(x)}},{key:"render",value:function(e){var t=this.object,n=2*pe;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.effect,n=this.texturePass,a=this.blurPass,o=t.blendMode,r={enabled:a.enabled,resolution:a.height,"kernel size":a.kernelSize,scale:a.scale,opacity:1-o.opacity.value,"blend mode":o.blendFunction};e.add(r,"resolution",[240,360,480,720,1080]).onChange(function(){a.height=me(r.resolution)}),e.add(r,"kernel size",Et).onChange(function(){a.kernelSize=me(r["kernel size"])}),e.add(r,"scale").min(0).max(1).step(.01).onChange(function(){a.scale=oe(r.scale)}),e.add(a,"dithering"),e.add(a,"enabled"),e.add(r,"opacity").min(0).max(1).step(.01).onChange(function(){o.opacity.value=1-r.opacity}),e.add(r,"blend mode",Ht).onChange(function(){o.blendFunction=me(r["blend mode"]),n.recompile()})}}]),a}(ia),ca=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"bokeh",e)),t.effect=null,t.bokehPass=null,t.depthPass=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space3/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,50);r.position.set(12.5,-.3,1.7),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.rotation=425e-6,i.settings.sensitivity.zoom=.15,i.settings.zoom.minDistance=11.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.CylinderBufferGeometry(1,1,20,6),c=new e.MeshPhongMaterial({color:16755370,flatShading:!0,envMap:n.get("sky")}),u=new e.Mesh(d,c);u.rotation.set(0,0,pe/2),t.add(u);var g=new Tn(n.get("smaa-search"),n.get("smaa-area"));g.colorEdgesMaterial.setEdgeDetectionThreshold(.05);var p=new nn({focus:.32,dof:.02,aperture:.015,maxBlur:.0125}),m=new Wt(r,g),f=new Wt(r,p,new Pn()),v=new Wt(r,new ln());this.renderPass.renderToScreen=!1,m.renderToScreen=!0,v.enabled=!1,this.effect=p,this.bokehPass=f,this.depthPass=v,a.addPass(f),a.addPass(v),a.addPass(m)}},{key:"registerOptions",value:function(e){var t=this.bokehPass,n=this.depthPass,a=this.effect,o=a.uniforms,r=a.blendMode,i={focus:o.get("focus").value,dof:o.get("dof").value,aperture:o.get("aperture").value,blur:o.get("maxBlur").value,"show depth":n.enabled,opacity:r.opacity.value,"blend mode":r.blendFunction};e.add(i,"focus").min(0).max(1).step(.001).onChange(function(){o.get("focus").value=i.focus}),e.add(i,"dof").min(0).max(1).step(.001).onChange(function(){o.get("dof").value=i.dof}),e.add(i,"aperture").min(0).max(.05).step(1e-4).onChange(function(){o.get("aperture").value=i.aperture}),e.add(i,"blur").min(0).max(.1).step(.001).onChange(function(){o.get("maxBlur").value=i.blur}),e.add(i,"opacity").min(0).max(1).step(.01).onChange(function(){r.opacity.value=i.opacity}),e.add(i,"blend mode",Ht).onChange(function(){r.blendFunction=me(i["blend mode"]),t.recompile()}),e.add(i,"show depth").onChange(function(){t.enabled=!i["show depth"],n.enabled=i["show depth"]})}}]),a}(ia),ua=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"realistic-bokeh",e)),t.effect=null,t.pass=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space3/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,50);r.position.set(12.5,-.3,1.7),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.rotation=425e-6,i.settings.sensitivity.zoom=.15,i.settings.zoom.minDistance=11.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.CylinderBufferGeometry(1,1,20,6),c=new e.MeshPhongMaterial({color:16755370,flatShading:!0,envMap:n.get("sky")}),u=new e.Mesh(d,c);u.rotation.set(0,0,pe/2),t.add(u);var g=new Tn(n.get("smaa-search"),n.get("smaa-area"));g.colorEdgesMaterial.setEdgeDetectionThreshold(.05);var p=new hn({focus:1.55,focalLength:r.getFocalLength(),luminanceThreshold:.325,luminanceGain:2,bias:-.35,fringe:.7,maxBlur:2.5,rings:5,samples:5,showFocus:!1,manualDoF:!1,pentagon:!0}),m=new Wt(r,g),f=new Wt(r,p,new Pn());this.renderPass.renderToScreen=!1,m.renderToScreen=!0,this.effect=p,this.pass=f,a.addPass(f),a.addPass(m)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.effect,a=n.uniforms,o=n.blendMode,r={focus:a.get("focus").value,"focal length":a.get("focalLength").value,threshold:a.get("luminanceThreshold").value,gain:a.get("luminanceGain").value,bias:a.get("bias").value,fringe:a.get("fringe").value,max:a.get("maxBlur").value,"near start":.2,"near dist":1,"far start":.2,"far dist":2,opacity:o.opacity.value,"blend mode":o.blendFunction};e.add(r,"focus").min(this.camera.near).max(20).step(.01).onChange(function(){a.get("focus").value=r.focus}),e.add(r,"focal length").min(.1).max(35).step(.01).onChange(function(){a.get("focalLength").value=r["focal length"]}),e.add(n,"showFocus").onChange(function(){return t.recompile()});var i=e.addFolder("Depth of Field");i.add(n,"manualDoF").onChange(function(){return t.recompile()}),i.add(r,"near start").min(0).max(1).step(.001).onChange(function(){a.has("dof")&&(a.get("dof").value.x=r["near start"])}),i.add(r,"near dist").min(0).max(2).step(.001).onChange(function(){a.has("dof")&&(a.get("dof").value.y=r["near dist"])}),i.add(r,"far start").min(0).max(1).step(.001).onChange(function(){a.has("dof")&&(a.get("dof").value.z=r["far start"])}),i.add(r,"far dist").min(0).max(3).step(.001).onChange(function(){a.has("dof")&&(a.get("dof").value.w=r["far dist"])}),i=e.addFolder("Blur"),i.add(r,"max").min(0).max(5).step(.001).onChange(function(){a.get("maxBlur").value=r.max}),i.add(r,"bias").min(-1).max(1).step(.001).onChange(function(){a.get("bias").value=r.bias}),i.add(r,"fringe").min(0).max(5).step(.001).onChange(function(){a.get("fringe").value=r.fringe}),i.add(n,"rings").min(1).max(8).step(1).onChange(function(){return t.recompile()}),i.add(n,"samples").min(1).max(8).step(1).onChange(function(){return t.recompile()}),i.add(n,"pentagon").onChange(function(){return t.recompile()}),i=e.addFolder("Luminance"),i.add(r,"threshold").min(0).max(1).step(.01).onChange(function(){a.get("luminanceThreshold").value=r.threshold}),i.add(r,"gain").min(0).max(4).step(.01).onChange(function(){a.get("luminanceGain").value=r.gain}),e.add(r,"opacity").min(0).max(1).step(.01).onChange(function(){o.opacity.value=r.opacity}),e.add(r,"blend mode",Ht).onChange(function(){o.blendFunction=me(r["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(ia),ga=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"color-depth",e)),t.effect=null,t.pass=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space3/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var s=new Tn(n.get("smaa-search"),n.get("smaa-area")),l=new rn({bits:12}),d=new Wt(r,s,l);this.renderPass.renderToScreen=!1,d.renderToScreen=!0,this.effect=l,this.pass=d,a.addPass(d)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.effect,a=n.blendMode,o={bits:n.getBitDepth(),opacity:a.opacity.value,"blend mode":a.blendFunction};e.add(o,"bits").min(1).max(24).step(1).onChange(function(){n.setBitDepth(o.bits)}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){a.opacity.value=o.opacity}),e.add(o,"blend mode",Ht).onChange(function(){a.blendFunction=me(o["blend mode"]),t.recompile()})}}]),a}(ia),pa=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"color-grading",e)),t.brightnessContrastEffect=null,t.colorAverageEffect=null,t.gammaCorrectionEffect=null,t.hueSaturationEffect=null,t.sepiaEffect=null,t.pass=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/sunset/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-.75,-.1,-1),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.background=n.get("sky");var s=new Tn(n.get("smaa-search"),n.get("smaa-area")),l=new on(Ht.SKIP),d=new Sn({blendFunction:Ht.SKIP}),c=new an({contrast:.25}),u=new cn({gamma:.65}),g=new ce({saturation:-.375}),p=new Wt(r,s,l,d,c,u,g);this.renderPass.renderToScreen=!1,p.renderToScreen=!0,p.dithering=!0,this.brightnessContrastEffect=c,this.colorAverageEffect=l,this.gammaCorrectionEffect=u,this.hueSaturationEffect=g,this.sepiaEffect=d,this.pass=p,a.addPass(p)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.brightnessContrastEffect,a=this.colorAverageEffect,o=this.gammaCorrectionEffect,r=this.hueSaturationEffect,i=this.sepiaEffect,s={colorAverage:{opacity:a.blendMode.opacity.value,"blend mode":a.blendMode.blendFunction},sepia:{intensity:i.uniforms.get("intensity").value,opacity:i.blendMode.opacity.value,"blend mode":i.blendMode.blendFunction},brightnessContrast:{brightness:n.uniforms.get("brightness").value,contrast:n.uniforms.get("contrast").value,opacity:n.blendMode.opacity.value,"blend mode":n.blendMode.blendFunction},gammaCorrection:{gamma:o.uniforms.get("gamma").value,opacity:o.blendMode.opacity.value,"blend mode":o.blendMode.blendFunction},hueSaturation:{hue:0,saturation:r.uniforms.get("saturation").value,opacity:r.blendMode.opacity.value,"blend mode":r.blendMode.blendFunction}},l=e.addFolder("Color Average");l.add(s.colorAverage,"opacity").min(0).max(1).step(.01).onChange(function(){a.blendMode.opacity.value=s.colorAverage.opacity}),l.add(s.colorAverage,"blend mode",Ht).onChange(function(){a.blendMode.blendFunction=me(s.colorAverage["blend mode"]),t.recompile()}),l=e.addFolder("Sepia"),l.add(s.sepia,"intensity").min(0).max(4).step(.001).onChange(function(){i.uniforms.get("intensity").value=s.sepia.intensity}),l.add(s.sepia,"opacity").min(0).max(1).step(.01).onChange(function(){i.blendMode.opacity.value=s.sepia.opacity}),l.add(s.sepia,"blend mode",Ht).onChange(function(){i.blendMode.blendFunction=me(s.sepia["blend mode"]),t.recompile()}),l=e.addFolder("Brightness & Contrast"),l.add(s.brightnessContrast,"brightness").min(-1).max(1).step(.001).onChange(function(){n.uniforms.get("brightness").value=s.brightnessContrast.brightness}),l.add(s.brightnessContrast,"contrast").min(-1).max(1).step(.001).onChange(function(){n.uniforms.get("contrast").value=s.brightnessContrast.contrast}),l.add(s.brightnessContrast,"opacity").min(0).max(1).step(.01).onChange(function(){n.blendMode.opacity.value=s.brightnessContrast.opacity}),l.add(s.brightnessContrast,"blend mode",Ht).onChange(function(){n.blendMode.blendFunction=me(s.brightnessContrast["blend mode"]),t.recompile()}),l.open(),l=e.addFolder("Gamma Correction"),l.add(s.gammaCorrection,"gamma").min(.01).max(1.5).step(.001).onChange(function(){o.uniforms.get("gamma").value=s.gammaCorrection.gamma}),l.add(s.gammaCorrection,"opacity").min(0).max(1).step(.01).onChange(function(){o.blendMode.opacity.value=s.gammaCorrection.opacity}),l.add(s.gammaCorrection,"blend mode",Ht).onChange(function(){o.blendMode.blendFunction=me(s.gammaCorrection["blend mode"]),t.recompile()}),l.open(),l=e.addFolder("Hue & Saturation"),l.add(s.hueSaturation,"hue").min(-pe).max(Math.PI).step(.001).onChange(function(){r.setHue(s.hueSaturation.hue)}),l.add(s.hueSaturation,"saturation").min(-1).max(1).step(.001).onChange(function(){r.uniforms.get("saturation").value=s.hueSaturation.saturation}),l.add(s.hueSaturation,"opacity").min(0).max(1).step(.01).onChange(function(){r.blendMode.opacity.value=s.hueSaturation.opacity}),l.add(s.hueSaturation,"blend mode",Ht).onChange(function(){r.blendMode.blendFunction=me(s.hueSaturation["blend mode"]),t.recompile()}),l.open(),e.add(t,"dithering")}}]),a}(ia),ma=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"glitch",e)),t.effect=null,t.pass=null,t.object=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),i="textures/skies/space4/",s=".jpg",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(e,i){0===n.size?(a.onError=i,a.onProgress=function(t,n,a){n===a&&e()},r.load(l,function(e){n.set("sky",e)}),o.load("textures/perturb.jpg",function(e){n.set("perturbation-map",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(6,1,6),r.lookAt(t.position),this.camera=r;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,p,m;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),p=new e.Mesh(u,g),p.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),p.position.multiplyScalar(10*Math.random()),p.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),p.scale.multiplyScalar(Math.random()),c.add(p);this.object=c,t.add(c);var f=new Tn(n.get("smaa-search"),n.get("smaa-area"));f.setEdgeDetectionThreshold(.08);var v=new sn,A=new gn({perturbationMap:n.get("perturbation-map"),chromaticAberrationOffset:v.offset}),h=new fn({blendFunction:Ht.COLOR_DODGE});h.blendMode.opacity.value=.15;var y=new Wt(r,f),x=new Wt(r,A,h),C=new Wt(r,v);this.renderPass.renderToScreen=!1,C.renderToScreen=!0,this.effect=A,a.addPass(y),a.addPass(x),a.addPass(C)}},{key:"render",value:function(e){var t=this.object,n=2*pe;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.effect,n=t.getPerturbationMap(),a=t.uniforms,o=t.delay,r=t.duration,i=t.strength,s={"glitch mode":t.mode,"custom pattern":!0,"min delay":o.x,"max delay":o.y,"min duration":r.x,"max duration":r.y,"weak glitches":i.x,"strong glitches":i.y,"glitch ratio":t.ratio,columns:a.get("columns").value};e.add(s,"glitch mode",pn).onChange(function(){t.mode=me(s["glitch mode"])}),e.add(s,"custom pattern").onChange(function(){s["custom pattern"]?t.setPerturbationMap(n):t.setPerturbationMap(t.generatePerturbationMap(64))}),e.add(s,"min delay").min(0).max(2).step(.001).onChange(function(){o.x=s["min delay"]}),e.add(s,"max delay").min(2).max(4).step(.001).onChange(function(){o.y=s["max delay"]}),e.add(s,"min duration").min(0).max(.6).step(.001).onChange(function(){r.x=s["min duration"]}),e.add(s,"max duration").min(.6).max(1.8).step(.001).onChange(function(){r.y=s["max duration"]}),e.add(s,"weak glitches").min(0).max(1).step(.001).onChange(function(){i.x=s["weak glitches"]}),e.add(s,"strong glitches").min(0).max(1).step(.001).onChange(function(){i.y=s["strong glitches"]}),e.add(s,"glitch ratio").min(0).max(1).step(.001).onChange(function(){t.ratio=oe(s["glitch ratio"])}),e.add(s,"columns").min(0).max(.5).step(.001).onChange(function(){a.get("columns").value=s.columns})}}]),a}(ia),fa=function(){function e(e){this.manager=void 0===e?Ce.DefaultLoadingManager:e,this.dracoLoader=null,this.ddsLoader=null}function n(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}function a(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=b.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.name=b.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[b.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function r(){this.name=b.KHR_MATERIALS_UNLIT}function i(e){this.name=b.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:Ce.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},"glTF"!==this.header.magic)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(2>this.header.version)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(e,12),a=0,o;a<n.byteLength;){o=n.getUint32(a,!0),a+=4;var r=n.getUint32(a,!0);if(a+=4,r===S.JSON){var i=new Uint8Array(e,12+a,o);this.content=Ce.LoaderUtils.decodeText(i)}else if(r===S.BIN){var s=12+a;this.body=e.slice(s,s+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function s(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=b.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function l(){this.name=b.KHR_TEXTURE_TRANSFORM}function d(){return{name:b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Ce.ShaderMaterial},extendParams:function(e,t,n){var a=t.extensions[this.name],o=Ce.ShaderLib.standard,r=Ce.UniformsUtils.clone(o.uniforms),i=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\ttexelSpecular = sRGBToLinear( texelSpecular );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\nmaterial.specularColor = specularFactor.rgb;");delete r.roughness,delete r.metalness,delete r.roughnessMap,delete r.metalnessMap,r.specular={value:new Ce.Color().setHex(1118481)},r.glossiness={value:.5},r.specularMap={value:null},r.glossinessMap={value:null},e.vertexShader=o.vertexShader,e.fragmentShader=i,e.uniforms=r,e.defines={STANDARD:""},e.color=new Ce.Color(1,1,1),e.opacity=1;var s=[];if(Array.isArray(a.diffuseFactor)){var l=a.diffuseFactor;e.color.fromArray(l),e.opacity=l[3]}if(void 0!==a.diffuseTexture&&s.push(n.assignTexture(e,"map",a.diffuseTexture)),e.emissive=new Ce.Color(0,0,0),e.glossiness=void 0===a.glossinessFactor?1:a.glossinessFactor,e.specular=new Ce.Color(1,1,1),Array.isArray(a.specularFactor)&&e.specular.fromArray(a.specularFactor),void 0!==a.specularGlossinessTexture){var d=a.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",d)),s.push(n.assignTexture(e,"specularMap",d))}return Promise.all(s)},createMaterial:function(e){var t=new Ce.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,a=0,o=n.length,r;a<o;a++)r=e[n[a]],t[n[a]]=r&&r.isColor?r.clone():r;return t},refreshUniforms:function(e,t,n,a,o){if(!0===o.isGLTFSpecularGlossinessMaterial){var r=o.uniforms,i=o.defines;r.opacity.value=o.opacity,r.diffuse.value.copy(o.color),r.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),r.map.value=o.map,r.specularMap.value=o.specularMap,r.alphaMap.value=o.alphaMap,r.lightMap.value=o.lightMap,r.lightMapIntensity.value=o.lightMapIntensity,r.aoMap.value=o.aoMap,r.aoMapIntensity.value=o.aoMapIntensity;var s;o.map?s=o.map:o.specularMap?s=o.specularMap:o.displacementMap?s=o.displacementMap:o.normalMap?s=o.normalMap:o.bumpMap?s=o.bumpMap:o.glossinessMap?s=o.glossinessMap:o.alphaMap?s=o.alphaMap:o.emissiveMap&&(s=o.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),r.uvTransform.value.copy(s.matrix)),o.envMap&&(r.envMap.value=o.envMap,r.envMapIntensity.value=o.envMapIntensity,r.flipEnvMap.value=o.envMap.isCubeTexture?-1:1,r.reflectivity.value=o.reflectivity,r.refractionRatio.value=o.refractionRatio,r.maxMipLevel.value=e.properties.get(o.envMap).__maxMipLevel),r.specular.value.copy(o.specular),r.glossiness.value=o.glossiness,r.glossinessMap.value=o.glossinessMap,r.emissiveMap.value=o.emissiveMap,r.bumpMap.value=o.bumpMap,r.normalMap.value=o.normalMap,r.displacementMap.value=o.displacementMap,r.displacementScale.value=o.displacementScale,r.displacementBias.value=o.displacementBias,null!==r.glossinessMap.value&&void 0===i.USE_GLOSSINESSMAP&&(i.USE_GLOSSINESSMAP="",i.USE_ROUGHNESSMAP=""),null===r.glossinessMap.value&&void 0!==i.USE_GLOSSINESSMAP&&(delete i.USE_GLOSSINESSMAP,delete i.USE_ROUGHNESSMAP)}}}}function c(e,t,n,a){Ce.Interpolant.call(this,e,t,n,a)}function u(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}function g(){return F=F||new Ce.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ce.FrontSide}),F}function p(e,t,n){for(var a in n.extensions)void 0===e[a]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[a]=n.extensions[a])}function m(e,n){void 0!==n.extras&&("object"===t(n.extras)?Object.assign(e.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function f(e,t,n){for(var a=!1,o=!1,r=0,s=t.length,l;r<s&&(l=t[r],void 0!==l.POSITION&&(a=!0),void 0!==l.NORMAL&&(o=!0),!(a&&o));r++);if(!a&&!o)return Promise.resolve(e);for(var d=[],c=[],r=0,s=t.length,l;r<s;r++){if(l=t[r],a){var u=void 0===l.POSITION?e.attributes.position:n.getDependency("accessor",l.POSITION);d.push(u)}if(o){var u=void 0===l.NORMAL?e.attributes.normal:n.getDependency("accessor",l.NORMAL);c.push(u)}}return Promise.all([Promise.all(d),Promise.all(c)]).then(function(n){for(var r=n[0],s=n[1],l=0,d=r.length;l<d;l++)e.attributes.position!==r[l]&&(r[l]=y(r[l]));for(var l=0,d=s.length;l<d;l++)e.attributes.normal!==s[l]&&(s[l]=y(s[l]));for(var l=0,d=t.length;l<d;l++){var c=t[l],u="morphTarget"+l;if(a&&void 0!==c.POSITION){var g=r[l];g.name=u;for(var p=e.attributes.position,m=0,f=g.count;m<f;m++)g.setXYZ(m,g.getX(m)+p.getX(m),g.getY(m)+p.getY(m),g.getZ(m)+p.getZ(m))}if(o&&void 0!==c.NORMAL){var v=s[l];v.name=u;for(var A=e.attributes.normal,m=0,f=v.count;m<f;m++)v.setXYZ(m,v.getX(m)+A.getX(m),v.getY(m)+A.getY(m),v.getZ(m)+A.getZ(m))}}return a&&(e.morphAttributes.position=r),o&&(e.morphAttributes.normal=s),e})}function v(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,a=t.weights.length;n<a;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var o=t.extras.targetNames;if(e.morphTargetInfluences.length===o.length){e.morphTargetDictionary={};for(var n=0,a=o.length;n<a;n++)e.morphTargetDictionary[o[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function A(e){var t=e.extensions&&e.extensions[b.KHR_DRACO_MESH_COMPRESSION],n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+h(t.attributes):e.indices+":"+h(e.attributes)+":"+e.mode,n}function h(e){for(var t="",n=Object.keys(e).sort(),a=0,o=n.length;a<o;a++)t+=n[a]+":"+e[n[a]]+";";return t}function y(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,a=e.array.slice(0,t*n),o=0,r=0;o<t;++o)a[r++]=e.getX(o),2<=n&&(a[r++]=e.getY(o)),3<=n&&(a[r++]=e.getZ(o)),4<=n&&(a[r++]=e.getW(o));return new Ce.BufferAttribute(a,n,e.normalized)}return e.clone()}function x(e,t,a){this.json=e||{},this.extensions=t||{},this.options=a||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new Ce.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Ce.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function C(e,t,n){function a(t,a){return n.getDependency("accessor",t).then(function(t){e.addAttribute(a,t)})}var o=t.attributes,r=[];for(var i in o){var s=P[i]||i.toLowerCase();s in e.attributes||r.push(a(o[i],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(l)}return m(e,t),Promise.all(r).then(function(){return void 0===t.targets?e:f(e,t.targets,n)})}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(t,n,a,o){var r=this,i;i=void 0===this.resourcePath?void 0===this.path?Ce.LoaderUtils.extractUrlBase(t):this.path:this.resourcePath,r.manager.itemStart(t);var s=function(n){o?o(n):console.error(n),r.manager.itemError(t),r.manager.itemEnd(t)},l=new Ce.FileLoader(r.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),"use-credentials"===r.crossOrigin&&l.setWithCredentials(!0),l.load(t,function(e){try{r.parse(e,i,function(e){n(e),r.manager.itemEnd(t)},s)}catch(t){s(t)}},a,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,n,c){var u={},g;if("string"==typeof e)g=e;else{var p=Ce.LoaderUtils.decodeText(new Uint8Array(e,0,4));if(p===E){try{u[b.KHR_BINARY_GLTF]=new i(e)}catch(e){return void(c&&c(e))}g=u[b.KHR_BINARY_GLTF].content}else g=Ce.LoaderUtils.decodeText(new Uint8Array(e))}var m=JSON.parse(g);if(void 0===m.asset||2>m.asset.version[0])return void(c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")));if(m.extensionsUsed)for(var f=0;f<m.extensionsUsed.length;++f){var v=m.extensionsUsed[f],A=m.extensionsRequired||[];v===b.KHR_LIGHTS_PUNCTUAL?u[v]=new o(m):v===b.KHR_MATERIALS_UNLIT?u[v]=new r:v===b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS?u[v]=new d:v===b.KHR_DRACO_MESH_COMPRESSION?u[v]=new s(m,this.dracoLoader):v===b.MSFT_TEXTURE_DDS?u[b.MSFT_TEXTURE_DDS]=new a(this.ddsLoader):v===b.KHR_TEXTURE_TRANSFORM?u[b.KHR_TEXTURE_TRANSFORM]=new l:0<=A.indexOf(v)&&console.warn("THREE.GLTFLoader: Unknown extension \""+v+"\".")}var h=new x(m,u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});h.parse(n,c)}};var b={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};o.prototype.loadLight=function(e){var t=this.lightDefs[e],n=new Ce.Color(16777215),a;void 0!==t.color&&n.fromArray(t.color);var o=void 0===t.range?0:t.range;switch(t.type){case"directional":a=new Ce.DirectionalLight(n),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Ce.PointLight(n),a.distance=o;break;case"spot":a=new Ce.SpotLight(n),a.distance=o,t.spot=t.spot||{},t.spot.innerConeAngle=void 0===t.spot.innerConeAngle?0:t.spot.innerConeAngle,t.spot.outerConeAngle=void 0===t.spot.outerConeAngle?pe/4:t.spot.outerConeAngle,a.angle=t.spot.outerConeAngle,a.penumbra=1-t.spot.innerConeAngle/t.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type, \""+t.type+"\".");}return a.position.set(0,0,0),a.decay=2,void 0!==t.intensity&&(a.intensity=t.intensity),a.name=t.name||"light_"+e,Promise.resolve(a)},r.prototype.getMaterialType=function(){return Ce.MeshBasicMaterial},r.prototype.extendParams=function(e,t,n){var a=[];e.color=new Ce.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var r=o.baseColorFactor;e.color.fromArray(r),e.opacity=r[3]}void 0!==o.baseColorTexture&&a.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(a)};var E="glTF",S={JSON:1313821514,BIN:5130562};s.prototype.decodePrimitive=function(e,t){var n=this.json,a=this.dracoLoader,o=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,i={},s={},l={};for(var d in r){var c=P[d]||d.toLowerCase();i[c]=r[d]}for(d in e.attributes){var c=P[d]||d.toLowerCase();if(void 0!==r[d]){var u=n.accessors[e.attributes[d]],g=M[u.componentType];l[c]=g,s[c]=!0===u.normalized}}return t.getDependency("bufferView",o).then(function(e){return new Promise(function(t){a.decodeDracoFile(e,function(e){for(var n in e.attributes){var a=e.attributes[n],o=s[n];void 0!==o&&(a.normalized=o)}t(e)},i,l)})})},l.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn("THREE.GLTFLoader: Custom UV sets in \""+this.name+"\" extension not yet supported."),e.needsUpdate=!0,e},c.prototype=Object.create(Ce.Interpolant.prototype),c.prototype.constructor=c,c.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=0;o!==a;o++)t[o]=n[3*(e*a)+a+o];return t},c.prototype.beforeStart_=c.prototype.copySampleValue_,c.prototype.afterEnd_=c.prototype.copySampleValue_,c.prototype.interpolate_=function(e,n,a,t){for(var o=this.resultBuffer,r=this.sampleValues,s=this.valueSize,l=3*s,d=t-n,c=(a-n)/d,u=c*c,g=u*c,p=e*l,m=p-l,f=-2*g+3*u,v=g-u,A=0;A!==s;A++){var h=r[m+A+s],y=r[m+A+2*s]*d,x=r[p+A+s],C=r[p+A]*d;o[A]=(1-f)*h+(v-u+c)*y+f*x+v*C}return o};var T={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},M={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k={9728:Ce.NearestFilter,9729:Ce.LinearFilter,9984:Ce.NearestMipmapNearestFilter,9985:Ce.LinearMipmapNearestFilter,9986:Ce.NearestMipmapLinearFilter,9987:Ce.LinearMipmapLinearFilter},D={33071:Ce.ClampToEdgeWrapping,33648:Ce.MirroredRepeatWrapping,10497:Ce.RepeatWrapping},B={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},P={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},w={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},L={CUBICSPLINE:void 0,LINEAR:Ce.InterpolateLinear,STEP:Ce.InterpolateDiscrete},R={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},I={"image/png":Ce.RGBAFormat,"image/jpeg":Ce.RGBFormat},F;return x.prototype.parse=function(e,t){var n=this,a=this.json,o=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var r={scene:t[0][a.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:a.asset,parser:n,userData:{}};p(o,r,a),m(r,a),e(r)})["catch"](t)},x.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],a={},o={},r=0,s=t.length,l;r<s;r++){l=t[r].joints;for(var d=0,c=l.length;d<c;d++)e[l[d]].isBone=!0}for(var u=0,g=e.length,p;u<g;u++)p=e[u],void 0!==p.mesh&&(void 0===a[p.mesh]&&(a[p.mesh]=o[p.mesh]=0),a[p.mesh]++,void 0!==p.skin&&(n[p.mesh].isSkinnedMesh=!0));this.json.meshReferences=a,this.json.meshUses=o},x.prototype.getDependency=function(e,t){var n=e+":"+t,a=this.cache.get(n);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this.loadNode(t);break;case"mesh":a=this.loadMesh(t);break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this.loadBufferView(t);break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this.loadMaterial(t);break;case"texture":a=this.loadTexture(t);break;case"skin":a=this.loadSkin(t);break;case"animation":a=this.loadAnimation(t);break;case"camera":a=this.loadCamera(t);break;case"light":a=this.extensions[b.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e);}this.cache.add(n,a)}return a},x.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,a=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(a.map(function(t,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t},x.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[b.KHR_BINARY_GLTF].body);var a=this.options;return new Promise(function(e,o){n.load(u(t.uri,a.path),e,void 0,function(){o(new Error("THREE.GLTFLoader: Failed to load buffer \""+t.uri+"\"."))})})},x.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,a=t.byteOffset||0;return e.slice(a,a+n)})},x.prototype.loadAccessor=function(e){var t=this,n=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse)return Promise.resolve(null);var o=[];return void 0===a.bufferView?o.push(null):o.push(this.getDependency("bufferView",a.bufferView)),void 0!==a.sparse&&(o.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(o).then(function(e){var o=e[0],r=B[a.type],s=M[a.componentType],l=s.BYTES_PER_ELEMENT,d=a.byteOffset||0,c=void 0===a.bufferView?void 0:n.bufferViews[a.bufferView].byteStride,u=!0===a.normalized,g,p;if(c&&c!==l*r){var m=he(d/c),f="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+m+":"+a.count,v=t.cache.get(f);v||(g=new s(o,m*c,a.count*c/l),v=new Ce.InterleavedBuffer(g,c/l),t.cache.add(f,v)),p=new Ce.InterleavedBufferAttribute(v,r,d%c/l,u)}else g=null===o?new s(a.count*r):new s(o,d,a.count*r),p=new Ce.BufferAttribute(g,r,u);if(void 0!==a.sparse){var A=B.SCALAR,h=M[a.sparse.indices.componentType],y=a.sparse.indices.byteOffset||0,x=a.sparse.values.byteOffset||0,C=new h(e[1],y,a.sparse.count*A),b=new s(e[2],x,a.sparse.count*r);null!==o&&p.setArray(p.array.slice());for(var E=0,S=C.length,T;E<S;E++)if(T=C[E],p.setX(T,b[E*r]),2<=r&&p.setY(T,b[E*r+1]),3<=r&&p.setZ(T,b[E*r+2]),4<=r&&p.setW(T,b[E*r+3]),5<=r)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}return p})},x.prototype.loadTexture=function(e){var t=this,n=this.json,a=this.options,o=this.textureLoader,r=window.URL||window.webkitURL,i=n.textures[e],s=i.extensions||{},l;l=s[b.MSFT_TEXTURE_DDS]?n.images[s[b.MSFT_TEXTURE_DDS].source]:n.images[i.source];var d=l.uri,c=!1;return void 0!==l.bufferView&&(d=t.getDependency("bufferView",l.bufferView).then(function(e){c=!0;var t=new Blob([e],{type:l.mimeType});return d=r.createObjectURL(t),d})),Promise.resolve(d).then(function(e){var n=Ce.Loader.Handlers.get(e);return n||(n=s[b.MSFT_TEXTURE_DDS]?t.extensions[b.MSFT_TEXTURE_DDS].ddsLoader:o),new Promise(function(t,o){n.load(u(e,a.path),t,void 0,o)})}).then(function(e){!0===c&&r.revokeObjectURL(d),e.flipY=!1,void 0!==i.name&&(e.name=i.name),l.mimeType in I&&(e.format=I[l.mimeType]);var t=n.samplers||{},a=t[i.sampler]||{};return e.magFilter=k[a.magFilter]||Ce.LinearFilter,e.minFilter=k[a.minFilter]||Ce.LinearMipmapLinearFilter,e.wrapS=D[a.wrapS]||Ce.RepeatWrapping,e.wrapT=D[a.wrapT]||Ce.RepeatWrapping,e})},x.prototype.assignTexture=function(e,t,n){var a=this;return this.getDependency("texture",n.index).then(function(o){if(o.isCompressedTexture||("aoMap"===t||"emissiveMap"===t||"metalnessMap"===t||"normalMap"===t||"roughnessMap"===t?o.format=Ce.RGBFormat:void 0),a.extensions[b.KHR_TEXTURE_TRANSFORM]){var r=void 0===n.extensions?void 0:n.extensions[b.KHR_TEXTURE_TRANSFORM];r&&(o=a.extensions[b.KHR_TEXTURE_TRANSFORM].extendTexture(o,r))}e[t]=o})},x.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,a=this.extensions,o=void 0!==t.attributes.tangent,r=void 0!==t.attributes.color,i=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,l=0<Object.keys(t.morphAttributes).length,d=l&&void 0!==t.morphAttributes.normal;if(e.isPoints){var c="PointsMaterial:"+n.uuid,u=this.cache.get(c);u||(u=new Ce.PointsMaterial,Ce.Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.lights=!1,u.sizeAttenuation=!1,this.cache.add(c,u)),n=u}else if(e.isLine){var c="LineBasicMaterial:"+n.uuid,g=this.cache.get(c);g||(g=new Ce.LineBasicMaterial,Ce.Material.prototype.copy.call(g,n),g.color.copy(n.color),g.lights=!1,this.cache.add(c,g)),n=g}if(o||r||i||s||l){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),s&&(c+="skinning:"),o&&(c+="vertex-tangents:"),r&&(c+="vertex-colors:"),i&&(c+="flat-shading:"),l&&(c+="morph-targets:"),d&&(c+="morph-normals:");var p=this.cache.get(c);p||(p=n.isGLTFSpecularGlossinessMaterial?a[b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),s&&(p.skinning=!0),o&&(p.vertexTangents=!0),r&&(p.vertexColors=Ce.VertexColors),i&&(p.flatShading=!0),l&&(p.morphTargets=!0),d&&(p.morphNormals=!0),this.cache.add(c,p)),n=p}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new Ce.BufferAttribute(t.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=a[b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=n},x.prototype.loadMaterial=function(e){var t=this,n=this.json,a=this.extensions,o=n.materials[e],r={},i=o.extensions||{},s=[],l;if(i[b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var d=a[b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];l=d.getMaterialType(),s.push(d.extendParams(r,o,t))}else if(i[b.KHR_MATERIALS_UNLIT]){var c=a[b.KHR_MATERIALS_UNLIT];l=c.getMaterialType(),s.push(c.extendParams(r,o,t))}else{l=Ce.MeshStandardMaterial;var u=o.pbrMetallicRoughness||{};if(r.color=new Ce.Color(1,1,1),r.opacity=1,Array.isArray(u.baseColorFactor)){var g=u.baseColorFactor;r.color.fromArray(g),r.opacity=g[3]}void 0!==u.baseColorTexture&&s.push(t.assignTexture(r,"map",u.baseColorTexture)),r.metalness=void 0===u.metallicFactor?1:u.metallicFactor,r.roughness=void 0===u.roughnessFactor?1:u.roughnessFactor,void 0!==u.metallicRoughnessTexture&&(s.push(t.assignTexture(r,"metalnessMap",u.metallicRoughnessTexture)),s.push(t.assignTexture(r,"roughnessMap",u.metallicRoughnessTexture)))}!0===o.doubleSided&&(r.side=Ce.DoubleSide);var f=o.alphaMode||R.OPAQUE;return f===R.BLEND?r.transparent=!0:(r.transparent=!1,f===R.MASK&&(r.alphaTest=void 0===o.alphaCutoff?.5:o.alphaCutoff)),void 0!==o.normalTexture&&l!==Ce.MeshBasicMaterial&&(s.push(t.assignTexture(r,"normalMap",o.normalTexture)),r.normalScale=new Ce.Vector2(1,1),void 0!==o.normalTexture.scale&&r.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&l!==Ce.MeshBasicMaterial&&(s.push(t.assignTexture(r,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(r.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&l!==Ce.MeshBasicMaterial&&(r.emissive=new Ce.Color().fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&l!==Ce.MeshBasicMaterial&&s.push(t.assignTexture(r,"emissiveMap",o.emissiveTexture)),Promise.all(s).then(function(){var e;return e=l===Ce.ShaderMaterial?a[b.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(r):new l(r),void 0!==o.name&&(e.name=o.name),e.map&&(e.map.encoding=Ce.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=Ce.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=Ce.sRGBEncoding),m(e,o),o.extensions&&p(a,e,o),e})},x.prototype.loadGeometries=function(e){function t(e){return a[b.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then(function(t){return C(t,e,n)})}for(var n=this,a=this.extensions,o=this.primitiveCache,r=[],s=0,l=e.length;s<l;s++){var d=e[s],c=A(d),u=o[c];if(u)r.push(u.promise);else{var g;g=d.extensions&&d.extensions[b.KHR_DRACO_MESH_COMPRESSION]?t(d):C(new Ce.BufferGeometry,d,n),o[c]={primitive:d,promise:g},r.push(g)}}return Promise.all(r)},x.prototype.loadMesh=function(e){for(var t=this,n=this.json,a=n.meshes[e],o=a.primitives,r=[],s=0,l=o.length,d;s<l;s++)d=void 0===o[s].material?g():this.getDependency("material",o[s].material),r.push(d);return Promise.all(r).then(function(n){return t.loadGeometries(o).then(function(r){for(var s=[],l=0,d=r.length;l<d;l++){var c=r[l],u=o[l],g=n[l],p;if(u.mode===T.TRIANGLES||u.mode===T.TRIANGLE_STRIP||u.mode===T.TRIANGLE_FAN||void 0===u.mode)p=!0===a.isSkinnedMesh?new Ce.SkinnedMesh(c,g):new Ce.Mesh(c,g),!0!==p.isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),u.mode===T.TRIANGLE_STRIP?p.drawMode=Ce.TriangleStripDrawMode:u.mode===T.TRIANGLE_FAN&&(p.drawMode=Ce.TriangleFanDrawMode);else if(u.mode===T.LINES)p=new Ce.LineSegments(c,g);else if(u.mode===T.LINE_STRIP)p=new Ce.Line(c,g);else if(u.mode===T.LINE_LOOP)p=new Ce.LineLoop(c,g);else if(u.mode===T.POINTS)p=new Ce.Points(c,g);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);0<Object.keys(p.geometry.morphAttributes).length&&v(p,a),p.name=a.name||"mesh_"+e,1<r.length&&(p.name+="_"+l),m(p,a),t.assignFinalMaterial(p),s.push(p)}if(1===s.length)return s[0];for(var f=new Ce.Group,l=0,d=s.length;l<d;l++)f.add(s[l]);return f})})},x.prototype.loadCamera=function(e){var t=this.json.cameras[e],n=t[t.type],a;return n?("perspective"===t.type?a=new Ce.PerspectiveCamera(Ce.Math.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===t.type&&(a=new Ce.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==t.name&&(a.name=t.name),m(a,t),Promise.resolve(a)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")},x.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},x.prototype.loadAnimation=function(e){for(var t=this.json,n=t.animations[e],a=[],o=[],r=[],s=[],l=[],d=0,u=n.channels.length;d<u;d++){var g=n.channels[d],p=n.samplers[g.sampler],m=g.target,f=void 0===m.node?m.id:m.node,v=void 0===n.parameters?p.input:n.parameters[p.input],A=void 0===n.parameters?p.output:n.parameters[p.output];a.push(this.getDependency("node",f)),o.push(this.getDependency("accessor",v)),r.push(this.getDependency("accessor",A)),s.push(p),l.push(m)}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(r),Promise.all(s),Promise.all(l)]).then(function(t){for(var a=t[0],o=t[1],r=t[2],s=t[3],l=t[4],d=[],u=0,g=a.length;u<g;u++){var p=a[u],m=o[u],f=r[u],v=s[u],A=l[u];if(void 0!==p){p.updateMatrix(),p.matrixAutoUpdate=!0;var h;switch(w[A.path]){case w.weights:h=Ce.NumberKeyframeTrack;break;case w.rotation:h=Ce.QuaternionKeyframeTrack;break;case w.position:case w.scale:default:h=Ce.VectorKeyframeTrack;}var y=p.name?p.name:p.uuid,x=void 0===v.interpolation?Ce.InterpolateLinear:L[v.interpolation],C=[];w[A.path]===w.weights?p.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&C.push(e.name?e.name:e.uuid)}):C.push(y);var b=f.array;if(f.normalized){var E;if(b.constructor===Int8Array)E=1/127;else if(b.constructor===Uint8Array)E=1/255;else if(b.constructor==Int16Array)E=1/32767;else if(b.constructor===Uint16Array)E=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var S=new Float32Array(b.length),T=0,M=b.length;T<M;T++)S[T]=b[T]*E;b=S}for(var T=0,M=C.length,k;T<M;T++)k=new h(C[T]+"."+w[A.path],m.array,b,x),"CUBICSPLINE"===v.interpolation&&(k.createInterpolant=function(e){return new c(this.times,this.values,this.getValueSize()/3,e)},k.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),d.push(k)}}var D=void 0===n.name?"animation_"+e:n.name;return new Ce.AnimationClip(D,void 0,d)})},x.prototype.loadNode=function(e){var t=this.json,n=this.extensions,a=this,o=t.meshReferences,r=t.meshUses,s=t.nodes[e];return function(){var e=[];return void 0!==s.mesh&&e.push(a.getDependency("mesh",s.mesh).then(function(e){var t;if(1<o[s.mesh]){var n=r[s.mesh]++;t=e.clone(),t.name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var a=0,l=t.children.length;a<l;a++)t.children[a].name+="_instance_"+n,t.children[a].onBeforeRender=e.children[a].onBeforeRender}else t=e;return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]}),t})),void 0!==s.camera&&e.push(a.getDependency("camera",s.camera)),s.extensions&&s.extensions[b.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[b.KHR_LIGHTS_PUNCTUAL].light&&e.push(a.getDependency("light",s.extensions[b.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(e)}().then(function(e){var t;if(t=!0===s.isBone?new Ce.Bone:1<e.length?new Ce.Group:1===e.length?e[0]:new Ce.Object3D,t!==e[0])for(var a=0,o=e.length;a<o;a++)t.add(e[a]);if(void 0!==s.name&&(t.userData.name=s.name,t.name=Ce.PropertyBinding.sanitizeNodeName(s.name)),m(t,s),s.extensions&&p(n,t,s),void 0!==s.matrix){var r=new Ce.Matrix4;r.fromArray(s.matrix),t.applyMatrix(r)}else void 0!==s.translation&&t.position.fromArray(s.translation),void 0!==s.rotation&&t.quaternion.fromArray(s.rotation),void 0!==s.scale&&t.scale.fromArray(s.scale);return t})},x.prototype.loadScene=function(){function e(t,n,a,o){var r=a.nodes[t];return o.getDependency("node",t).then(function(e){if(void 0===r.skin)return e;var t;return o.getDependency("skin",r.skin).then(function(e){t=e;for(var n=[],a=0,r=t.joints.length;a<r;a++)n.push(o.getDependency("node",t.joints[a]));return Promise.all(n)}).then(function(n){return e.traverse(function(e){if(e.isMesh){for(var a=[],o=[],r=0,i=n.length,s;void 0>r;r++)if(s=n[r],s){a.push(s);var l=new Ce.Matrix4;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*r),o.push(l)}else console.warn("THREE.GLTFLoader: Joint \"%s\" could not be found.",t.joints[r]);e.bind(new Ce.Skeleton(a,o),e.matrixWorld)}}),e})}).then(function(t){n.add(t);var s=[];if(r.children)for(var l=r.children,d=0,c=l.length,u;d<c;d++)u=l[d],s.push(e(u,t,a,o));return Promise.all(s)})}return function(t){var n=this.json,a=this.extensions,o=this.json.scenes[t],r=this,s=new Ce.Scene;void 0!==o.name&&(s.name=o.name),m(s,o),o.extensions&&p(a,s,o);for(var l=o.nodes||[],d=[],c=0,u=l.length;c<u;c++)d.push(e(l[c],s,n,r));return Promise.all(d).then(function(){return s})}}(),e}(),va=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"god-rays",e)),t.pass=null,t.effect=null,t.sun=null,t.light=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r=new e.TextureLoader(a),i=new fa(a),s="textures/skies/starry/",l=".png",d=[s+"px"+l,s+"nx"+l,s+"py"+l,s+"ny"+l,s+"pz"+l,s+"nz"+l];return new Promise(function(e,s){0===n.size?(a.onError=s,a.onProgress=function(t,n,a){n===a&&e()},o.load(d,function(e){n.set("sky",e)}),i.load("models/tree/scene.gltf",function(e){e.scene.scale.multiplyScalar(2.5),e.scene.position.set(0,-2.3,0),e.scene.rotation.set(0,3,0),n.set("model",e.scene)}),r.load("textures/sun.png",function(e){n.set("sun-diffuse",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-6,-1,-6),this.camera=r;var i=new e.Vector3(0,.5,0),s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.rotation=.00125,s.settings.sensitivity.zoom=1,s.lookAt(i),this.controls=s,t.background=n.get("sky");var l=new e.AmbientLight(8421504),d=new e.DirectionalLight(16759722);d.position.set(75,25,100),d.target=t,this.light=d,t.add(l),t.add(d),t.add(n.get("model"));var c=new e.MeshBasicMaterial({color:16768426,transparent:!0,fog:!1}),u=new e.SphereBufferGeometry(16,32,32),g=new e.Mesh(u,c);g.frustumCulled=!1;var p=new e.Group;p.position.copy(this.light.position),p.add(g),g.matrixAutoUpdate=!1,this.sun=g;var f=new Tn(n.get("smaa-search"),n.get("smaa-area"));f.colorEdgesMaterial.setEdgeDetectionThreshold(.065);var v=new m(r,g,{height:720,kernelSize:Et.SMALL,density:.96,decay:.92,weight:.3,exposure:.54,samples:60,clampMax:1});v.dithering=!0,this.effect=v;var A=new Wt(r,f,v);this.pass=A,this.renderPass.renderToScreen=!1,A.renderToScreen=!0,a.addPass(A)}},{key:"registerOptions",value:function(e){var t=this.sun,n=this.light,a=this.pass,o=this.effect,r=o.godRaysMaterial.uniforms,i=o.blendMode,s={resolution:o.height,blurriness:o.blurPass.kernelSize+1,density:r.density.value,decay:r.decay.value,weight:r.weight.value,exposure:r.exposure.value,clampMax:r.clampMax.value,samples:o.samples,color:t.material.color.getHex(),opacity:i.opacity.value,"blend mode":i.blendFunction};e.add(s,"resolution",[240,360,480,720,1080]).onChange(function(){o.height=me(s.resolution)}),e.add(o,"dithering"),e.add(s,"blurriness").min(Et.VERY_SMALL).max(Et.HUGE+1).step(1).onChange(function(){o.blur=0<s.blurriness,o.blurPass.kernelSize=s.blurriness-1}),e.add(s,"density").min(0).max(1).step(.01).onChange(function(){r.density.value=s.density}),e.add(s,"decay").min(0).max(1).step(.01).onChange(function(){r.decay.value=s.decay}),e.add(s,"weight").min(0).max(1).step(.01).onChange(function(){r.weight.value=s.weight}),e.add(s,"exposure").min(0).max(1).step(.01).onChange(function(){r.exposure.value=s.exposure}),e.add(s,"clampMax").min(0).max(1).step(.01).onChange(function(){r.clampMax.value=s.clampMax}),e.add(o,"samples").min(15).max(200).step(1),e.addColor(s,"color").onChange(function(){t.material.color.setHex(s.color),n.color.setHex(s.color)}),e.add(s,"opacity").min(0).max(1).step(.01).onChange(function(){i.opacity.value=s.opacity}),e.add(s,"blend mode",Ht).onChange(function(){i.blendFunction=me(s["blend mode"]),a.recompile()})}}]),a}(ia),Aa=new e.Vector2,ha=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"outline",e)),t.raycaster=null,t.selectedObject=null,t.effect=null,t.pass=null,t}return r(a,t),o(a,[{key:"raycast",value:function(e){var t=this.raycaster;Aa.x=2*(e.clientX/window.innerWidth)-1,Aa.y=2*-(e.clientY/window.innerHeight)+1,t.setFromCamera(Aa,this.camera);var n=t.intersectObjects(this.scene.children);if(this.selectedObject=null,0<n.length){var a=n[0];void 0===a.object?console.warn("Encountered an undefined object",n):this.selectedObject=a.object}}},{key:"handleSelection",value:function(){var e=this.effect.selection,t=this.selectedObject;null!==t&&(e.has(t)?e["delete"](t):e.add(t))}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.raycast(e);break;case"mousedown":this.handleSelection();}}},{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),i="textures/skies/sunset/",s=".png",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(e,i){0===n.size?(a.onError=i,a.onProgress=function(t,n,a){n===a&&e()},r.load(l,function(e){n.set("sky",e)}),o.load("textures/pattern.png",function(e){n.set("pattern-color",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-4,1.25,-5),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color,0),t.background=n.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=[],c=new e.Mesh(new e.SphereBufferGeometry(1,32,32),new e.MeshPhongMaterial({color:16776960}));c.position.set(2,0,-2),t.add(c),d.push(c),c=new e.Mesh(new e.ConeBufferGeometry(1,1,32),new e.MeshPhongMaterial({color:65280})),c.position.set(-2,0,2),t.add(c),d.push(c),c=new e.Mesh(new e.OctahedronBufferGeometry(),new e.MeshPhongMaterial({color:16711935})),c.position.set(2,0,2),t.add(c),d.push(c),c=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({color:65535})),c.position.set(-2,0,-2),t.add(c),this.raycaster=new e.Raycaster,o.domElement.addEventListener("mousemove",this),o.domElement.addEventListener("mousedown",this);var u=new Tn(n.get("smaa-search"),n.get("smaa-area"));u.colorEdgesMaterial.setEdgeDetectionThreshold(.05);var g=new vn(t,r,{blendFunction:Ht.SCREEN,edgeStrength:2.5,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,resolutionScale:1,height:480,blur:!1,xRay:!0});g.selection.set(d);var p=new Wt(r,u),m=new Wt(r,g);this.renderPass.renderToScreen=!1,p.renderToScreen=!0,this.effect=g,this.pass=m,a.addPass(m),a.addPass(p)}},{key:"registerOptions",value:function(e){var t=this.assets,n=this.pass,a=this.effect,o=a.uniforms,r=a.blendMode,i={resolution:a.height,blurriness:0,"use pattern":!1,"pattern scale":60,"pulse speed":a.pulseSpeed,"edge strength":o.get("edgeStrength").value,"visible edge":o.get("visibleEdgeColor").value.getHex(),"hidden edge":o.get("hiddenEdgeColor").value.getHex(),"x-ray":!0,opacity:r.opacity.value,"blend mode":r.blendFunction};e.add(i,"resolution",[240,360,480,720,1080]).onChange(function(){a.height=me(i.resolution)}),e.add(a,"dithering"),e.add(i,"blurriness").min(Et.VERY_SMALL).max(Et.HUGE+1).step(1).onChange(function(){a.blur=0<i.blurriness,a.blurPass.kernelSize=i.blurriness-1}),e.add(i,"use pattern").onChange(function(){i["use pattern"]?(a.setPatternTexture(t.get("pattern-color")),o.get("patternScale").value=i["pattern scale"]):a.setPatternTexture(null),n.recompile()}),e.add(i,"pattern scale").min(20).max(100).step(.1).onChange(function(){o.has("patternScale")&&(o.get("patternScale").value=i["pattern scale"])}),e.add(i,"edge strength").min(0).max(10).step(.01).onChange(function(){o.get("edgeStrength").value=i["edge strength"]}),e.add(i,"pulse speed").min(0).max(2).step(.01).onChange(function(){a.pulseSpeed=i["pulse speed"]}),e.addColor(i,"visible edge").onChange(function(){o.get("visibleEdgeColor").value.setHex(i["visible edge"])}),e.addColor(i,"hidden edge").onChange(function(){o.get("hiddenEdgeColor").value.setHex(i["hidden edge"])}),e.add(a,"xRay").onChange(function(){return n.recompile()}),e.add(i,"opacity").min(0).max(1).step(.01).onChange(function(){r.opacity.value=i.opacity}),e.add(i,"blend mode",Ht).onChange(function(){r.blendFunction=me(i["blend mode"]),n.recompile()})}},{key:"reset",value:function(){h(i(a.prototype),"reset",this).call(this);var e=this.composer.renderer.domElement;return e.removeEventListener("mousemove",this),e.removeEventListener("mousedown",this),this}}]),a}(ia),ya=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"pattern",e)),t.dotScreenEffect=null,t.gridEffect=null,t.scanlineEffect=null,t.pass=null,t.object=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this.assets,n=this.loadingManager,a=new e.CubeTextureLoader(n),o="textures/skies/space/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){0===t.size?(n.onError=o,n.onProgress=function(t,n,a){n===a&&e()},a.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,p,m;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),p=new e.Mesh(u,g),p.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),p.position.multiplyScalar(10*Math.random()),p.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),p.scale.multiplyScalar(Math.random()),c.add(p);this.object=c,t.add(c);var f=new dn({blendFunction:Ht.OVERLAY,scale:.9,angle:.58*pe}),v=new de({blendFunction:Ht.SKIP,scale:1.75,lineWidth:.25}),A=new yn({blendFunction:Ht.SKIP,density:1.5}),h=new Wt(r,f,v,A);this.dotScreenEffect=f,this.gridEffect=v,this.scanlineEffect=A,this.pass=h,this.renderPass.renderToScreen=!1,h.renderToScreen=!0,a.addPass(h)}},{key:"render",value:function(e){var t=this.object,n=2*pe;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.dotScreenEffect,a=this.gridEffect,o=this.scanlineEffect,r={dotScreen:{angle:.58*pe,scale:n.uniforms.get("scale").value,opacity:n.blendMode.opacity.value,"blend mode":n.blendMode.blendFunction},grid:{scale:a.getScale(),"line width":a.getLineWidth(),opacity:a.blendMode.opacity.value,"blend mode":a.blendMode.blendFunction},scanline:{density:o.getDensity(),opacity:o.blendMode.opacity.value,"blend mode":o.blendMode.blendFunction}},i=e.addFolder("Dot Screen");i.add(r.dotScreen,"angle").min(0).max(Math.PI).step(.001).onChange(function(){n.setAngle(r.dotScreen.angle)}),i.add(r.dotScreen,"scale").min(0).max(1).step(.01).onChange(function(){n.uniforms.get("scale").value=r.dotScreen.scale}),i.add(r.dotScreen,"opacity").min(0).max(1).step(.01).onChange(function(){n.blendMode.opacity.value=r.dotScreen.opacity}),i.add(r.dotScreen,"blend mode",Ht).onChange(function(){n.blendMode.blendFunction=me(r.dotScreen["blend mode"]),t.recompile()}),i.open(),i=e.addFolder("Grid"),i.add(r.grid,"scale").min(.01).max(3).step(.01).onChange(function(){a.setScale(r.grid.scale)}),i.add(r.grid,"line width").min(0).max(1).step(.01).onChange(function(){a.setLineWidth(r.grid["line width"])}),i.add(r.grid,"opacity").min(0).max(1).step(.01).onChange(function(){a.blendMode.opacity.value=r.grid.opacity}),i.add(r.grid,"blend mode",Ht).onChange(function(){a.blendMode.blendFunction=me(r.grid["blend mode"]),t.recompile()}),i.open(),i=e.addFolder("Scanline"),i.add(r.scanline,"density").min(.001).max(2).step(.001).onChange(function(){o.setDensity(r.scanline.density)}),i.add(r.scanline,"opacity").min(0).max(1).step(.01).onChange(function(){o.blendMode.opacity.value=r.scanline.opacity}),i.add(r.scanline,"blend mode",Ht).onChange(function(){o.blendMode.blendFunction=me(r.scanline["blend mode"]),t.recompile()}),i.open()}}]),a}(ia),xa=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"pixelation",e)),t.effect=null,t.object=null,t.maskPass=null,t.maskObject=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,p,m;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),p=new e.Mesh(u,g),p.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),p.position.multiplyScalar(10*Math.random()),p.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),p.scale.multiplyScalar(Math.random()),c.add(p);this.object=c,t.add(c);var f=new e.Scene;p=new e.Mesh(new e.BoxBufferGeometry(4,4,4)),this.maskObject=p,f.add(p);var v=new Tn(n.get("smaa-search"),n.get("smaa-area")),A=new An(5),h=new Wt(r,A),y=new jt(f,r),x=new Wt(r,v);this.renderPass.renderToScreen=!1,x.renderToScreen=!0,a.addPass(y),a.addPass(h),a.addPass(new zt),a.addPass(x),this.effect=A,this.maskPass=y}},{key:"render",value:function(e){var t=this.object,n=this.maskObject,o=2*pe,r=.001*performance.now();t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=o&&(t.rotation.x-=o),t.rotation.y>=o&&(t.rotation.y-=o),n.position.x=4*ue(r/1.5),n.position.y=4*ge(r),n.rotation.x=r,n.rotation.y=.5*r,h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.effect,n=this.maskPass,a={"use mask":n.enabled,granularity:t.getGranularity()};e.add(a,"granularity").min(0).max(50).step(.1).onChange(function(){t.setGranularity(a.granularity)}),e.add(a,"use mask").onChange(function(){n.enabled=a["use mask"]})}}]),a}(ia),Ca=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"shock-wave",e)),t.effect=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space3/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(5,1,5),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.SphereBufferGeometry(1,64,64),c=new e.MeshBasicMaterial({color:16776960,envMap:n.get("sky")}),u=new e.Mesh(d,c);t.add(u);var g=new Tn(n.get("smaa-search"),n.get("smaa-area")),p=new bn(r,u.position,{speed:1.25,maxRadius:.5,waveSize:.2,amplitude:.05}),m=new Wt(r,p),f=new Wt(r,g);this.renderPass.renderToScreen=!1,f.renderToScreen=!0,this.effect=p,a.addPass(m),a.addPass(f)}},{key:"registerOptions",value:function(e){var t=this.effect,n=t.uniforms,a={size:n.get("size").value,extent:n.get("maxRadius").value,waveSize:n.get("waveSize").value,amplitude:n.get("amplitude").value};e.add(t,"speed").min(0).max(10).step(.001),e.add(a,"size").min(.01).max(2).step(.001).onChange(function(){n.get("size").value=a.size}),e.add(a,"extent").min(0).max(10).step(.001).onChange(function(){n.get("maxRadius").value=a.extent}),e.add(a,"waveSize").min(0).max(2).step(.001).onChange(function(){n.get("waveSize").value=a.waveSize}),e.add(a,"amplitude").min(0).max(.25).step(.001).onChange(function(){n.get("amplitude").value=a.amplitude}),e.add(t,"explode")}}]),a}(ia),ba=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"smaa",e)),t.originalRenderer=null,t.rendererAA=null,t.controls2=null,t.smaaEffect=null,t.pass=null,t.edgesTextureEffect=null,t.weightsTextureEffect=null,t.objectA=null,t.objectB=null,t.objectC=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.composer.renderer.capabilities.getMaxAnisotropy(),a=this.assets,o=this.loadingManager,r=new e.TextureLoader(o),i=new e.CubeTextureLoader(o),s="textures/skies/sunset/",l=".png",d=[s+"px"+l,s+"nx"+l,s+"py"+l,s+"ny"+l,s+"pz"+l,s+"nz"+l];return new Promise(function(s,l){0===a.size?(o.onError=l,o.onProgress=function(e,t,n){t===n&&s()},i.load(d,function(e){a.set("sky",e)}),r.load("textures/crate.jpg",function(t){t.wrapS=t.wrapT=e.RepeatWrapping,t.anisotropy=Ae(4,n),a.set("crate-color",t)}),t.loadSMAAImages()):s()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-3,0,-3),r.lookAt(t.position),this.camera=r,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color);var i=function(t,n,a){var o=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!0});return o.setSize(t.width,t.height),o.setClearColor(n),o.setPixelRatio(a),o}(o.getSize(new e.Vector2),o.getClearColor(),o.getPixelRatio());this.originalRenderer=a.renderer,this.rendererAA=i;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s;var l=s.clone();l.setDom(i.domElement),l.setEnabled(!1),this.controls2=l,t.background=n.get("sky");var d=new e.AmbientLight(6710886),c=new e.DirectionalLight(16759722);c.position.set(1440,200,2e3),c.target.position.copy(t.position),t.add(c),t.add(d);var u=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshBasicMaterial({color:0,wireframe:!0}));u.position.set(1.25,0,-1.25),this.objectA=u,t.add(u),u=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({map:n.get("crate-color")})),u.position.set(-1.25,0,1.25),this.objectB=u,t.add(u),u=new e.Mesh(new e.BoxBufferGeometry(.25,8.25,.25),new e.MeshPhongMaterial({color:855309}));var g=new e.Object3D,p,m,f;p=g.clone();var v=u.clone();v.position.set(-4,0,4),p.add(v),v=u.clone(),v.position.set(4,0,4),p.add(v),v=u.clone(),v.position.set(-4,0,-4),p.add(v),v=u.clone(),v.position.set(4,0,-4),p.add(v),m=p.clone(),m.rotation.set(pe/2,0,0),f=p.clone(),f.rotation.set(0,0,pe/2),g.add(p),g.add(m),g.add(f),g.scale.set(.1,.1,.1),this.objectC=g,t.add(g);var A=new Tn(n.get("smaa-search"),n.get("smaa-area")),h=new Dn({blendFunction:Ht.SKIP,texture:A.renderTargetColorEdges.texture}),y=new Dn({blendFunction:Ht.SKIP,texture:A.renderTargetWeights.texture}),x=new Wt(r,A,h,y);this.renderPass.renderToScreen=!1,x.renderToScreen=!0,this.smaaEffect=A,this.edgesTextureEffect=h,this.weightsTextureEffect=y,this.pass=x,a.addPass(x)}},{key:"render",value:function(e){var t=this.objectA,n=this.objectB,o=this.objectC,r=2*pe;t.rotation.x+=5e-4,t.rotation.y+=.001,n.rotation.copy(t.rotation),o.rotation.copy(t.rotation),t.rotation.x>=r&&(t.rotation.x-=r),t.rotation.y>=r&&(t.rotation.y-=r),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(t){function n(t){var n=o.renderer.getSize(new e.Vector2);t&&o.renderer!==g?(g.setSize(n.width,n.height),o.replaceRenderer(g),p.setEnabled(!1),m.setEnabled(!0).lookAt(p.getTarget())):(u.setSize(n.width,n.height),o.replaceRenderer(u),p.setEnabled(!0).lookAt(m.getTarget()),m.setEnabled(!1))}var a=this.pass,o=this.composer,r=this.renderPass,i=this.smaaEffect,s=this.edgesTextureEffect,l=this.weightsTextureEffect,d=i.blendMode,c=i.colorEdgesMaterial,u=this.originalRenderer,g=this.rendererAA,p=this.controls,m=this.controls2,f={DISABLED:0,BROWSER:1,SMAA_EDGES:2,SMAA_WEIGHTS:3,SMAA:4},v={"AA mode":f.SMAA,preset:Mn.HIGH,"contrast factor":oe(c.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR),opacity:d.opacity.value,"blend mode":d.blendFunction};t.add(v,"AA mode",f).onChange(function(){var e=me(v["AA mode"]);a.enabled=e===f.SMAA||e===f.SMAA_EDGES||e===f.SMAA_WEIGHTS,r.renderToScreen=e===f.DISABLED||e===f.BROWSER,s.blendMode.blendFunction=e===f.SMAA_EDGES?Ht.NORMAL:Ht.SKIP,l.blendMode.blendFunction=e===f.SMAA_WEIGHTS?Ht.NORMAL:Ht.SKIP,n(e===f.BROWSER),a.recompile()}),t.add(v,"preset",Mn).onChange(function(){i.applyPreset(me(v.preset))}),t.add(v,"contrast factor").min(1).max(3).step(.01).onChange(function(){c.setLocalContrastAdaptationFactor(oe(v["contrast factor"]))}),t.add(v,"opacity").min(0).max(1).step(.01).onChange(function(){d.opacity.value=v.opacity}),t.add(v,"blend mode",Ht).onChange(function(){d.blendFunction=me(v["blend mode"]),a.recompile()})}},{key:"reset",value:function(){h(i(a.prototype),"reset",this).call(this),null!==this.rendererAA&&(this.rendererAA.dispose(),this.rendererAA=null),null!==this.controls2&&(this.controls2.dispose(),this.controls2=null)}}]),a}(ia),Ea=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"ssao",e)),t.renderer=null,t.ssaoEffect=null,t.depthEffect=null,t.effectPass=null,t.normalPass=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/starry/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=function(t){var n=t.getSize(new e.Vector2),a=t.getPixelRatio();return t=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!1}),t.setSize(n.width,n.height),t.setPixelRatio(a),t.shadowMap.enabled=!0,t}(a.renderer);a.replaceRenderer(o),this.renderer=o;var r=new e.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.3,1e3);r.position.set(0,0,30),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var s=new e.AmbientLight(5521697),l=new e.PointLight(16769969,1,25);l.position.set(0,9.3,0),l.castShadow=!0,l.shadow.mapSize.width=1024,l.shadow.mapSize.height=1024,l.shadow.bias=1e-4,l.shadow.radius=4;var d=new e.DirectionalLight(16711680,.1);d.position.set(-10,0,0),d.target.position.copy(t.position);var c=new e.DirectionalLight(65280,.1);c.position.set(10,0,0),c.target.position.copy(t.position),t.add(l),t.add(d),t.add(c),t.add(s);var u=new e.Group,g=new e.Group,p=5,m=new e.PlaneBufferGeometry,f=new e.MeshPhongMaterial({color:16777215,shininess:p}),v=new e.Mesh(m,f),A=new e.Mesh(m,f),h=new e.Mesh(m,f),y=new e.Mesh(m,f),x=new e.Mesh(m,f);v.position.y=-10,v.rotation.x=.5*pe,v.scale.set(20,20,1),A.position.y=-10,A.rotation.x=-.5*pe,A.scale.set(20,20,1),A.receiveShadow=!0,h.position.y=10,h.rotation.x=.5*pe,h.scale.set(20,20,1),h.receiveShadow=!0,y.position.z=-10,y.scale.set(20,20,1),y.receiveShadow=!0,x.position.z=10,x.rotation.y=pe,x.scale.set(20,20,1),x.receiveShadow=!0;var C=new e.Mesh(m,new e.MeshPhongMaterial({color:16711680,shininess:p})),b=new e.Mesh(m,new e.MeshPhongMaterial({color:65280,shininess:p})),E=new e.Mesh(m,new e.MeshPhongMaterial({color:16777215,emissive:16777215,shininess:p}));C.position.x=-10,C.rotation.y=.5*pe,C.scale.set(20,20,1),C.receiveShadow=!0,b.position.x=10,b.rotation.y=-.5*pe,b.scale.set(20,20,1),b.receiveShadow=!0,E.position.y=10-.01,E.rotation.x=.5*pe,E.scale.set(4,4,1);var S=new e.MeshPhongMaterial({color:16777215,shininess:p}),T=new e.Mesh(new e.BoxBufferGeometry(1,1,1),S),M=new e.Mesh(new e.BoxBufferGeometry(1,1,1),S),k=new e.Mesh(new e.SphereBufferGeometry(1,32,32),S);T.position.set(-3.5,-4,-3),T.rotation.y=.1*pe,T.scale.set(6,12,6),T.castShadow=!0,M.position.set(3.5,-7,3),M.rotation.y=-.1*pe,M.scale.set(6,6,6),M.castShadow=!0,k.position.set(-5,-7,6),k.scale.set(3,3,3),k.castShadow=!0,u.add(v,A,h,y,x,C,b,E),g.add(T,M,k),t.add(u,g);var D=new Kt(t,r),B=new ln({blendFunction:Ht.SKIP}),P=new Tn(n.get("smaa-search"),n.get("smaa-area")),w=new kn(r,D.renderTarget.texture,{blendFunction:Ht.MULTIPLY,samples:11,rings:4,distanceThreshold:.6,distanceFalloff:.1,rangeThreshold:.0015,rangeFalloff:.01,luminanceInfluence:.7,radius:18.25,scale:1,bias:.5}),L=new Wt(r,P,w,B);this.renderPass.renderToScreen=!1,L.renderToScreen=!0,this.ssaoEffect=w,this.depthEffect=B,this.effectPass=L,this.normalPass=D,a.addPass(D),a.addPass(L)}},{key:"registerOptions",value:function(e){var t=this.effectPass,n=this.normalPass,a=this.ssaoEffect,o=this.depthEffect,r=a.blendMode,i=a.uniforms,s={DEFAULT:0,NORMALS:1,DEPTH:2},l={distance:{threshold:i.get("distanceCutoff").value.x,falloff:i.get("distanceCutoff").value.y-i.get("distanceCutoff").value.x},proximity:{threshold:i.get("proximityCutoff").value.x,falloff:i.get("proximityCutoff").value.y-i.get("proximityCutoff").value.x},"lum influence":i.get("luminanceInfluence").value,scale:i.get("scale").value,bias:i.get("bias").value,"render mode":s.DEFAULT,opacity:r.opacity.value,"blend mode":r.blendFunction};e.add(l,"render mode",s).onChange(function(){var e=me(l["render mode"]);t.enabled=e===s.DEFAULT||e===s.DEPTH,n.renderToScreen=e===s.NORMALS,o.blendMode.blendFunction=e===s.DEPTH?Ht.NORMAL:Ht.SKIP,t.recompile()}),e.add(a,"samples").min(1).max(32).step(1).onChange(function(){return t.recompile()}),e.add(a,"rings").min(1).max(16).step(1).onChange(function(){return t.recompile()}),e.add(a,"radius").min(.01).max(50).step(.01),e.add(l,"lum influence").min(0).max(1).step(.001).onChange(function(){i.get("luminanceInfluence").value=l["lum influence"]});var d=e.addFolder("Distance Cutoff");d.add(l.distance,"threshold").min(0).max(1).step(.001).onChange(function(){a.setDistanceCutoff(l.distance.threshold,l.distance.falloff)}),d.add(l.distance,"falloff").min(0).max(1).step(.001).onChange(function(){a.setDistanceCutoff(l.distance.threshold,l.distance.falloff)}),d=e.addFolder("Proximity Cutoff"),d.add(l.proximity,"threshold").min(0).max(.05).step(1e-4).onChange(function(){a.setProximityCutoff(l.proximity.threshold,l.proximity.falloff)}),d.add(l.proximity,"falloff").min(0).max(.1).step(1e-4).onChange(function(){a.setProximityCutoff(l.proximity.threshold,l.proximity.falloff)}),e.add(l,"bias").min(-1).max(1).step(.001).onChange(function(){i.get("bias").value=l.bias}),e.add(l,"scale").min(0).max(2).step(.001).onChange(function(){i.get("scale").value=l.scale}),e.add(l,"opacity").min(0).max(3).step(.01).onChange(function(){r.opacity.value=l.opacity}),e.add(l,"blend mode",Ht).onChange(function(){r.blendFunction=me(l["blend mode"]),t.recompile()})}},{key:"reset",value:function(){h(i(a.prototype),"reset",this).call(this),this.renderer.dispose()}}]),a}(ia),Sa=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"texture",e)),t.effect=null,t.pass=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),i="textures/skies/sunset/",s=".png",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(i,s){0===n.size?(a.onError=s,a.onProgress=function(e,t,n){t===n&&i()},r.load(l,function(e){n.set("sky",e)}),o.load("textures/scratches.jpg",function(t){t.wrapS=t.wrapT=e.RepeatWrapping,n.set("scratches-color",t)}),t.loadSMAAImages()):i()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-.75,-.1,-1),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.background=n.get("sky");var s=new Tn(n.get("smaa-search"),n.get("smaa-area")),l=new Dn({blendFunction:Ht.REFLECT,texture:n.get("scratches-color")});l.blendMode.opacity.value=.8;var d=new Wt(r,s,l);this.renderPass.renderToScreen=!1,d.renderToScreen=!0,this.effect=l,this.pass=d,a.addPass(d)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.effect,a=n.blendMode,o={opacity:a.opacity.value,"blend mode":a.blendFunction};e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){a.opacity.value=o.opacity}),e.add(o,"blend mode",Ht).onChange(function(){a.blendFunction=me(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(ia),Ta=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"tone-mapping",e)),t.effect=null,t.pass=null,t.object=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),i="textures/skies/sunset/",s=".png",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(i,s){0===n.size?(a.onError=s,a.onProgress=function(e,t,n){t===n&&i()},r.load(l,function(e){n.set("sky",e)}),o.load("textures/crate.jpg",function(t){t.wrapS=t.wrapT=e.RepeatWrapping,n.set("crate-color",t)}),t.loadSMAAImages()):i()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-3,0,-3),r.lookAt(t.position),this.camera=r;var i=new ra(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.settings.zoom.minDistance=2.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({map:n.get("crate-color")}));this.object=d,t.add(d);var c=new Tn(n.get("smaa-search"),n.get("smaa-area"));c.setEdgeDetectionThreshold(.06);var u=new Bn({blendFunction:Ht.NORMAL,adaptive:!0,resolution:256,middleGrey:.6,maxLuminance:16,averageLuminance:1,adaptationRate:2});this.effect=u;var g=new Wt(r,c,u);g.dithering=!0,this.pass=g,this.renderPass.renderToScreen=!1,g.renderToScreen=!0,a.addPass(g)}},{key:"render",value:function(e){var t=this.object,n=2*pe;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.effect,a=n.blendMode,o={resolution:n.resolution,"adaptation rate":n.adaptationRate,"average lum":n.uniforms.get("averageLuminance").value,"max lum":n.uniforms.get("maxLuminance").value,"middle grey":n.uniforms.get("middleGrey").value,opacity:a.opacity.value,"blend mode":a.blendFunction};e.add(o,"resolution",[64,128,256,512,1024]).onChange(function(){n.resolution=me(o.resolution)});var r=e.addFolder("Luminance");r.add(n,"adaptive").onChange(function(){t.recompile()}),r.add(o,"adaptation rate").min(0).max(5).step(.01).onChange(function(){n.adaptationRate=o["adaptation rate"]}),r.add(o,"average lum").min(.01).max(1).step(.01).onChange(function(){n.uniforms.get("averageLuminance").value=o["average lum"]}),r.add(o,"max lum").min(0).max(32).step(1).onChange(function(){n.uniforms.get("maxLuminance").value=o["max lum"]}),r.add(o,"middle grey").min(0).max(1).step(.01).onChange(function(){n.uniforms.get("middleGrey").value=o["middle grey"]}),r.open(),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){a.opacity.value=o.opacity}),e.add(o,"blend mode",Ht).onChange(function(){a.blendFunction=me(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(ia),Ma=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"vignette",e)),t.effect=null,t.pass=null,t.object=null,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r="textures/skies/space/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(e,r){0===n.size?(a.onError=r,a.onProgress=function(t,n,a){n===a&&e()},o.load(s,function(e){n.set("sky",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new ra(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,p,m;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),p=new e.Mesh(u,g),p.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),p.position.multiplyScalar(10*Math.random()),p.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),p.scale.multiplyScalar(Math.random()),c.add(p);this.object=c,t.add(c);var f=new Tn(n.get("smaa-search"),n.get("smaa-area")),v=new Pn({eskil:!1,offset:.35,darkness:.75}),A=new Wt(r,f,v);this.renderPass.renderToScreen=!1,A.renderToScreen=!0,this.effect=v,this.pass=A,a.addPass(A)}},{key:"render",value:function(e){var t=this.object,n=2*pe;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,n=this.effect,a=n.blendMode,o={offset:n.uniforms.get("offset").value,darkness:n.uniforms.get("darkness").value,opacity:a.opacity.value,"blend mode":a.blendFunction};e.add(n,"eskil").onChange(function(){return t.recompile()}),e.add(o,"offset").min(0).max(1).step(.001).onChange(function(){n.uniforms.get("offset").value=o.offset}),e.add(o,"darkness").min(0).max(1).step(.001).onChange(function(){n.uniforms.get("darkness").value=o.darkness}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){a.opacity.value=o.opacity}),e.add(o,"blend mode",Ht).onChange(function(){a.blendFunction=me(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(ia),ka=function(t){function a(e){var t;return n(this,a),t=f(this,i(a).call(this,"performance",e)),t.renderer=null,t.effects=null,t.effectPass=null,t.passes=null,t.sun=null,t.light=null,t.fps="0",t.acc0=0,t.acc1=0,t.frames=0,t}return r(a,t),o(a,[{key:"load",value:function(){var t=this,n=this.assets,a=this.loadingManager,o=new e.CubeTextureLoader(a),r=new e.TextureLoader(a),i="textures/skies/space5/",s=".jpg",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(e,i){0===n.size?(a.onError=i,a.onProgress=function(t,n,a){n===a&&e()},o.load(l,function(e){n.set("sky",e)}),r.load("textures/sun.png",function(e){n.set("sun-diffuse",e)}),t.loadSMAAImages()):e()})}},{key:"initialize",value:function(){var t=this.scene,n=this.assets,a=this.composer,o=function(t){var n=t.getSize(new e.Vector2),a=t.getPixelRatio();return t=new e.WebGLRenderer({powerPreference:"high-performance",logarithmicDepthBuffer:!0,antialias:!1}),t.setSize(n.width,n.height),t.setPixelRatio(a),t}(a.renderer);a.replaceRenderer(o),this.renderer=o;var r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.3,2e3);r.position.set(-10,1.125,0),r.lookAt(t.position),this.camera=r,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=n.get("sky");var i=new e.AmbientLight(6710886),s=new e.PointLight(16759722,5.5,12);t.add(i),t.add(s),this.light=s;var l=new e.MeshPhongMaterial({color:16755370,flatShading:!0,envMap:n.get("sky")}),c=new e.CylinderBufferGeometry(1,1,20,6),u=new e.Mesh(c,l);u.rotation.set(0,0,pe/2),t.add(u);var g=new e.TorusBufferGeometry(1,.4,16,100),p=[new e.Mesh(g,l),new e.Mesh(g,l),new e.Mesh(g,l)];p[0].position.set(0,2.5,-5),p[1].position.set(0,2.5,0),p[2].position.set(0,2.5,5),t.add(p[0]),t.add(p[1]),t.add(p[2]);var f=new e.MeshBasicMaterial({color:16768426,transparent:!0,fog:!1}),v=new e.SphereBufferGeometry(.65,32,32),A=new e.Mesh(v,f);A.frustumCulled=!1,this.sun=A,this.renderPass.renderToScreen=!1;var h=new Tn(n.get("smaa-search"),n.get("smaa-area"));h.setEdgeDetectionThreshold(.06);var y=new tn({blendFunction:Ht.SCREEN,kernelSize:Et.MEDIUM,luminanceThreshold:.825,luminanceSmoothing:.075,height:480}),x=new m(r,A,{kernelSize:Et.SMALL,height:720,density:.96,decay:.92,weight:.3,exposure:.55,samples:60,clampMax:1}),C=new dn({blendFunction:Ht.OVERLAY}),b=new de({blendFunction:Ht.DARKEN,scale:2.4,lineWidth:0}),E=new yn({blendFunction:Ht.OVERLAY,density:1.04}),S=new on(Ht.COLOR_DODGE),T=new rn({bits:16}),M=new Sn({blendFunction:Ht.NORMAL}),k=new an({contrast:0}),D=new cn({gamma:1.1}),B=new ce({saturation:.125}),P=new fn({premultiply:!0}),w=new Pn;x.dithering=!0,y.blendMode.opacity.value=2.3,S.blendMode.opacity.value=.01,M.blendMode.opacity.value=.01,C.blendMode.opacity.value=.01,b.blendMode.opacity.value=.01,E.blendMode.opacity.value=.01,P.blendMode.opacity.value=.25;var L=[h,y,x,S,T,C,b,E,k,D,B,M,P,w],R=d(Wt,[r].concat(L));R.renderToScreen=!0;var I=L.map(function(e){return new Wt(r,e)});I[I.length-1].renderToScreen=!0;var F=!0,O=!1,z=void 0;try{for(var _=I[Symbol.iterator](),G,U;!(F=(G=_.next()).done);F=!0)U=G.value,U.enabled=!1,a.addPass(U)}catch(e){O=!0,z=e}finally{try{F||null==_["return"]||_["return"]()}finally{if(O)throw z}}a.addPass(R),this.effectPass=R,this.effects=L,this.passes=I}},{key:"render",value:function(e){this.acc0+=e,this.acc1+=e,1<=this.acc0?(this.fps=this.frames.toFixed(),this.acc0=0,this.frames=0):++this.frames,this.sun.position.set(0,2.5,8*ge(.4*this.acc1)),this.sun.updateWorldMatrix(!0,!1),this.light.position.copy(this.sun.position),h(i(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this,n={"merge effects":!0,firefox:function(){window.open("https://www.google.com/search?q=firefox+layout.frame_rate","_blank")},chrome:function(){window.open("https://www.google.com/search?q=chrome+--disable-gpu-vsync","_blank")}};e.add(n,"merge effects").onChange(function(){t.effectPass.enabled=n["merge effects"],t.passes.forEach(function(e){e.enabled=!n["merge effects"]})}),e.add(this,"fps").listen();var a=e.addFolder("Disable VSync");a.add(n,"firefox"),a.add(n,"chrome")}},{key:"reset",value:function(){h(i(a.prototype),"reset",this).call(this),this.acc0=0,this.acc1=0,this.frames=0}}]),a}(ia),Da,Ba,Pa;window.addEventListener("load",function t(){this.removeEventListener("load",t);var n=document.getElementById("viewport");Da=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!1}),Da.debug.checkShaderErrors=!0,Da.setSize(n.clientWidth,n.clientHeight),Da.setPixelRatio(window.devicePixelRatio),Da.setClearColor(0,0),Ba=new qt(Da,{stencilBuffer:!0}),Pa=new At(n,{aside:document.getElementById("aside"),renderer:Da}),Pa.addEventListener("change",ne),Pa.addEventListener("load",ae);var a=[new la(Ba),new da(Ba),new ca(Ba),new ua(Ba),new ga(Ba),new pa(Ba),new ma(Ba),new va(Ba),new ha(Ba),new ya(Ba),new xa(Ba),new Ca(Ba),new ba(Ba),new Ea(Ba),new Sa(Ba),new Ta(Ba),new Ma(Ba),new ka(Ba)];-1===a.map(function(e){return e.id}).indexOf(window.location.hash.slice(1))&&(window.location.hash="");for(var o=0,r=a,i;o<r.length;o++)i=r[o],Pa.addDemo(i);te()}),window.addEventListener("resize",function(){function e(e){var n=e.target.innerWidth,a=e.target.innerHeight;Pa.setSize(n,a),Ba.setSize(n,a),t=0}var t=0;return function(n){0===t&&(t=setTimeout(e,66,n))}}()),document.addEventListener("keydown",function(e){var t=this.getElementById("aside");e.altKey&&null!==t&&(e.preventDefault(),t.style.visibility="hidden"===t.style.visibility?"visible":"hidden")})})(THREE);
