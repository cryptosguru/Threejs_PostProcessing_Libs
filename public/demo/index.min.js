function _typeof2(e){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof2(e)}(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},t(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return t&&("object"===_typeof2(t)||"function"==typeof t)?t:d(e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=s(e),null!==e););return e}function f(e,t,a){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=g(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(a):r.value}},f(e,t,a||e)}function p(e){return A(e)||h(e)||C()}function A(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function k(e,t){var n=e.__state.conversionName.toString(),o=Le(e.r),r=Le(e.g),i=Le(e.b),l=e.a,a=Le(e.h),d=e.s.toFixed(1),s=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);6>c.length;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+o+","+r+","+i+")":"CSS_RGBA"===n?"rgba("+o+","+r+","+i+","+l+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+r+","+i+"]":"RGBA_ARRAY"===n?"["+o+","+r+","+i+","+l+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+",a:"+l+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+d+",v:"+s+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+d+",v:"+s+",a:"+l+"}":"unknown format"}function S(e,t,a){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(qe.recalculateRGB(this,t,a),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(qe.recalculateRGB(this,t,a),this.__state.space="RGB"),this.__state[t]=e}})}function D(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(qe.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(qe.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}function E(e){if("0"===e||Ue.isUndefined(e))return 0;var t=e.match(et);return Ue.isNull(t)?0:parseFloat(t[1])}function w(e){var t=e.toString();return-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0}function M(e,t){var a=Me(10,t);return Le(e*a)/a}function B(e,t,a,n,r){return n+(r-n)*((e-t)/(a-t))}function P(e,t,n,a){e.style.background="",Ue.each(ct,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+a+" 100%); "})}function T(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}function L(e,t,a){var n=document.createElement("li");return t&&n.appendChild(t),a?e.__ul.insertBefore(n,a):e.__ul.appendChild(n),e.onResize(),n}function F(e){tt.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&tt.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function I(e,t){var a=e.__preset_select[e.__preset_select.selectedIndex];a.innerHTML=t?a.value+"*":a.value}function O(e,t,a){if(a.__li=t,a.__gui=e,Ue.extend(a,{options:function(t){if(1<arguments.length){var n=a.__li.nextElementSibling;return a.remove(),U(e,a.object,a.property,{before:n,factoryArgs:[Ue.toArray(arguments)]})}if(Ue.isArray(t)||Ue.isObject(t)){var r=a.__li.nextElementSibling;return a.remove(),U(e,a.object,a.property,{before:r,factoryArgs:[t]})}},name:function(e){return a.__li.firstElementChild.firstElementChild.innerHTML=e,a},listen:function(){return a.__gui.listen(a),a},remove:function(){return a.__gui.remove(a),a}}),a instanceof st){var n=new it(a.object,a.property,{min:a.__min,max:a.__max,step:a.__step});Ue.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=a[e],r=n[e];a[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(n,e),t.apply(a,e)}}),tt.addClass(t,"has-slider"),a.domElement.insertBefore(n.domElement,a.domElement.firstElementChild)}else if(a instanceof it){var o=function(t){if(Ue.isNumber(a.__min)&&Ue.isNumber(a.__max)){var n=a.__li.firstElementChild.firstElementChild.innerHTML,r=-1<a.__gui.__listening.indexOf(a);a.remove();var o=U(e,a.object,a.property,{before:a.__li.nextElementSibling,factoryArgs:[a.__min,a.__max,a.__step]});return o.name(n),r&&o.listen(),o}return t};a.min=Ue.compose(o,a.min),a.max=Ue.compose(o,a.max)}else a instanceof at?(tt.bind(t,"click",function(){tt.fakeEvent(a.__checkbox,"click")}),tt.bind(a.__checkbox,"click",function(t){t.stopPropagation()})):a instanceof lt?(tt.bind(t,"click",function(){tt.fakeEvent(a.__button,"click")}),tt.bind(t,"mouseover",function(){tt.addClass(a.__button,"hover")}),tt.bind(t,"mouseout",function(){tt.removeClass(a.__button,"hover")})):a instanceof dt&&(tt.addClass(t,"color"),a.updateDisplay=Ue.compose(function(e){return t.style.borderLeftColor=a.__color.toString(),e},a.updateDisplay),a.updateDisplay());a.setValue=Ue.compose(function(t){return e.getRoot().__preset_select&&a.isModified()&&I(e.getRoot(),!0),t},a.setValue)}function R(e,t){var a=e.getRoot(),n=a.__rememberedObjects.indexOf(t.object);if(-1!==n){var r=a.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},a.__rememberedObjectIndecesToControllers[n]=r),r[t.property]=t,a.load&&a.load.remembered){var o=a.load.remembered,i=void 0;if(o[e.preset])i=o[e.preset];else if(o.Default)i=o.Default;else return;if(i[n]&&void 0!==i[n][t.property]){var s=i[n][t.property];t.initialValue=s,t.setValue(s)}}}}function U(e,t,a,n){if(void 0===t[a])throw new Error("Object \""+t+"\" has no property \""+a+"\"");var r;if(n.color)r=new dt(t,a);else{var o=[t,a].concat(n.factoryArgs);r=ut.apply(e,o)}n.before instanceof Ze&&(n.before=n.before.__li),R(e,r),tt.addClass(r.domElement,"c");var i=document.createElement("span");tt.addClass(i,"property-name"),i.innerHTML=r.property;var s=document.createElement("div");s.appendChild(i),s.appendChild(r.domElement);var l=L(e,s,n.before);return tt.addClass(l,St.CLASS_CONTROLLER_ROW),r instanceof dt?tt.addClass(l,"color"):tt.addClass(l,Ne(r.getValue())),O(e,l,r),e.__controllers.push(r),r}function G(e,t){return document.location.href+"."+t}function Q(e,t,a){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),a&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function _(e,t){t.style.display=e.useLocalStorage?"block":"none"}function H(e){var t=e.__save_row=document.createElement("li");tt.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),tt.addClass(t,"save-row");var a=document.createElement("span");a.innerHTML="&nbsp;",tt.addClass(a,"button gears");var n=document.createElement("span");n.innerHTML="Save",tt.addClass(n,"button"),tt.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",tt.addClass(r,"button"),tt.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",tt.addClass(o,"button"),tt.addClass(o,"revert");var i=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?Ue.each(e.load.remembered,function(t,a){Q(e,a,a===e.preset)}):Q(e,"Default",!1),tt.bind(i,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(i),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(o),At){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),d=document.getElementById("dg-save-locally");d.style.display="block","true"===localStorage.getItem(G(e,"isLocal"))&&l.setAttribute("checked","checked"),_(e,s),tt.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,_(e,s)})}var c=document.getElementById("dg-new-constructor");tt.bind(c,"keydown",function(t){t.metaKey&&(67===t.which||67===t.keyCode)&&xt.hide()}),tt.bind(a,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),xt.show(),c.focus(),c.select()}),tt.bind(n,"click",function(){e.save()}),tt.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),tt.bind(o,"click",function(){e.revert()})}function V(t){function a(a){return a.preventDefault(),t.width+=r-a.clientX,t.onResize(),r=a.clientX,!1}function n(){tt.removeClass(t.__closeButton,St.CLASS_DRAG),tt.unbind(window,"mousemove",a),tt.unbind(window,"mouseup",n)}function e(o){return o.preventDefault(),r=o.clientX,tt.addClass(t.__closeButton,St.CLASS_DRAG),tt.bind(window,"mousemove",a),tt.bind(window,"mouseup",n),!1}var r;t.__resize_handle=document.createElement("div"),Ue.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),tt.bind(t.__resize_handle,"mousedown",e),tt.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function Y(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function N(e,t){var a={};return Ue.each(e.__rememberedObjects,function(n,r){var o={},i=e.__rememberedObjectIndecesToControllers[r];Ue.each(i,function(e,a){o[a]=t?e.initialValue:e.getValue()}),a[r]=o}),a}function X(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function W(e){0!==e.length&&gt.call(window,function(){W(e)}),Ue.each(e,function(e){e.updateDisplay()})}function j(e,t){return e+ze(Math.random()*(t-e+1))}function K(e,t){return e+Math.random()*(t-e)}function J(e,t,a){return Pe(t,Te(a,e))}function Z(e,t,a,n){var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),o=r.getContext("2d"),s=o.createImageData(e,t),l=s.data,d,c,u,g;for(c=0;c<t;++c)for(d=0;d<e;++d)u=4*(c*e+d),g=(c*e+d)*n,l[u]=0<n?a[g]:0,l[u+1]=1<n?a[g+1]:0,l[u+2]=2<n?a[g+2]:0,l[u+3]=3<n?a[g+3]:255;return r.width=e,r.height=t,o.putImageData(s,0,0),r}function $(e,t,a){return e+(t-e)*a}function ee(e){return Te(Pe(e,0),1)}function te(e,t){var a=t.min,n=t.max,r=.5*ke(2*a.x),o=.5*ke(2*a.y),i=.5*ke(2*n.x),s=.5*ke(2*n.y),l=ee(e/32);return a.set($(r,a.x,l),$(o,a.y,l)),n.set($(i,n.x,l),$(s,n.y,l)),t}function ae(e,n,r,o){var i=Math.trunc,s=n.x-e.x,l=n.y-e.y,d=r,c=r+1,u=e.y+l*(d-e.x)/s,g=e.y+l*(c-e.x)/s,m,f,p,v;return d>=e.x&&d<n.x||c>e.x&&c<=n.x?Ce(u)===Ce(g)||1e-4>Be(u)||1e-4>Be(g)?(m=(u+g)/2,0>m?o.set(Be(m),0):o.set(0,Be(m))):(v=-e.y*s/l+e.x,f=v>e.x?u*(v-i(v))/2:0,p=v<n.x?g*(1-(v-i(v)))/2:0,m=Be(f)>Be(p)?f:-p,0>m?o.set(Be(f),Be(p)):o.set(Be(p),Be(f))):o.set(0,0),o}function ne(e,t,n,r,o){var i=wa.min,s=wa.max,l=Ma.min,c=Ma.max,u=Ma,a=.5+r,g=.5+r-1,m=t+n+1;switch(e){case 0:{o.set(0,0);break}case 1:{t<=n?ae(i.set(0,g),s.set(m/2,0),t,o):o.set(0,0);break}case 2:{t>=n?ae(i.set(m/2,0),s.set(m,g),t,o):o.set(0,0);break}case 3:{ae(i.set(0,g),s.set(m/2,0),t,l),ae(i.set(m/2,0),s.set(m,g),t,c),te(m,u),o.addVectors(l,c);break}case 4:{t<=n?ae(i.set(0,a),s.set(m/2,0),t,o):o.set(0,0);break}case 5:{o.set(0,0);break}case 6:{0<Be(r)?(ae(i.set(0,a),s.set(m,g),t,l),ae(i.set(0,a),s.set(m/2,0),t,c),c.add(ae(i.set(m/2,0),s.set(m,g),t,o)),o.addVectors(l,c).divideScalar(2)):ae(i.set(0,a),s.set(m,g),t,o);break}case 7:{ae(i.set(0,a),s.set(m,g),t,o);break}case 8:{t>=n?ae(i.set(m/2,0),s.set(m,a),t,o):o.set(0,0);break}case 9:{0<Be(r)?(ae(i.set(0,g),s.set(m,a),t,l),ae(i.set(0,g),s.set(m/2,0),t,c),c.add(ae(i.set(m/2,0),s.set(m,a),t,o)),o.addVectors(l,c).divideScalar(2)):ae(i.set(0,g),s.set(m,a),t,o);break}case 10:{o.set(0,0);break}case 11:{ae(i.set(0,g),s.set(m,a),t,o);break}case 12:{ae(i.set(0,a),s.set(m/2,0),t,l),ae(i.set(m/2,0),s.set(m,a),t,c),te(m,u),o.addVectors(l,c);break}case 13:{ae(i.set(0,g),s.set(m,a),t,o);break}case 14:{ae(i.set(0,a),s.set(m,g),t,o);break}case 15:{o.set(0,0);break}}return o}function re(e,t,n,r){var o=e.equals(t),i,s,l,d,u;return o||(i=(e.x+t.x)/2,s=(e.y+t.y)/2,l=t.y-e.y,d=e.x-t.x,u=l*(n-i)+d*(r-s),o=0<u),o}function oe(e,t,n,r){var o,i,s,l,d;for(o=0,s=0;s<30;++s)for(i=0;i<30;++i)l=i/29,d=s/29,re(e,t,n+l,r+d)&&++o;return o/900}function ie(t,a,n,r,o,i){var s=Fa[t],e=s[0],l=s[1];return 0<e&&(a.x+=o[0],a.y+=o[1]),0<l&&(n.x+=o[0],n.y+=o[1]),i.set(1-oe(a,n,1+r,0+r),oe(a,n,1+r,1+r))}function se(e,t,a,n,r){var o=wa.min,i=wa.max,s=Ma.min,l=Ma.max,c=t+a+1;switch(e){case 0:{ie(e,o.set(1,1),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 1:{ie(e,o.set(1,0),i.set(0+c,0+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 2:{ie(e,o.set(0,0),i.set(1+c,0+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 3:{ie(e,o.set(1,0),i.set(1+c,0+c),t,n,r);break}case 4:{ie(e,o.set(1,1),i.set(0+c,0+c),t,n,s),ie(e,o.set(1,1),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 5:{ie(e,o.set(1,1),i.set(0+c,0+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 6:{ie(e,o.set(1,1),i.set(1+c,0+c),t,n,r);break}case 7:{ie(e,o.set(1,1),i.set(1+c,0+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 8:{ie(e,o.set(0,0),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,1+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 9:{ie(e,o.set(1,0),i.set(1+c,1+c),t,n,r);break}case 10:{ie(e,o.set(0,0),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 11:{ie(e,o.set(1,0),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 12:{ie(e,o.set(1,1),i.set(1+c,1+c),t,n,r);break}case 13:{ie(e,o.set(1,1),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,1+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 14:{ie(e,o.set(1,1),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,1),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}case 15:{ie(e,o.set(1,1),i.set(1+c,1+c),t,n,s),ie(e,o.set(1,0),i.set(1+c,0+c),t,n,l),r.addVectors(s,l).divideScalar(2);break}}return r}function le(t,a,n){var r=new e.Vector2,o,s,d,u,g,m,f,p;for(o=0,s=t.length;o<s;++o)for(m=t[o],f=m.data,p=m.width,u=0;u<p;++u)for(d=0;d<p;++d)n?ne(o,d,u,a,r):se(o,d,u,a,r),g=2*(u*p+d),f[g]=255*r.x,f[g+1]=255*r.y}function de(t,a,n,r,o,s){var u=new e.Vector2,g=s.data,m=s.width,f,p,v,A,h,C,k,b,S,D;for(f=0,p=a.length;f<p;++f)for(k=n[f],b=a[f],S=b.data,D=b.width,A=0;A<r;++A)for(v=0;v<r;++v)u.fromArray(k).multiplyScalar(r),u.add(t),u.x+=v,u.y+=A,h=2*(u.y*m+u.x),C=o?2*(A*A*D+v*v):2*(A*D+v),g[h]=S[C],g[h+1]=S[C+1]}function ce(e,t,a){return e+(t-e)*a}function ue(t){var e=ce(t[0],t[1],1-.25),a=ce(t[2],t[3],1-.25);return ce(e,a,1-.125)}function ge(e,t){var a=0;return 1===t[3]&&(a+=1),1==a&&1===t[2]&&1!==e[1]&&1!==e[3]&&(a+=1),a}function me(e,t){var a=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(a+=1),1==a&&1===t[2]&&1!==e[0]&&1!==e[2]&&(a+=1),a}function fe(e,t,a){return Pe(Te(e,a),t)}function pe(e){requestAnimationFrame(pe),ar.render(e)}function ve(e){var t=e.demo,a=tr.renderer.getSize();er.setSize(a.width,a.height),tr.replaceRenderer(er),tr.reset(),tr.addPass(t.renderPass),document.getElementById("viewport").children[0].style.display="initial"}function ye(e){e.demo.renderPass.camera=e.demo.camera,document.getElementById("viewport").children[0].style.display="none"}var Ae=Math.atan2,xe=Math.acos,he=Math.sin,Ce=Math.sign,ke=Math.sqrt,be=Math.ceil,Se=Math.log2,De=Math.cos,Ee=Number.parseInt,we=Math.PI,Me=Math.pow,Be=Math.abs,Pe=Math.max,Te=Math.min,ze=Math.floor,Le=Math.round,Fe=function(){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"demo";n(this,t),this.id=a,this.renderer=null,this.loadingManager=new e.LoadingManager,this.assets=new Map,this.scene=new e.Scene,this.camera=null,this.controls=null,this.ready=!1}return o(t,[{key:"setRenderer",value:function(e){return this.renderer=e,this}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(){}},{key:"reset",value:function(){var t=this.scene.fog;return this.scene=new e.Scene,this.scene.fog=t,this.camera=null,null!==this.controls&&(this.controls.dispose(),this.controls=null),this.ready=!1,this}}]),t}(),Ie=function(){function e(){n(this,e),this.listenerFunctions=new Map,this.listenerObjects=new Map}return o(e,[{key:"addEventListener",value:function(e,t){var a="function"==typeof t?this.listenerFunctions:this.listenerObjects;a.has(e)?a.get(e).add(t):a.set(e,new Set([t]))}},{key:"removeEventListener",value:function(e,t){var a="function"==typeof t?this.listenerFunctions:this.listenerObjects,n;a.has(e)&&(n=a.get(e),n.delete(t),0===n.size&&a.delete(e))}},{key:"dispatchEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,a=t.listenerFunctions,n=t.listenerObjects,r,o;if(e.target=t,a.has(e.type)){r=a.get(e.type);var i=!0,s=!1,l=void 0;try{for(var d=r[Symbol.iterator](),c;!(i=(c=d.next()).done);i=!0)o=c.value,o.call(t,e)}catch(e){s=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw l}}}if(n.has(e.type)){r=n.get(e.type);var u=!0,g=!1,m=void 0;try{for(var f=r[Symbol.iterator](),p;!(u=(p=f.next()).done);u=!0)o=p.value,o.handleEvent(e)}catch(e){g=!0,m=e}finally{try{u||null==f.return||f.return()}finally{if(g)throw m}}}}}]),e}(),Oe=Array.prototype.forEach,Re=Array.prototype.slice,Ue={BREAK:{},extend:function(e){return this.each(Re.call(arguments,1),function(t){var a=this.isObject(t)?Object.keys(t):[];a.forEach(function(a){this.isUndefined(t[a])||(e[a]=t[a])}.bind(this))},this),e},defaults:function(e){return this.each(Re.call(arguments,1),function(t){var a=this.isObject(t)?Object.keys(t):[];a.forEach(function(a){this.isUndefined(e[a])&&(e[a]=t[a])}.bind(this))},this),e},compose:function(){var e=Re.call(arguments);return function(){for(var t=Re.call(arguments),a=e.length-1;0<=a;a--)t=[e[a].apply(this,t)];return t[0]}},each:function(e,t,a){if(e)if(Oe&&e.forEach&&e.forEach===Oe)e.forEach(t,a);else if(e.length===e.length+0){var n=void 0,r=void 0;for(n=0,r=e.length;n<r;n++)if(n in e&&t.call(a,e[n],n)===this.BREAK)return}else for(var o in e)if(t.call(a,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,a){var n;return function(){var r=this,o=arguments,i=a||!n;clearTimeout(n),n=setTimeout(function(){n=null,a||e.apply(r,o)},t),i&&e.apply(r,o)}},toArray:function(e){return e.toArray?e.toArray():Re.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},Ge=[{litmus:Ue.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:k},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:k},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:k},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:k}}},{litmus:Ue.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Ue.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Ue.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(Ue.isNumber(e.r)&&Ue.isNumber(e.g)&&Ue.isNumber(e.b)&&Ue.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(Ue.isNumber(e.r)&&Ue.isNumber(e.g)&&Ue.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(Ue.isNumber(e.h)&&Ue.isNumber(e.s)&&Ue.isNumber(e.v)&&Ue.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(Ue.isNumber(e.h)&&Ue.isNumber(e.s)&&Ue.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],Qe=void 0,_e=void 0,He=function(){_e=!1;var e=1<arguments.length?Ue.toArray(arguments):arguments[0];return Ue.each(Ge,function(t){if(t.litmus(e))return Ue.each(t.conversions,function(t,a){if(Qe=t.read(e),!1===_e&&!1!==Qe)return _e=Qe,Qe.conversionName=a,Qe.conversion=t,Ue.BREAK}),Ue.BREAK}),_e},Ve=void 0,Ye={hsv_to_rgb:function(e,a,n){var r=ze(e/60)%6,o=e/60-ze(e/60),i=n*(1-a),s=n*(1-o*a),l=n*(1-(1-o)*a),t=[[n,l,i],[s,n,i],[i,n,l],[i,s,n],[l,i,n],[n,i,s]][r];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,a){var n=Te(e,t,a),r=Pe(e,t,a),o=r-n,i=void 0,l=void 0;if(0!==r)l=o/r;else return{h:NaN,s:0,v:0};return i=e===r?(t-a)/o:t===r?2+(a-e)/o:4+(e-t)/o,i/=6,0>i&&(i+=1),{h:360*i,s:l,v:r/255}},rgb_to_hex:function(e,t,a){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),n=this.hex_with_component(n,0,a),n},component_from_hex:function(e,t){return 255&e>>8*t},hex_with_component:function(e,t,a){return a<<(Ve=8*t)|e&~(255<<Ve)}},Ne="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},Xe=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},We=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),je=function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},Ke=function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+t(a));e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)},Je=function(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"===t(a)||"function"==typeof a)?a:e},qe=function(){function e(){if(Xe(this,e),this.__state=He.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return We(e,[{key:"toString",value:function(){return k(this)}},{key:"toHexString",value:function(){return k(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();qe.recalculateRGB=function(e,t,a){if("HEX"===e.__state.space)e.__state[t]=Ye.component_from_hex(e.__state.hex,a);else if("HSV"===e.__state.space)Ue.extend(e.__state,Ye.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw new Error("Corrupted color state")},qe.recalculateHSV=function(e){var t=Ye.rgb_to_hsv(e.r,e.g,e.b);Ue.extend(e.__state,{s:t.s,v:t.v}),Ue.isNaN(t.h)?Ue.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},qe.COMPONENTS=["r","g","b","h","s","v","hex","a"],S(qe.prototype,"r",2),S(qe.prototype,"g",1),S(qe.prototype,"b",0),D(qe.prototype,"h"),D(qe.prototype,"s"),D(qe.prototype,"v"),Object.defineProperty(qe.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(qe.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=Ye.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var Ze=function(){function e(t,a){Xe(this,e),this.initialValue=t[a],this.domElement=document.createElement("div"),this.object=t,this.property=a,this.__onChange=void 0,this.__onFinishChange=void 0}return We(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),$e={};Ue.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){Ue.each(e,function(a){$e[a]=t})});var et=/(\d+(\.\d+)?)px/,tt={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,a){var n=a,r=t;Ue.isUndefined(r)&&(r=!0),Ue.isUndefined(n)&&(n=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,a,n){var r=a||{},o=$e[t];if(!o)throw new Error("Event type "+t+" not supported.");var i=document.createEvent(o);switch(o){case"MouseEvents":{var s=r.x||r.clientX||0,l=r.y||r.clientY||0;i.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=i.initKeyboardEvent||i.initKeyEvent;Ue.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break}default:{i.initEvent(t,r.bubbles||!1,r.cancelable||!0);break}}Ue.defaults(i,n),e.dispatchEvent(i)},bind:function(e,t,a,n){return e.addEventListener?e.addEventListener(t,a,n||!1):e.attachEvent&&e.attachEvent("on"+t,a),tt},unbind:function(e,t,a,n){return e.removeEventListener?e.removeEventListener(t,a,n||!1):e.detachEvent&&e.detachEvent("on"+t,a),tt},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var a=e.className.split(/ +/);-1===a.indexOf(t)&&(a.push(t),e.className=a.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return tt},removeClass:function(e,t){if(!t)e.className=void 0;else if(e.className===t)e.removeAttribute("class");else{var a=e.className.split(/ +/),n=a.indexOf(t);-1!==n&&(a.splice(n,1),e.className=a.join(" "))}return tt},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return E(t["border-left-width"])+E(t["border-right-width"])+E(t["padding-left"])+E(t["padding-right"])+E(t.width)},getHeight:function(e){var t=getComputedStyle(e);return E(t["border-top-width"])+E(t["border-bottom-width"])+E(t["padding-top"])+E(t["padding-bottom"])+E(t.height)},getOffset:function(e){var t=e,a={left:0,top:0};if(t.offsetParent)do a.left+=t.offsetLeft,a.top+=t.offsetTop,t=t.offsetParent;while(t);return a},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},at=function(e){function t(e,a){Xe(this,t);var n=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),r=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox"),tt.bind(n.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return Ke(t,e),We(t,[{key:"setValue",value:function(e){var a=je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ze),nt=function(e){function t(e,a,n){Xe(this,t);var r=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),o=n,i=r;if(r.__select=document.createElement("select"),Ue.isArray(o)){var s={};Ue.each(o,function(e){s[e]=e}),o=s}return Ue.each(o,function(e,t){var a=document.createElement("option");a.innerHTML=t,a.setAttribute("value",e),i.__select.appendChild(a)}),r.updateDisplay(),tt.bind(r.__select,"change",function(){var e=this.options[this.selectedIndex].value;i.setValue(e)}),r.domElement.appendChild(r.__select),r}return Ke(t,e),We(t,[{key:"setValue",value:function(e){var a=je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a}},{key:"updateDisplay",value:function(){return tt.isActive(this.__select)?this:(this.__select.value=this.getValue(),je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(Ze),rt=function(e){function t(e,a){function n(){o.setValue(o.__input.value)}Xe(this,t);var r=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),o=r;return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),tt.bind(r.__input,"keyup",n),tt.bind(r.__input,"change",n),tt.bind(r.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),tt.bind(r.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){return tt.isActive(this.__input)||(this.__input.value=this.getValue()),je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ze),ot=function(e){function t(e,a,n){Xe(this,t);var r=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),o=n||{};return r.__min=o.min,r.__max=o.max,r.__step=o.step,r.__impliedStep=Ue.isUndefined(r.__step)?0===r.initialValue?1:Me(10,ze(Math.log(Be(r.initialValue))/Math.LN10))/10:r.__step,r.__precision=w(r.__impliedStep),r}return Ke(t,e),We(t,[{key:"setValue",value:function(e){var a=e;return void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max),void 0!==this.__step&&0!=a%this.__step&&(a=Le(a/this.__step)*this.__step),je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,a)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=w(e),this}}]),t}(Ze),it=function(e){function t(e,a,n){function r(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function o(t){var e=d-t.clientY;l.setValue(l.getValue()+e*l.__impliedStep),d=t.clientY}function i(){tt.unbind(window,"mousemove",o),tt.unbind(window,"mouseup",i),r()}Xe(this,t);var s=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,n));s.__truncationSuspended=!1;var l=s,d=void 0;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),tt.bind(s.__input,"change",function(){var e=parseFloat(l.__input.value);Ue.isNaN(e)||l.setValue(e)}),tt.bind(s.__input,"blur",function(){r()}),tt.bind(s.__input,"mousedown",function(t){tt.bind(window,"mousemove",o),tt.bind(window,"mouseup",i),d=t.clientY}),tt.bind(s.__input,"keydown",function(t){13===t.keyCode&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1,r())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():M(this.getValue(),this.__precision),je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(ot),st=function(e){function t(e,a,n,r,o){function i(t){t.preventDefault();var e=u.__background.getBoundingClientRect();return u.setValue(B(t.clientX,e.left,e.right,u.__min,u.__max)),!1}function s(){tt.unbind(window,"mousemove",i),tt.unbind(window,"mouseup",s),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function l(t){var e=t.touches[0].clientX,a=u.__background.getBoundingClientRect();u.setValue(B(e,a.left,a.right,u.__min,u.__max))}function d(){tt.unbind(window,"touchmove",l),tt.unbind(window,"touchend",d),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}Xe(this,t);var c=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,{min:n,max:r,step:o})),u=c;return c.__background=document.createElement("div"),c.__foreground=document.createElement("div"),tt.bind(c.__background,"mousedown",function(t){document.activeElement.blur(),tt.bind(window,"mousemove",i),tt.bind(window,"mouseup",s),i(t)}),tt.bind(c.__background,"touchstart",function(t){1!==t.touches.length||(tt.bind(window,"touchmove",l),tt.bind(window,"touchend",d),l(t))}),tt.addClass(c.__background,"slider"),tt.addClass(c.__foreground,"slider-fg"),c.updateDisplay(),c.__background.appendChild(c.__foreground),c.domElement.appendChild(c.__background),c}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",je(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(ot),lt=function(e){function t(e,a,n){Xe(this,t);var r=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===n?"Fire":n,tt.bind(r.__button,"click",function(t){return t.preventDefault(),r.fire(),!1}),tt.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return Ke(t,e),We(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(Ze),dt=function(e){function t(e,a){function n(t){d(t),tt.bind(window,"mousemove",d),tt.bind(window,"touchmove",d),tt.bind(window,"mouseup",o),tt.bind(window,"touchend",o)}function r(t){c(t),tt.bind(window,"mousemove",c),tt.bind(window,"touchmove",c),tt.bind(window,"mouseup",i),tt.bind(window,"touchend",i)}function o(){tt.unbind(window,"mousemove",d),tt.unbind(window,"touchmove",d),tt.unbind(window,"mouseup",o),tt.unbind(window,"touchend",o),l()}function i(){tt.unbind(window,"mousemove",c),tt.unbind(window,"touchmove",c),tt.unbind(window,"mouseup",i),tt.unbind(window,"touchend",i),l()}function s(){var e=He(this.value);!1===e?this.value=g.__color.toString():(g.__color.__state=e,g.setValue(g.__color.toOriginal()))}function l(){g.__onFinishChange&&g.__onFinishChange.call(g,g.__color.toOriginal())}function d(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=g.__saturation_field.getBoundingClientRect(),a=t.touches&&t.touches[0]||t,n=a.clientX,r=a.clientY,o=(n-e.left)/(e.right-e.left),i=1-(r-e.top)/(e.bottom-e.top);return 1<i?i=1:0>i&&(i=0),1<o?o=1:0>o&&(o=0),g.__color.v=i,g.__color.s=o,g.setValue(g.__color.toOriginal()),!1}function c(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=g.__hue_field.getBoundingClientRect(),a=t.touches&&t.touches[0]||t,n=a.clientY,r=1-(n-e.top)/(e.bottom-e.top);return 1<r?r=1:0>r&&(r=0),g.__color.h=360*r,g.setValue(g.__color.toOriginal()),!1}Xe(this,t);var u=Je(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));u.__color=new qe(u.getValue()),u.__temp=new qe(0);var g=u;u.domElement=document.createElement("div"),tt.makeSelectable(u.domElement,!1),u.__selector=document.createElement("div"),u.__selector.className="selector",u.__saturation_field=document.createElement("div"),u.__saturation_field.className="saturation-field",u.__field_knob=document.createElement("div"),u.__field_knob.className="field-knob",u.__field_knob_border="2px solid ",u.__hue_knob=document.createElement("div"),u.__hue_knob.className="hue-knob",u.__hue_field=document.createElement("div"),u.__hue_field.className="hue-field",u.__input=document.createElement("input"),u.__input.type="text",u.__input_textShadow="0 1px 1px ",tt.bind(u.__input,"keydown",function(t){13===t.keyCode&&s.call(this)}),tt.bind(u.__input,"blur",s),tt.bind(u.__selector,"mousedown",function(){tt.addClass(this,"drag").bind(window,"mouseup",function(){tt.removeClass(g.__selector,"drag")})}),tt.bind(u.__selector,"touchstart",function(){tt.addClass(this,"drag").bind(window,"touchend",function(){tt.removeClass(g.__selector,"drag")})});var m=document.createElement("div");return Ue.extend(u.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Ue.extend(u.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:u.__field_knob_border+(.5>u.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Ue.extend(u.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Ue.extend(u.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Ue.extend(m.style,{width:"100%",height:"100%",background:"none"}),P(m,"top","rgba(0,0,0,0)","#000"),Ue.extend(u.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),T(u.__hue_field),Ue.extend(u.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:u.__input_textShadow+"rgba(0,0,0,0.7)"}),tt.bind(u.__saturation_field,"mousedown",n),tt.bind(u.__saturation_field,"touchstart",n),tt.bind(u.__field_knob,"mousedown",n),tt.bind(u.__field_knob,"touchstart",n),tt.bind(u.__hue_field,"mousedown",r),tt.bind(u.__hue_field,"touchstart",r),u.__saturation_field.appendChild(m),u.__selector.appendChild(u.__field_knob),u.__selector.appendChild(u.__saturation_field),u.__selector.appendChild(u.__hue_field),u.__hue_field.appendChild(u.__hue_knob),u.domElement.appendChild(u.__input),u.domElement.appendChild(u.__selector),u.updateDisplay(),u}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){var e=He(this.getValue());if(!1!==e){var t=!1;Ue.each(qe.COMPONENTS,function(a){if(!Ue.isUndefined(e[a])&&!Ue.isUndefined(this.__color.__state[a])&&e[a]!==this.__color.__state[a])return t=!0,{}},this),t&&Ue.extend(this.__color.__state,e)}Ue.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=.5>this.__color.v||.5<this.__color.s?255:0,n=255-a;Ue.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,P(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Ue.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),t}(Ze),ct=["-moz-","-o-","-webkit-","-ms-",""],ut=function(e,t){var a=e[t];return Ue.isArray(arguments[2])||Ue.isObject(arguments[2])?new nt(e,t,arguments[2]):Ue.isNumber(a)?Ue.isNumber(arguments[2])&&Ue.isNumber(arguments[3])?Ue.isNumber(arguments[4])?new st(e,t,arguments[2],arguments[3],arguments[4]):new st(e,t,arguments[2],arguments[3]):Ue.isNumber(arguments[4])?new it(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new it(e,t,{min:arguments[2],max:arguments[3]}):Ue.isString(a)?new rt(e,t):Ue.isFunction(a)?new lt(e,t,""):Ue.isBoolean(a)?new at(e,t):null},gt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},mt=function(){function e(){Xe(this,e),this.backgroundElement=document.createElement("div"),Ue.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),tt.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Ue.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;tt.bind(this.backgroundElement,"click",function(){t.hide()})}return We(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Ue.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function e(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",tt.unbind(t.domElement,"webkitTransitionEnd",e),tt.unbind(t.domElement,"transitionend",e),tt.unbind(t.domElement,"oTransitionEnd",e)};tt.bind(this.domElement,"webkitTransitionEnd",e),tt.bind(this.domElement,"transitionend",e),tt.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-tt.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-tt.getHeight(this.domElement)/2+"px"}}]),e}(),ft=function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");({load:function(e,t){var a=t||document,n=a.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,a.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){var a=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e;var r=a.getElementsByTagName("head")[0];try{r.appendChild(n)}catch(t){}}}).inject(ft);var pt=72,vt=20,yt="Default",At=function(){try{return!!window.localStorage}catch(t){return!1}}(),xt=void 0,ht=!0,Ct=void 0,kt=!1,bt=[],St=function e(t){var a=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),tt.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=Ue.defaults(n,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),n=Ue.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),Ue.isUndefined(n.load)?n.load={preset:yt}:n.preset&&(n.load.preset=n.preset),Ue.isUndefined(n.parent)&&n.hideable&&bt.push(this),n.resizable=Ue.isUndefined(n.parent)&&n.resizable,n.autoPlace&&Ue.isUndefined(n.scrollable)&&(n.scrollable=!0);var r=At&&"true"===localStorage.getItem(G(this,"isLocal")),o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return a.parent?a.getRoot().preset:n.load.preset},set:function(e){a.parent?a.getRoot().preset=e:n.load.preset=e,X(this),a.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,Y(a,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,titleRowName&&(titleRowName.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(t){n.closed=t,n.closed?tt.addClass(a.__ul,e.CLASS_CLOSED):tt.removeClass(a.__ul,e.CLASS_CLOSED),this.onResize(),a.__closeButton&&(a.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return r},set:function(e){At&&(r=e,e?tt.bind(window,"unload",o):tt.unbind(window,"unload",o),localStorage.setItem(G(a,"isLocal"),e))}}}),Ue.isUndefined(n.parent)){if(n.closed=!1,tt.addClass(this.domElement,e.CLASS_MAIN),tt.makeSelectable(this.domElement,!1),At&&r){a.useLocalStorage=!0;var i=localStorage.getItem(G(this,"gui"));i&&(n.load=JSON.parse(i))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,tt.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),n.closeOnTop?(tt.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(tt.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),tt.bind(this.__closeButton,"click",function(){a.closed=!a.closed})}else{void 0===n.closed&&(n.closed=!0);var s=document.createTextNode(n.name);tt.addClass(s,"controller-name");var l=L(a,s),d=function(t){return t.preventDefault(),a.closed=!a.closed,!1};tt.addClass(this.__ul,e.CLASS_CLOSED),tt.addClass(l,"title"),tt.bind(l,"click",d),n.closed||(this.closed=!1)}n.autoPlace&&(Ue.isUndefined(n.parent)&&(ht&&(Ct=document.createElement("div"),tt.addClass(Ct,"dg"),tt.addClass(Ct,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Ct),ht=!1),Ct.appendChild(this.domElement),tt.addClass(this.domElement,e.CLASS_AUTO_PLACE)),!this.parent&&Y(a,n.width)),this.__resizeHandler=function(){a.onResizeDebounced()},tt.bind(window,"resize",this.__resizeHandler),tt.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),tt.bind(this.__ul,"transitionend",this.__resizeHandler),tt.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&V(this),o=function(){At&&"true"===localStorage.getItem(G(a,"isLocal"))&&localStorage.setItem(G(a,"gui"),JSON.stringify(a.getSaveObject()))},this.saveToLocalStorageIfPossible=o,n.parent||function(){var e=a.getRoot();e.width+=1,Ue.defer(function(){e.width-=1})}()};St.toggleHide=function(){kt=!kt,Ue.each(bt,function(e){e.domElement.style.display=kt?"none":""})},St.CLASS_AUTO_PLACE="a",St.CLASS_AUTO_PLACE_CONTAINER="ac",St.CLASS_MAIN="main",St.CLASS_CONTROLLER_ROW="cr",St.CLASS_TOO_TALL="taller-than-window",St.CLASS_CLOSED="closed",St.CLASS_CLOSE_BUTTON="close-button",St.CLASS_CLOSE_TOP="close-top",St.CLASS_CLOSE_BOTTOM="close-bottom",St.CLASS_DRAG="drag",St.DEFAULT_WIDTH=245,St.TEXT_CLOSED="Close Controls",St.TEXT_OPEN="Open Controls",St._keydownHandler=function(t){"text"!==document.activeElement.type&&(t.which===pt||t.keyCode===pt)&&St.toggleHide()},tt.bind(window,"keydown",St._keydownHandler,!1),Ue.extend(St.prototype,{add:function(e,t){return U(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return U(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Ue.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Ct.removeChild(this.domElement);var e=this;Ue.each(this.__folders,function(t){e.removeFolder(t)}),tt.unbind(window,"keydown",St._keydownHandler,!1),F(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error("You already have a folder in this GUI by the name \""+e+"\"");var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var a=new St(t);this.__folders[e]=a;var n=L(this,a.domElement);return tt.addClass(n,"folder"),a},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],F(e);var t=this;Ue.each(e.__folders,function(t){e.removeFolder(t)}),Ue.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=tt.getOffset(e.__ul).top,a=0;Ue.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(a+=tt.getHeight(t))}),window.innerHeight-t-vt<a?(tt.addClass(e.domElement,St.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-vt+"px"):(tt.removeClass(e.domElement,St.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Ue.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Ue.debounce(function(){this.onResize()},50),remember:function(){if(Ue.isUndefined(xt)&&(xt=new mt,xt.domElement.innerHTML="<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>"),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Ue.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&H(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&Y(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,!e.remembered&&(e.remembered={}),e.remembered[this.preset]=N(this)),e.folders={},Ue.each(this.__folders,function(t,a){e.folders[a]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=N(this),I(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[yt]=N(this,!0)),this.load.remembered[e]=N(this),this.preset=e,Q(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Ue.each(this.__controllers,function(t){this.getRoot().load.remembered?R(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),Ue.each(this.__folders,function(e){e.revert(e)}),e||I(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&W(this.__listening)},updateDisplay:function(){Ue.each(this.__controllers,function(e){e.updateDisplay()}),Ue.each(this.__folders,function(e){e.updateDisplay()})}});var Dt=St,Et=function(e){function t(e){var a;return n(this,t),a=u(this,s(t).call(this,e)),a.previousDemo=null,a.demo=null,a}return i(t,e),t}(function e(t){n(this,e),this.type=t,this.target=null}),wt=new Et("change"),Mt=new Et("load"),Bt=window.location.hash.slice(1),Pt=function(t){function a(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o;n(this,a);var i=void 0===r.aside?t:r.aside;return o=u(this,s(a).call(this)),o.renderer=void 0===r.renderer?function(){var a=new e.WebGLRenderer;return a.setSize(t.clientWidth,t.clientHeight),a.setPixelRatio(window.devicePixelRatio),a}():r.renderer,t.appendChild(o.renderer.domElement),o.clock=new e.Clock,o.menu=new Dt({autoPlace:!1}),i.appendChild(o.menu.domElement),o.demos=new Map,o.demo=null,o.currentDemo=null,o}return i(a,t),o(a,[{key:"resetMenu",value:function(){var e=this,t=this.menu.domElement.parentNode,a=new Dt({autoPlace:!1});if(1<this.demos.size){var n=a.add(this,"demo",Array.from(this.demos.keys()));n.onChange(function(){return e.loadDemo()})}return t.removeChild(this.menu.domElement),t.appendChild(a.domElement),this.menu.destroy(),this.menu=a,a}},{key:"startDemo",value:function(e){e.id===this.demo&&(e.initialize(),e.registerOptions(this.resetMenu()),e.ready=!0,Mt.demo=e,this.dispatchEvent(Mt))}},{key:"loadDemo",value:function(){var e=this,t=this.demo,a=this.demos,n=a.get(t),r=this.currentDemo,o=this.renderer;window.location.hash=t,null!==r&&r.reset(),this.menu.domElement.style.display="none",o.clear(),wt.previousDemo=r,wt.demo=n,this.currentDemo=n,this.dispatchEvent(wt),n.load().then(function(){return e.startDemo(n)}).catch(function(t){return console.error(t)})}},{key:"addDemo",value:function(e){var t=this.currentDemo;return this.demos.set(e.id,e.setRenderer(this.renderer)),(null===this.demo||e.id===Bt)&&(this.demo=e.id,this.loadDemo()),this.resetMenu(),null!==t&&t.ready&&t.registerOptions(this.menu),this}},{key:"removeDemo",value:function(e){var t=this.demos,a;return t.has(e)&&(t.delete(e),this.demo===e&&0<t.size?(a=t.entries().next().value,this.demo=a[0],this.currentDemo=a[1],this.loadDemo()):(this.demo=null,this.currentDemo=null,this.renderer.clear())),this}},{key:"setSize",value:function(e,t){var a=this.currentDemo;this.renderer.setSize(e,t),null!==a&&null!==a.camera&&(a.camera.aspect=e/t,a.camera.updateProjectionMatrix())}},{key:"render",value:function(){var e=this.currentDemo,t=this.clock.getDelta();null!==e&&e.ready&&e.render(t)}}]),a}(Ie),Tt=function(){function e(){n(this,e)}return o(e,[{key:"dispose",value:function(){}}]),e}(),zt=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"AdaptiveLuminosityMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{tPreviousLum:new e.Uniform(null),tCurrentLum:new e.Uniform(null),minLuminance:new e.Uniform(.01),delta:new e.Uniform(0),tau:new e.Uniform(1)},fragmentShader:"uniform sampler2D tPreviousLum;\r\nuniform sampler2D tCurrentLum;\r\nuniform float minLuminance;\r\nuniform float delta;\r\nuniform float tau;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tfloat previousLum = texture2D(tPreviousLum, vUv, MIP_LEVEL_1X1).r;\r\n\tfloat currentLum = texture2D(tCurrentLum, vUv, MIP_LEVEL_1X1).r;\r\n\r\n\tpreviousLum = max(minLuminance, previousLum);\r\n\tcurrentLum = max(minLuminance, currentLum);\r\n\r\n\t// Adapt the luminance using Pattanaik's technique.\r\n\tfloat adaptedLum = previousLum + (currentLum - previousLum) * (1.0 - exp(-delta * tau));\r\n\r\n\tgl_FragColor.r = adaptedLum;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Lt=function(t){function a(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o;n(this,a);var i=Object.assign({focus:1,dof:.02,aperture:.025,maxBlur:1},r);return o=u(this,s(a).call(this,{type:"BokehMaterial",uniforms:{cameraNear:new e.Uniform(.1),cameraFar:new e.Uniform(2e3),aspect:new e.Uniform(1),tDiffuse:new e.Uniform(null),tDepth:new e.Uniform(null),focus:new e.Uniform(i.focus),dof:new e.Uniform(i.dof),aperture:new e.Uniform(i.aperture),maxBlur:new e.Uniform(i.maxBlur)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform sampler2D tDepth;\r\n\r\nuniform float focus;\r\nuniform float dof;\r\nuniform float aspect;\r\nuniform float aperture;\r\nuniform float maxBlur;\r\n\r\nvarying vec2 vUv;\r\n\r\n#ifndef USE_LOGDEPTHBUF\r\n\r\n\t#include <packing>\r\n\r\n\tuniform float cameraNear;\r\n\tuniform float cameraFar;\r\n\r\n\tfloat readDepth(sampler2D depthSampler, vec2 coord) {\r\n\r\n\t\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\r\n\t\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t\treturn viewZToOrthographicDepth(viewZ, cameraNear, cameraFar);\r\n\r\n\t}\r\n\r\n#endif\r\n\r\nvoid main() {\r\n\r\n\tvec2 aspectCorrection = vec2(1.0, aspect);\r\n\r\n\t#ifdef USE_LOGDEPTHBUF\r\n\r\n\t\tfloat depth = texture2D(tDepth, vUv).x;\r\n\r\n\t#else\r\n\r\n\t\tfloat depth = readDepth(tDepth, vUv);\r\n\r\n\t#endif\r\n\r\n\tfloat focusNear = clamp(focus - dof, 0.0, 1.0);\r\n\tfloat focusFar = clamp(focus + dof, 0.0, 1.0);\r\n\r\n\t// Calculate a DoF mask.\r\n\tfloat low = step(depth, focusNear);\r\n\tfloat high = step(focusFar, depth);\r\n\r\n\tfloat factor = (depth - focusNear) * low + (depth - focusFar) * high;\r\n\r\n\tvec2 dofBlur = vec2(clamp(factor * aperture, -maxBlur, maxBlur));\r\n\r\n\tvec2 dofblur9 = dofBlur * 0.9;\r\n\tvec2 dofblur7 = dofBlur * 0.7;\r\n\tvec2 dofblur4 = dofBlur * 0.4;\r\n\r\n\tvec4 color = vec4(0.0);\r\n\r\n\tcolor += texture2D(tDiffuse, vUv);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15,  0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29,  0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37,  0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37, -0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29, -0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15, -0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15,  0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29,  0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37,  0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37, -0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29, -0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15, -0.37) * aspectCorrection) * dofBlur);\r\n\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15,  0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37,  0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37, -0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15, -0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15,  0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37,  0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37, -0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15, -0.37) * aspectCorrection) * dofblur9);\r\n\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur7);\r\n\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.4,   0.0 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur4);\r\n\r\n\tgl_FragColor = color / 41.0;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),o.adoptCameraSettings(t),o}return i(a,t),o(a,[{key:"adoptCameraSettings",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,this.uniforms.aspect.value=e.aspect)}}]),a}(e.ShaderMaterial),Ft=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2;return n(this,a),u(this,s(a).call(this,{type:"ColorEdgesMaterial",defines:{EDGE_THRESHOLD:"0.1"},uniforms:{tDiffuse:new e.Uniform(null),texelSize:new e.Uniform(t)},fragmentShader:"uniform sampler2D tDiffuse;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\n\r\nvoid main() {\r\n\r\n\tconst vec2 threshold = vec2(EDGE_THRESHOLD);\r\n\r\n\t// Calculate color deltas.\r\n\tvec4 delta;\r\n\tvec3 c = texture2D(tDiffuse, vUv).rgb;\r\n\r\n\tvec3 cLeft = texture2D(tDiffuse, vOffset[0].xy).rgb;\r\n\tvec3 t = abs(c - cLeft);\r\n\tdelta.x = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cTop = texture2D(tDiffuse, vOffset[0].zw).rgb;\r\n\tt = abs(c - cTop);\r\n\tdelta.y = max(max(t.r, t.g), t.b);\r\n\r\n\t// We do the usual threshold.\r\n\tvec2 edges = step(threshold, delta.xy);\r\n\r\n\t// Then discard if there is no edge.\r\n\tif(dot(edges, vec2(1.0)) == 0.0) {\r\n\r\n\t\tdiscard;\r\n\r\n\t}\r\n\r\n\t// Calculate right and bottom deltas.\r\n\tvec3 cRight = texture2D(tDiffuse, vOffset[1].xy).rgb;\r\n\tt = abs(c - cRight);\r\n\tdelta.z = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cBottom = texture2D(tDiffuse, vOffset[1].zw).rgb;\r\n\tt = abs(c - cBottom);\r\n\tdelta.w = max(max(t.r, t.g), t.b);\r\n\r\n\t// Calculate the maximum delta in the direct neighborhood.\r\n\tfloat maxDelta = max(max(max(delta.x, delta.y), delta.z), delta.w);\r\n\r\n\t// Calculate left-left and top-top deltas.\r\n\tvec3 cLeftLeft = texture2D(tDiffuse, vOffset[2].xy).rgb;\r\n\tt = abs(c - cLeftLeft);\r\n\tdelta.z = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cTopTop = texture2D(tDiffuse, vOffset[2].zw).rgb;\r\n\tt = abs(c - cTopTop);\r\n\tdelta.w = max(max(t.r, t.g), t.b);\r\n\r\n\t// Calculate the final maximum delta.\r\n\tmaxDelta = max(max(maxDelta, delta.z), delta.w);\r\n\r\n\t// Local contrast adaptation in action.\r\n\tedges.xy *= step(0.5 * maxDelta, delta.xy);\r\n\r\n\tgl_FragColor = vec4(edges, 0.0, 0.0);\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-1.0, 0.0, 0.0, 1.0); // Changed sign in W component.\r\n\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // Changed sign in W component.\r\n\tvOffset[2] = uv.xyxy + texelSize.xyxy * vec4(-2.0, 0.0, 0.0, 2.0); // Changed sign in W component.\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),o(a,[{key:"setEdgeDetectionThreshold",value:function(e){this.defines.EDGE_THRESHOLD=e.toFixed("2"),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),It=function(t){function a(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],r;return n(this,a),r=u(this,s(a).call(this,{type:"CombineMaterial",uniforms:{texture1:new e.Uniform(null),texture2:new e.Uniform(null),opacity1:new e.Uniform(1),opacity2:new e.Uniform(1)},fragmentShader:"uniform sampler2D texture1;\r\nuniform sampler2D texture2;\r\n\r\nuniform float opacity1;\r\nuniform float opacity2;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel1 = opacity1 * texture2D(texture1, vUv);\r\n\tvec4 texel2 = opacity2 * texture2D(texture2, vUv);\r\n\r\n\t#ifdef SCREEN_MODE\r\n\r\n\t\tvec3 invTexel1 = vec3(1.0) - texel1.rgb;\r\n\t\tvec3 invTexel2 = vec3(1.0) - texel2.rgb;\r\n\r\n\t\tvec4 color = vec4(\r\n\t\t\tvec3(1.0) - invTexel1 * invTexel2,\r\n\t\t\ttexel1.a + texel2.a\r\n\t\t);\r\n\r\n\t#else\r\n\r\n\t\tvec4 color = texel1 + texel2;\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor = color;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),r.setScreenModeEnabled(t),r}return i(a,t),o(a,[{key:"setScreenModeEnabled",value:function(e){e?this.defines.SCREEN_MODE="1":delete this.defines.SCREEN_MODE,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Ot=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,r;return n(this,a),r=u(this,s(a).call(this,{type:"ConvolutionMaterial",uniforms:{tDiffuse:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2()),halfTexelSize:new e.Uniform(new e.Vector2()),kernel:new e.Uniform(0)},fragmentShader:"#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D tDiffuse;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\t// Sample top left texel.\r\n\tvec4 sum = texture2D(tDiffuse, vUv0);\r\n\r\n\t// Sample top right texel.\r\n\tsum += texture2D(tDiffuse, vUv1);\r\n\r\n\t// Sample bottom right texel.\r\n\tsum += texture2D(tDiffuse, vUv2);\r\n\r\n\t// Sample bottom left texel.\r\n\tsum += texture2D(tDiffuse, vUv3);\r\n\r\n\t// Compute the average.\r\n\tgl_FragColor = sum * 0.25;\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\nuniform vec2 halfTexelSize;\r\nuniform float kernel;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvec2 dUv = (texelSize * vec2(kernel)) + halfTexelSize;\r\n\r\n\tvUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\r\n\tvUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\r\n\tvUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\r\n\tvUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),r.setTexelSize(t.x,t.y),r.kernelSize=Ut.LARGE,r}return i(a,t),o(a,[{key:"getKernel",value:function(){return Rt[this.kernelSize]}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}}]),a}(e.ShaderMaterial),Rt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ut={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Gt=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"CopyMaterial",uniforms:{tDiffuse:new e.Uniform(null),opacity:new e.Uniform(1)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(tDiffuse, vUv);\r\n\tgl_FragColor = opacity * texel;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Qt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=1<arguments.length?arguments[1]:void 0,o;return n(this,a),o=u(this,s(a).call(this,{type:"DepthComparisonMaterial",uniforms:{tDepth:new e.Uniform(t),cameraNear:new e.Uniform(.1),cameraFar:new e.Uniform(2e3)},fragmentShader:"#include <packing>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nuniform sampler2D tDepth;\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\n\r\nvarying float vViewZ;\r\nvarying vec4 vProjTexCoord;\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\t// Transform into Cartesian coordinate (not mirrored).\r\n\tvec2 projTexCoord = (vProjTexCoord.xy / vProjTexCoord.w) * 0.5 + 0.5;\r\n\tprojTexCoord = clamp(projTexCoord, 0.002, 0.998);\r\n\r\n\tfloat fragCoordZ = unpackRGBAToDepth(texture2D(tDepth, projTexCoord));\r\n\r\n\t#ifdef PERSPECTIVE_CAMERA\r\n\r\n\t\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t#else\r\n\r\n\t\tfloat viewZ = orthographicDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t#endif\r\n\r\n\tfloat depthTest = (-vViewZ > -viewZ) ? 1.0 : 0.0;\r\n\r\n\tgl_FragColor.rgb = vec3(0.0, depthTest, 1.0);\r\n\r\n}\r\n",vertexShader:"#include <common>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvarying float vViewZ;\r\nvarying vec4 vProjTexCoord;\r\n\r\nvoid main() {\r\n\r\n\t#include <skinbase_vertex>\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\r\n\tvViewZ = mvPosition.z;\r\n\tvProjTexCoord = gl_Position;\r\n\r\n\t#include <clipping_planes_vertex>\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1,morphTargets:!0,skinning:!0})),o.adoptCameraSettings(r),o}return i(a,t),o(a,[{key:"adoptCameraSettings",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null!==t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof e.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}}]),a}(e.ShaderMaterial),_t=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;n(this,a);var o=Object.assign({average:!1,angle:1.57,scale:1,intensity:1},t);return r=u(this,s(a).call(this,{type:"DotScreenMaterial",uniforms:{tDiffuse:new e.Uniform(null),angle:new e.Uniform(o.angle),scale:new e.Uniform(o.scale),intensity:new e.Uniform(o.intensity),offsetRepeat:new e.Uniform(new e.Vector4(.5,.5,1,1))},fragmentShader:"uniform sampler2D tDiffuse;\r\n\r\nuniform float angle;\r\nuniform float scale;\r\nuniform float intensity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec2 vUvPattern;\r\n\r\nfloat pattern() {\r\n\r\n\tfloat s = sin(angle);\r\n\tfloat c = cos(angle);\r\n\r\n\tvec2 point = vec2(c * vUvPattern.x - s * vUvPattern.y, s * vUvPattern.x + c * vUvPattern.y) * scale;\r\n\r\n\treturn (sin(point.x) * sin(point.y)) * 4.0;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(tDiffuse, vUv);\r\n\tvec3 color = texel.rgb;\r\n\r\n\t#ifdef AVERAGE\r\n\r\n\t\tcolor = vec3((color.r + color.g + color.b) / 3.0);\r\n\r\n\t#endif\r\n\r\n\tcolor = vec3(color * 10.0 - 5.0 + pattern());\r\n\tcolor = texel.rgb + (color - texel.rgb) * intensity;\r\n\r\n\tgl_FragColor = vec4(color, texel.a);\r\n\r\n}\r\n",vertexShader:"uniform vec4 offsetRepeat;\r\n\r\nvarying vec2 vUv;\r\nvarying vec2 vUvPattern;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tvUvPattern = uv * offsetRepeat.zw + offsetRepeat.xy;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),r.setAverageEnabled(o.average),r}return i(a,t),o(a,[{key:"setAverageEnabled",value:function(e){e?this.defines.AVERAGE="1":delete this.defines.AVERAGE,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Ht=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;n(this,a);var o=Object.assign({screenMode:!0,noise:!0,scanlines:!0,grid:!1,greyscale:!1,sepia:!1,vignette:!1,eskil:!1,noiseIntensity:.5,scanlineIntensity:.05,gridIntensity:1,greyscaleIntensity:1,sepiaIntensity:1,vignetteOffset:1,vignetteDarkness:1},t);return r=u(this,s(a).call(this,{type:"FilmMaterial",uniforms:{tDiffuse:new e.Uniform(null),time:new e.Uniform(0),noiseIntensity:new e.Uniform(o.noiseIntensity),scanlineIntensity:new e.Uniform(o.scanlineIntensity),gridIntensity:new e.Uniform(o.gridIntensity),scanlineCount:new e.Uniform(0),gridScale:new e.Uniform(new e.Vector2()),gridLineWidth:new e.Uniform(0),greyscaleIntensity:new e.Uniform(o.greyscaleIntensity),sepiaIntensity:new e.Uniform(o.sepiaIntensity),vignetteOffset:new e.Uniform(o.vignetteOffset),vignetteDarkness:new e.Uniform(o.vignetteDarkness)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform float time;\r\n\r\nvarying vec2 vUv;\r\n\r\n#ifdef NOISE\r\n\r\n\tuniform float noiseIntensity;\r\n\r\n#endif\r\n\r\n#ifdef SCANLINES\r\n\r\n\tuniform float scanlineIntensity;\r\n\tuniform float scanlineCount;\r\n\r\n#endif\r\n\r\n#ifdef GRID\r\n\r\n\tuniform float gridIntensity;\r\n\tuniform vec2 gridScale;\r\n\tuniform float gridLineWidth;\r\n\r\n#endif\r\n\r\n#ifdef GREYSCALE\r\n\r\n\t#include <common>\r\n\r\n\tuniform float greyscaleIntensity;\r\n\r\n#elif defined(SEPIA)\r\n\r\n\tuniform float sepiaIntensity;\r\n\r\n#endif\r\n\r\n#ifdef VIGNETTE\r\n\r\n\tuniform float vignetteOffset;\r\n\tuniform float vignetteDarkness;\r\n\r\n#endif\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(tDiffuse, vUv);\r\n\tvec3 color = texel.rgb;\r\n\r\n\t#ifdef SCREEN_MODE\r\n\r\n\t\tvec3 invColor;\r\n\r\n\t#endif\r\n\r\n\t#ifdef NOISE\r\n\r\n\t\tfloat x = vUv.x * vUv.y * time * 1000.0;\r\n\t\tx = mod(x, 13.0) * mod(x, 123.0);\r\n\t\tx = mod(x, 0.01);\r\n\r\n\t\tvec3 noise = texel.rgb * clamp(0.1 + x * 100.0, 0.0, 1.0) * noiseIntensity;\r\n\r\n\t\t#ifdef SCREEN_MODE\r\n\r\n\t\t\tinvColor = vec3(1.0) - color;\r\n\t\t\tvec3 invNoise = vec3(1.0) - noise;\r\n\r\n\t\t\tcolor = vec3(1.0) - invColor * invNoise;\r\n\r\n\t\t#else\r\n\r\n\t\t\tcolor += noise;\r\n\r\n\t\t#endif\r\n\r\n\t#endif\r\n\r\n\t#ifdef SCANLINES\r\n\r\n\t\tvec2 sl = vec2(sin(vUv.y * scanlineCount), cos(vUv.y * scanlineCount));\r\n\t\tvec3 scanlines = texel.rgb * vec3(sl.x, sl.y, sl.x) * scanlineIntensity;\r\n\r\n\t\t#ifdef SCREEN_MODE\r\n\r\n\t\t\tinvColor = vec3(1.0) - color;\r\n\t\t\tvec3 invScanlines = vec3(1.0) - scanlines;\r\n\r\n\t\t\tcolor = vec3(1.0) - invColor * invScanlines;\r\n\r\n\t\t#else\r\n\r\n\t\t\tcolor += scanlines;\r\n\r\n\t\t#endif\r\n\r\n\t#endif\r\n\r\n\t#ifdef GRID\r\n\r\n\t\tfloat grid = 0.5 - max(abs(mod(vUv.x * gridScale.x, 1.0) - 0.5), abs(mod(vUv.y * gridScale.y, 1.0) - 0.5));\r\n\t\tcolor *= (1.0 - gridIntensity) + vec3(smoothstep(0.0, gridLineWidth, grid)) * gridIntensity;\r\n\r\n\t#endif\r\n\r\n\t#ifdef GREYSCALE\r\n\r\n\t\tcolor = mix(color, vec3(linearToRelativeLuminance(color)), greyscaleIntensity);\r\n\r\n\t#elif defined(SEPIA)\r\n\r\n\t\tvec3 c = color.rgb;\r\n\r\n\t\tcolor.r = dot(c, vec3(1.0 - 0.607 * sepiaIntensity, 0.769 * sepiaIntensity, 0.189 * sepiaIntensity));\r\n\t\tcolor.g = dot(c, vec3(0.349 * sepiaIntensity, 1.0 - 0.314 * sepiaIntensity, 0.168 * sepiaIntensity));\r\n\t\tcolor.b = dot(c, vec3(0.272 * sepiaIntensity, 0.534 * sepiaIntensity, 1.0 - 0.869 * sepiaIntensity));\r\n\r\n\t#endif\r\n\r\n\t#ifdef VIGNETTE\r\n\r\n\t\tconst vec2 center = vec2(0.5);\r\n\r\n\t\t#ifdef ESKIL\r\n\r\n\t\t\tvec2 uv = (vUv - center) * vec2(vignetteOffset);\r\n\t\t\tcolor = mix(color.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\r\n\r\n\t\t#else\r\n\r\n\t\t\tfloat dist = distance(vUv, center);\r\n\t\t\tcolor *= smoothstep(0.8, vignetteOffset * 0.799, dist * (vignetteDarkness + vignetteOffset));\r\n\r\n\t\t#endif\t\t\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor = vec4(clamp(color, 0.0, 1.0), texel.a);\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),r.setScreenModeEnabled(o.screenMode),r.setNoiseEnabled(o.noise),r.setScanlinesEnabled(o.scanlines),r.setGridEnabled(o.grid),r.setGreyscaleEnabled(o.greyscale),r.setSepiaEnabled(o.sepia),r.setVignetteEnabled(o.vignette),r.setEskilEnabled(o.eskil),r}return i(a,t),o(a,[{key:"setScreenModeEnabled",value:function(e){e?this.defines.SCREEN_MODE="1":delete this.defines.SCREEN_MODE,this.needsUpdate=!0}},{key:"setNoiseEnabled",value:function(e){e?this.defines.NOISE="1":delete this.defines.NOISE,this.needsUpdate=!0}},{key:"setScanlinesEnabled",value:function(e){e?this.defines.SCANLINES="1":delete this.defines.SCANLINES,this.needsUpdate=!0}},{key:"setGridEnabled",value:function(e){e?this.defines.GRID="1":delete this.defines.GRID,this.needsUpdate=!0}},{key:"setGreyscaleEnabled",value:function(e){e?this.defines.GREYSCALE="1":delete this.defines.GREYSCALE,this.needsUpdate=!0}},{key:"setSepiaEnabled",value:function(e){e?this.defines.SEPIA="1":delete this.defines.SEPIA,this.needsUpdate=!0}},{key:"setVignetteEnabled",value:function(e){e?this.defines.VIGNETTE="1":delete this.defines.VIGNETTE,this.needsUpdate=!0}},{key:"setEskilEnabled",value:function(e){e?this.defines.ESKIL="1":delete this.defines.ESKIL,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Vt=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"GlitchMaterial",uniforms:{tDiffuse:new e.Uniform(null),tPerturb:new e.Uniform(null),active:new e.Uniform(1),amount:new e.Uniform(.8),angle:new e.Uniform(.02),seed:new e.Uniform(.02),seedX:new e.Uniform(.02),seedY:new e.Uniform(.02),distortionX:new e.Uniform(.5),distortionY:new e.Uniform(.6),colS:new e.Uniform(.05)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform sampler2D tPerturb;\r\n\r\nuniform bool active;\r\n\r\nuniform float amount;\r\nuniform float angle;\r\nuniform float seed;\r\nuniform float seedX;\r\nuniform float seedY;\r\nuniform float distortionX;\r\nuniform float distortionY;\r\nuniform float colS;\r\n\r\nvarying vec2 vUv;\r\n\r\nfloat rand(vec2 tc) {\r\n\r\n\tconst float a = 12.9898;\r\n\tconst float b = 78.233;\r\n\tconst float c = 43758.5453;\r\n\r\n\tfloat dt = dot(tc, vec2(a, b));\r\n\tfloat sn = mod(dt, 3.14);\r\n\r\n\treturn fract(sin(sn) * c);\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\tvec2 coord = vUv;\r\n\r\n\tfloat xs, ys;\r\n\tvec4 normal;\r\n\r\n\tvec2 offset;\r\n\tvec4 cr, cga, cb;\r\n\tvec4 snow, color;\r\n\r\n\tfloat sx, sy;\r\n\r\n\tif(active) {\r\n\r\n\t\txs = floor(gl_FragCoord.x / 0.5);\r\n\t\tys = floor(gl_FragCoord.y / 0.5);\r\n\r\n\t\tnormal = texture2D(tPerturb, coord * seed * seed);\r\n\r\n\t\tif(coord.y < distortionX + colS && coord.y > distortionX - colS * seed) {\r\n\r\n\t\t\tsx = clamp(ceil(seedX), 0.0, 1.0);\r\n\t\t\tcoord.y = sx * (1.0 - (coord.y + distortionY)) + (1.0 - sx) * distortionY;\r\n\r\n\t\t}\r\n\r\n\t\tif(coord.x < distortionY + colS && coord.x > distortionY - colS * seed) {\r\n\r\n\t\t\tsy = clamp(ceil(seedY), 0.0, 1.0);\r\n\t\t\tcoord.x = sy * distortionX + (1.0 - sy) * (1.0 - (coord.x + distortionX));\r\n\r\n\t\t}\r\n\r\n\t\tcoord.x += normal.x * seedX * (seed / 5.0);\r\n\t\tcoord.y += normal.y * seedY * (seed / 5.0);\r\n\r\n\t\toffset = amount * vec2(cos(angle), sin(angle));\r\n\r\n\t\tcr = texture2D(tDiffuse, coord + offset);\r\n\t\tcga = texture2D(tDiffuse, coord);\r\n\t\tcb = texture2D(tDiffuse, coord - offset);\r\n\r\n\t\tcolor = vec4(cr.r, cga.g, cb.b, cga.a);\r\n\t\tsnow = 200.0 * amount * vec4(rand(vec2(xs * seed, ys * seed * 50.0)) * 0.2);\r\n\t\tcolor += snow;\r\n\r\n\t} else {\r\n\r\n\t\tcolor = texture2D(tDiffuse, vUv);\r\n\r\n\t}\r\n\r\n\tgl_FragColor = color;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Yt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var r=Object.assign({exposure:.6,density:.93,decay:.96,weight:.4,clampMax:1},t);return u(this,s(a).call(this,{type:"GodRaysMaterial",defines:{NUM_SAMPLES_FLOAT:"60.0",NUM_SAMPLES_INT:"60"},uniforms:{tDiffuse:new e.Uniform(null),lightPosition:new e.Uniform(null),exposure:new e.Uniform(r.exposure),decay:new e.Uniform(r.decay),density:new e.Uniform(r.density),weight:new e.Uniform(r.weight),clampMax:new e.Uniform(r.clampMax)},fragmentShader:"#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D tDiffuse;\r\nuniform vec3 lightPosition;\r\n\r\nuniform float exposure;\r\nuniform float decay;\r\nuniform float density;\r\nuniform float weight;\r\nuniform float clampMax;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec2 texCoord = vUv;\r\n\r\n\t// Calculate vector from pixel to light source in screen space.\r\n\tvec2 deltaTexCoord = texCoord - lightPosition.st;\r\n\tdeltaTexCoord *= 1.0 / NUM_SAMPLES_FLOAT * density;\r\n\r\n\t// A decreasing illumination factor.\r\n\tfloat illuminationDecay = 1.0;\r\n\r\n\tvec4 sample;\r\n\tvec4 color = vec4(0.0);\r\n\r\n\t// Estimate the probability of occlusion at each pixel by summing samples along a ray to the light source.\r\n\tfor(int i = 0; i < NUM_SAMPLES_INT; ++i) {\r\n\r\n\t\ttexCoord -= deltaTexCoord;\r\n\t\tsample = texture2D(tDiffuse, texCoord);\r\n\r\n\t\t// Apply sample attenuation scale/decay factors.\r\n\t\tsample *= illuminationDecay * weight;\r\n\r\n\t\tcolor += sample;\r\n\r\n\t\t// Update exponential decay factor.\r\n\t\tilluminationDecay *= decay;\r\n\r\n\t}\r\n\r\n\tgl_FragColor = clamp(color * exposure, 0.0, clampMax);\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Nt=function(t){function a(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o;n(this,a);var i=null!==r;return o=u(this,s(a).call(this,{type:"LuminosityMaterial",uniforms:{tDiffuse:new e.Uniform(null),distinction:new e.Uniform(1),range:new e.Uniform(i?r:new e.Vector2)},fragmentShader:"#include <common>\r\n\r\nuniform sampler2D tDiffuse;\r\nuniform float distinction;\r\nuniform vec2 range;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(tDiffuse, vUv);\r\n\tfloat l = linearToRelativeLuminance(texel.rgb);\r\n\r\n\t#ifdef RANGE\r\n\r\n\t\tfloat low = step(range.x, l);\r\n\t\tfloat high = step(l, range.y);\r\n\r\n\t\t// Apply the mask.\r\n\t\tl *= low * high;\r\n\r\n\t#endif\r\n\r\n\tl = pow(abs(l), distinction);\r\n\r\n\t#ifdef COLOR\r\n\r\n\t\tgl_FragColor = vec4(texel.rgb * l, texel.a);\r\n\r\n\t#else\r\n\r\n\t\tgl_FragColor = vec4(l, l, l, texel.a);\r\n\r\n\t#endif\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n"})),o.setColorOutputEnabled(t),o.setLuminanceRangeEnabled(i),o}return i(a,t),o(a,[{key:"setColorOutputEnabled",value:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"setLuminanceRangeEnabled",value:function(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Xt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;n(this,a);var o=Object.assign({edgeStrength:1,patternScale:1,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,alphaBlending:!1,xRay:!0},t);return r=u(this,s(a).call(this,{type:"OutlineBlendMaterial",uniforms:{pulse:new e.Uniform(1),aspect:new e.Uniform(1),tDiffuse:new e.Uniform(null),tMask:new e.Uniform(null),tEdges:new e.Uniform(null),tPattern:new e.Uniform(null),edgeStrength:new e.Uniform(o.edgeStrength),patternScale:new e.Uniform(o.patternScale),visibleEdgeColor:new e.Uniform(new e.Color(o.visibleEdgeColor)),hiddenEdgeColor:new e.Uniform(new e.Color(o.hiddenEdgeColor))},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform sampler2D tMask;\r\nuniform sampler2D tEdges;\r\n\r\nuniform vec3 visibleEdgeColor;\r\nuniform vec3 hiddenEdgeColor;\r\nuniform float pulse;\r\nuniform float edgeStrength;\r\n\r\n#ifdef USE_PATTERN\r\n\r\n\tuniform sampler2D tPattern;\r\n\tvarying vec2 vPatternCoord;\r\n\r\n#endif\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 color = texture2D(tDiffuse, vUv);\r\n\tvec2 edge = texture2D(tEdges, vUv).rg;\r\n\tvec2 mask = texture2D(tMask, vUv).rg;\r\n\r\n\t#ifndef X_RAY\r\n\r\n\t\tedge.y = 0.0;\r\n\r\n\t#endif\r\n\r\n\tedge *= (edgeStrength * mask.x * pulse);\r\n\tvec3 outlineColor = edge.x * visibleEdgeColor + edge.y * hiddenEdgeColor;\r\n\r\n\t#ifdef ALPHA_BLENDING\r\n\r\n\t\tcolor.rgb = mix(color.rgb, outlineColor, max(edge.x, edge.y));\r\n\r\n\t#else\r\n\r\n\t\tcolor.rgb += outlineColor;\r\n\r\n\t#endif\r\n\r\n\t#ifdef USE_PATTERN\r\n\r\n\t\tvec3 patternColor = texture2D(tPattern, vPatternCoord).rgb;\r\n\r\n\t\t#ifdef X_RAY\r\n\r\n\t\t\tfloat hiddenFactor = 0.5;\r\n\r\n\t\t#else\r\n\r\n\t\t\tfloat hiddenFactor = 0.0;\r\n\r\n\t\t#endif\r\n\r\n\t\tfloat visibilityFactor = (1.0 - mask.y > 0.0) ? 1.0 : hiddenFactor;\r\n\r\n\t\tcolor.rgb += visibilityFactor * (1.0 - mask.x) * (1.0 - patternColor);\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor = color;\r\n\r\n}\r\n",vertexShader:"#ifdef USE_PATTERN\r\n\r\n\tuniform float aspect;\r\n\tuniform float patternScale;\r\n\tvarying vec2 vPatternCoord;\r\n\r\n#endif\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\t#ifdef USE_PATTERN\r\n\r\n\t\tvec2 aspectCorrection = vec2(aspect, 1.0);\r\n\t\tvPatternCoord = uv * aspectCorrection * patternScale;\r\n\r\n\t#endif\r\n\r\n\tvUv = uv;\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),r.setAlphaBlendingEnabled(o.alphaBlending),r.setXRayEnabled(o.xRay),r}return i(a,t),o(a,[{key:"setAlphaBlendingEnabled",value:function(e){e?this.defines.ALPHA_BLENDING="1":delete this.defines.ALPHA_BLENDING,this.needsUpdate=!0}},{key:"setXRayEnabled",value:function(e){e?this.defines.X_RAY="1":delete this.defines.X_RAY,this.needsUpdate=!0}},{key:"setPatternTexture",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null===e?delete this.defines.USE_PATTERN:this.defines.USE_PATTERN="1",this.uniforms.tPattern.value=e,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Wt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,r;return n(this,a),r=u(this,s(a).call(this,{type:"OutlineEdgesMaterial",uniforms:{tMask:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2())},fragmentShader:"uniform sampler2D tMask;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvec2 c0 = texture2D(tMask, vUv0).rg;\r\n\tvec2 c1 = texture2D(tMask, vUv1).rg;\r\n\tvec2 c2 = texture2D(tMask, vUv2).rg;\r\n\tvec2 c3 = texture2D(tMask, vUv3).rg;\r\n\r\n\tfloat d0 = (c0.x - c1.x) * 0.5;\r\n\tfloat d1 = (c2.x - c3.x) * 0.5;\r\n\tfloat d = length(vec2(d0, d1));\r\n\r\n\tfloat a0 = min(c0.y, c1.y);\r\n\tfloat a1 = min(c2.y, c3.y);\r\n\tfloat visibilityFactor = min(a0, a1);\r\n\r\n\tgl_FragColor.rg = (1.0 - visibilityFactor > 0.001) ? vec2(d, 0.0) : vec2(0.0, d);\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvUv0 = vec2(uv.x + texelSize.x, uv.y);\r\n\tvUv1 = vec2(uv.x - texelSize.x, uv.y);\r\n\tvUv2 = vec2(uv.x, uv.y + texelSize.y);\r\n\tvUv3 = vec2(uv.x, uv.y - texelSize.y);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),r.setTexelSize(t.x,t.y),r}return i(a,t),o(a,[{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t)}}]),a}(e.ShaderMaterial),jt=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"PixelationMaterial",uniforms:{tDiffuse:new e.Uniform(null),granularity:new e.Uniform(1),resolution:new e.Uniform(new e.Vector2(1,1)),dx:new e.Uniform(1),dy:new e.Uniform(1)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform float granularity;\r\nuniform float dx;\r\nuniform float dy;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel;\r\n\r\n\tif(granularity > 0.0) {\r\n\r\n\t\tvec2 coord = vec2(\r\n\t\t\tdx * (floor(vUv.x / dx) + 0.5),\r\n\t\t\tdy * (floor(vUv.y / dy) + 0.5)\r\n\t\t);\r\n\r\n\t\ttexel = texture2D(tDiffuse, coord);\r\n\r\n\t} else {\r\n\r\n\t\ttexel = texture2D(tDiffuse, vUv);\r\n\r\n\t}\r\n\r\n\tgl_FragColor = texel;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),o(a,[{key:"setResolution",value:function(e,t){this.uniforms.resolution.value.set(e,t),this.granularity=this.granularity}},{key:"granularity",get:function(){return this.uniforms.granularity.value},set:function(e){var t=this.uniforms,a=t.resolution.value;t.granularity.value=e,t.dx.value=e/a.x,t.dy.value=e/a.y}}]),a}(e.ShaderMaterial),Kt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o;n(this,a);var i=Object.assign({texelSize:null,rings:3,samples:2,showFocus:!1,manualDoF:!1,vignette:!1,pentagon:!1,shaderFocus:!0,noise:!0,maxBlur:1,luminanceThreshold:.5,luminanceGain:2,bias:.5,fringe:.7,ditherStrength:1e-4},r);return o=u(this,s(a).call(this,{type:"RealisticBokehMaterial",defines:{RINGS_INT:i.rings.toFixed(0),RINGS_FLOAT:i.rings.toFixed(1),SAMPLES_INT:i.samples.toFixed(0),SAMPLES_FLOAT:i.samples.toFixed(1)},uniforms:{tDiffuse:new e.Uniform(null),tDepth:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2()),halfTexelSize:new e.Uniform(new e.Vector2()),cameraNear:new e.Uniform(.1),cameraFar:new e.Uniform(2e3),focalLength:new e.Uniform(24),focalStop:new e.Uniform(.9),maxBlur:new e.Uniform(i.maxBlur),luminanceThreshold:new e.Uniform(i.luminanceThreshold),luminanceGain:new e.Uniform(i.luminanceGain),bias:new e.Uniform(i.bias),fringe:new e.Uniform(i.fringe),ditherStrength:new e.Uniform(i.ditherStrength),focusCoords:new e.Uniform(new e.Vector2(.5,.5)),focalDepth:new e.Uniform(1)},fragmentShader:"#include <common>\r\n\r\nuniform sampler2D tDiffuse;\r\nuniform sampler2D tDepth;\r\n\r\nuniform vec2 texelSize;\r\nuniform vec2 halfTexelSize;\r\n\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\n\r\nuniform float focalLength;\r\nuniform float focalStop;\r\n\r\nuniform float maxBlur;\r\nuniform float luminanceThreshold;\r\nuniform float luminanceGain;\r\nuniform float bias;\r\nuniform float fringe;\r\nuniform float ditherStrength;\r\n\r\n#ifdef SHADER_FOCUS\r\n\r\n\tuniform vec2 focusCoords;\r\n\r\n#else\r\n\r\n\tuniform float focalDepth;\r\n\r\n#endif\r\n\r\nvarying vec2 vUv;\r\n\r\n#ifndef USE_LOGDEPTHBUF\r\n\r\n\t#include <packing>\r\n\r\n\tfloat readDepth(sampler2D depthSampler, vec2 coord) {\r\n\r\n\t\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\r\n\t\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t\treturn viewZToOrthographicDepth(viewZ, cameraNear, cameraFar);\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#ifdef PENTAGON\r\n\r\n\tfloat penta(vec2 coords) {\r\n\r\n\t\tconst vec4 HS0 = vec4( 1.0,          0.0,         0.0, 1.0);\r\n\t\tconst vec4 HS1 = vec4( 0.309016994,  0.951056516, 0.0, 1.0);\r\n\t\tconst vec4 HS2 = vec4(-0.809016994,  0.587785252, 0.0, 1.0);\r\n\t\tconst vec4 HS3 = vec4(-0.809016994, -0.587785252, 0.0, 1.0);\r\n\t\tconst vec4 HS4 = vec4( 0.309016994, -0.951056516, 0.0, 1.0);\r\n\t\tconst vec4 HS5 = vec4( 0.0,          0.0,         1.0, 1.0);\r\n\r\n\t\tconst vec4 ONE = vec4(1.0);\r\n\r\n\t\tconst float P_FEATHER = 0.4;\r\n\t\tconst float N_FEATHER = -P_FEATHER;\r\n\r\n\t\tfloat inOrOut = -4.0;\r\n\r\n\t\tvec4 P = vec4(coords, vec2(RINGS_FLOAT - 1.3));\r\n\r\n\t\tvec4 dist = vec4(\r\n\t\t\tdot(P, HS0),\r\n\t\t\tdot(P, HS1),\r\n\t\t\tdot(P, HS2),\r\n\t\t\tdot(P, HS3)\r\n\t\t);\r\n\r\n\t\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\r\n\r\n\t\tinOrOut += dot(dist, ONE);\r\n\r\n\t\tdist.x = dot(P, HS4);\r\n\t\tdist.y = HS5.w - abs(P.z);\r\n\r\n\t\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\r\n\t\tinOrOut += dist.x;\r\n\r\n\t\treturn clamp(inOrOut, 0.0, 1.0);\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#ifdef SHOW_FOCUS\r\n\r\n\tvec3 debugFocus(vec3 c, float blur, float depth) {\r\n\r\n\t\tfloat edge = 0.002 * depth;\r\n\t\tfloat m = clamp(smoothstep(0.0, edge, blur), 0.0, 1.0);\r\n\t\tfloat e = clamp(smoothstep(1.0 - edge, 1.0, blur), 0.0, 1.0);\r\n\r\n\t\tc = mix(c, vec3(1.0, 0.5, 0.0), (1.0 - m) * 0.6);\r\n\t\tc = mix(c, vec3(0.0, 0.5, 1.0), ((1.0 - e) - (1.0 - m)) * 0.2);\r\n\r\n\t\treturn c;\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#ifdef VIGNETTE\r\n\r\n\tfloat vignette() {\r\n\r\n\t\tconst vec2 CENTER = vec2(0.5);\r\n\r\n\t\tconst float VIGNETTE_OUT = 1.3;\r\n\t\tconst float VIGNETTE_IN = 0.0;\r\n\t\tconst float VIGNETTE_FADE = 22.0; \r\n\r\n\t\tfloat d = distance(vUv, CENTER);\r\n\t\td = smoothstep(VIGNETTE_OUT + (focalStop / VIGNETTE_FADE), VIGNETTE_IN + (focalStop / VIGNETTE_FADE), d);\r\n\r\n\t\treturn clamp(d, 0.0, 1.0);\r\n\r\n\t}\r\n\r\n#endif\r\n\r\nvec2 rand2(vec2 coord) {\r\n\r\n\tvec2 noise;\r\n\r\n\t#ifdef NOISE\r\n\r\n\t\tconst float a = 12.9898;\r\n\t\tconst float b = 78.233;\r\n\t\tconst float c = 43758.5453;\r\n\r\n\t\tnoise.x = clamp(fract(sin(mod(dot(coord, vec2(a, b)), 3.14)) * c), 0.0, 1.0) * 2.0 - 1.0;\r\n\t\tnoise.y = clamp(fract(sin(mod(dot(coord, vec2(a, b) * 2.0), 3.14)) * c), 0.0, 1.0) * 2.0 - 1.0;\r\n\r\n\t#else\r\n\r\n\t\tnoise.x = ((fract(1.0 - coord.s * halfTexelSize.x) * 0.25) + (fract(coord.t * halfTexelSize.y) * 0.75)) * 2.0 - 1.0;\r\n\t\tnoise.y = ((fract(1.0 - coord.s * halfTexelSize.x) * 0.75) + (fract(coord.t * halfTexelSize.y) * 0.25)) * 2.0 - 1.0;\r\n\r\n\t#endif\r\n\r\n\treturn noise;\r\n\r\n}\r\n\r\nvec3 processTexel(vec2 coords, float blur) {\r\n\r\n\tvec3 c;\r\n\tc.r = texture2D(tDiffuse, coords + vec2(0.0, 1.0) * texelSize * fringe * blur).r;\r\n\tc.g = texture2D(tDiffuse, coords + vec2(-0.866, -0.5) * texelSize * fringe * blur).g;\r\n\tc.b = texture2D(tDiffuse, coords + vec2(0.866, -0.5) * texelSize * fringe * blur).b;\r\n\r\n\t// Calculate the luminance of the constructed colour.\r\n\tfloat luminance = linearToRelativeLuminance(c);\r\n\tfloat threshold = max((luminance - luminanceThreshold) * luminanceGain, 0.0);\r\n\r\n\treturn c + mix(vec3(0.0), c, threshold * blur);\r\n\r\n}\r\n\r\nfloat linearize(float depth) {\r\n\r\n\treturn -cameraFar * cameraNear / (depth * (cameraFar - cameraNear) - cameraFar);\r\n\r\n}\r\n\r\nfloat gather(float i, float j, float ringSamples, inout vec3 color, float w, float h, float blur) {\r\n\r\n\tconst float TWO_PI = 6.28318531;\r\n\r\n\tfloat step = TWO_PI / ringSamples;\r\n\tfloat pw = cos(j * step) * i;\r\n\tfloat ph = sin(j * step) * i;\r\n\r\n\t#ifdef PENTAGON\r\n\r\n\t\tfloat p = penta(vec2(pw, ph));\r\n\r\n\t#else\r\n\r\n\t\tfloat p = 1.0;\r\n\r\n\t#endif\r\n\r\n\tcolor += processTexel(vUv + vec2(pw * w, ph * h), blur) * mix(1.0, i / RINGS_FLOAT, bias) * p;\r\n\r\n\treturn mix(1.0, i / RINGS_FLOAT, bias) * p;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\t#ifdef USE_LOGDEPTHBUF\r\n\r\n\t\tfloat depth = linearize(texture2D(tDepth, vUv).x);\r\n\r\n\t#else\r\n\r\n\t\tfloat depth = linearize(readDepth(tDepth, vUv));\r\n\r\n\t#endif\r\n\r\n\t#ifdef SHADER_FOCUS\r\n\r\n\t\t#ifdef USE_LOGDEPTHBUF\r\n\r\n\t\t\tfloat fDepth = linearize(texture2D(tDepth, focusCoords).x);\r\n\r\n\t\t#else\r\n\r\n\t\t\tfloat fDepth = linearize(readDepth(tDepth, focusCoords));\r\n\r\n\t\t#endif\r\n\r\n\t#else\r\n\r\n\t\tfloat fDepth = focalDepth;\r\n\r\n\t#endif\r\n\r\n\t#ifdef MANUAL_DOF\r\n\r\n\t\tconst float nDoFStart = 1.0; \r\n\t\tconst float nDoFDist = 2.0;\r\n\t\tconst float fDoFStart = 1.0;\r\n\t\tconst float fDoFDist = 3.0;\r\n\r\n\t\tfloat focalPlane = depth - fDepth;\r\n\t\tfloat farDoF = (focalPlane - fDoFStart) / fDoFDist;\r\n\t\tfloat nearDoF = (-focalPlane - nDoFStart) / nDoFDist;\r\n\r\n\t\tfloat blur = (focalPlane > 0.0) ? farDoF : nearDoF;\r\n\r\n\t#else\r\n\r\n\t\tconst float CIRCLE_OF_CONFUSION = 0.03; // 35mm film = 0.03mm CoC.\r\n\r\n\t\tfloat focalPlaneMM = fDepth * 1000.0;\r\n\t\tfloat depthMM = depth * 1000.0;\r\n\r\n\t\tfloat focalPlane = (depthMM * focalLength) / (depthMM - focalLength);\r\n\t\tfloat farDoF = (focalPlaneMM * focalLength) / (focalPlaneMM - focalLength);\r\n\t\tfloat nearDoF = (focalPlaneMM - focalLength) / (focalPlaneMM * focalStop * CIRCLE_OF_CONFUSION);\r\n\r\n\t\tfloat blur = abs(focalPlane - farDoF) * nearDoF;\r\n\r\n\t#endif\r\n\r\n\tblur = clamp(blur, 0.0, 1.0);\r\n\r\n\t// Dithering.\r\n\tvec2 noise = rand2(vUv) * ditherStrength * blur;\r\n\r\n\tfloat blurFactorX = texelSize.x * blur * maxBlur + noise.x;\r\n\tfloat blurFactorY = texelSize.y * blur * maxBlur + noise.y;\r\n\r\n\tconst int MAX_RING_SAMPLES = RINGS_INT * SAMPLES_INT;\r\n\r\n\t// Calculation of final color.\r\n\tvec4 color;\r\n\r\n\tif(blur < 0.05) {\r\n\r\n\t\tcolor = texture2D(tDiffuse, vUv);\r\n\r\n\t} else {\r\n\r\n\t\tcolor = texture2D(tDiffuse, vUv);\r\n\r\n\t\tfloat s = 1.0;\r\n\t\tint ringSamples;\r\n\r\n\t\tfor(int i = 1; i <= RINGS_INT; ++i) {\r\n\r\n\t\t\tringSamples = i * SAMPLES_INT;\r\n\r\n\t\t\t// Constant loop.\r\n\t\t\tfor(int j = 0; j < MAX_RING_SAMPLES; ++j) {\r\n\r\n\t\t\t\t// Break earlier.\r\n\t\t\t\tif(j >= ringSamples) { break; }\r\n\r\n\t\t\t\ts += gather(float(i), float(j), float(ringSamples), color.rgb, blurFactorX, blurFactorY, blur);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcolor.rgb /= s; // Divide by sample count.\r\n\r\n\t}\r\n\r\n\t#ifdef SHOW_FOCUS\r\n\r\n\t\tcolor.rgb = debugFocus(color.rgb, blur, depth);\r\n\r\n\t#endif\r\n\r\n\t#ifdef VIGNETTE\r\n\r\n\t\tcolor.rgb *= vignette();\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor = color;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),o.setShowFocusEnabled(i.showFocus),o.setManualDepthOfFieldEnabled(i.manualDoF),o.setVignetteEnabled(i.vignette),o.setPentagonEnabled(i.pentagon),o.setShaderFocusEnabled(i.shaderFocus),o.setNoiseEnabled(i.noise),null!==i.texelSize&&o.setTexelSize(i.texelSize.x,i.texelSize.y),o.adoptCameraSettings(t),o}return i(a,t),o(a,[{key:"setShowFocusEnabled",value:function(e){e?this.defines.SHOW_FOCUS="1":delete this.defines.SHOW_FOCUS,this.needsUpdate=!0}},{key:"setManualDepthOfFieldEnabled",value:function(e){e?this.defines.MANUAL_DOF="1":delete this.defines.MANUAL_DOF,this.needsUpdate=!0}},{key:"setVignetteEnabled",value:function(e){e?this.defines.VIGNETTE="1":delete this.defines.VIGNETTE,this.needsUpdate=!0}},{key:"setPentagonEnabled",value:function(e){e?this.defines.PENTAGON="1":delete this.defines.PENTAGON,this.needsUpdate=!0}},{key:"setShaderFocusEnabled",value:function(e){e?this.defines.SHADER_FOCUS="1":delete this.defines.SHADER_FOCUS,this.needsUpdate=!0}},{key:"setNoiseEnabled",value:function(e){e?this.defines.NOISE="1":delete this.defines.NOISE,this.needsUpdate=!0}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},{key:"adoptCameraSettings",value:function(e){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,this.uniforms.focalLength.value=e.getFocalLength())}}]),a}(e.ShaderMaterial),Jt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var r=Object.assign({maxRadius:1,waveSize:.2,amplitude:.05},t);return u(this,s(a).call(this,{type:"ShockWaveMaterial",uniforms:{tDiffuse:new e.Uniform(null),center:new e.Uniform(new e.Vector2(.5,.5)),aspect:new e.Uniform(1),cameraDistance:new e.Uniform(1),size:new e.Uniform(1),radius:new e.Uniform(-r.waveSize),maxRadius:new e.Uniform(r.maxRadius),waveSize:new e.Uniform(r.waveSize),amplitude:new e.Uniform(r.amplitude)},fragmentShader:"#include <common>\r\n\r\nuniform sampler2D tDiffuse;\r\nuniform vec2 center;\r\nuniform float aspect;\r\nuniform float waveSize;\r\nuniform float radius;\r\nuniform float maxRadius;\r\nuniform float amplitude;\r\n\r\nvarying vec2 vUv;\r\nvarying float vSize;\r\n\r\nvoid main() {\r\n\r\n\tvec2 aspectCorrection = vec2(aspect, 1.0);\r\n\r\n\tvec2 difference = vUv * aspectCorrection - center * aspectCorrection;\r\n\tfloat distance = sqrt(dot(difference, difference)) * vSize;\r\n\r\n\tvec2 displacement = vec2(0.0);\r\n\r\n\tif(distance > radius) {\r\n\r\n\t\tif(distance < radius + waveSize) {\r\n\r\n\t\t\tfloat angle = (distance - radius) * PI2 / waveSize;\r\n\t\t\tfloat cosSin = (1.0 - cos(angle)) * 0.5;\r\n\r\n\t\t\tfloat extent = maxRadius + waveSize;\r\n\t\t\tfloat decay = max(extent - distance * distance, 0.0) / extent;\r\n\r\n\t\t\tdisplacement = ((cosSin * amplitude * difference) / distance) * decay;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgl_FragColor = texture2D(tDiffuse, vUv - displacement);\r\n\r\n}\r\n",vertexShader:"uniform float size;\r\nuniform float scale;\r\nuniform float cameraDistance;\r\n\r\nvarying vec2 vUv;\r\nvarying float vSize;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tvSize = (0.1 * cameraDistance) / size;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),qt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2;return n(this,a),u(this,s(a).call(this,{type:"SMAABlendMaterial",uniforms:{tDiffuse:new e.Uniform(null),tWeights:new e.Uniform(null),texelSize:new e.Uniform(t)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform sampler2D tWeights;\r\n\r\nuniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset;\r\n\r\nvoid main() {\r\n\r\n\t// Fetch the blending weights for current pixel.\r\n\tvec4 a;\r\n\ta.xz = texture2D(tWeights, vUv).xz;\r\n\ta.y = texture2D(tWeights, vOffset.zw).g;\r\n\ta.w = texture2D(tWeights, vOffset.xy).a;\r\n\r\n\tvec4 color;\r\n\r\n\t// Check if there is any blending weight with a value greater than 0.0.\r\n\tif(dot(a, vec4(1.0)) < 1e-5) {\r\n\r\n\t\tcolor = texture2D(tDiffuse, vUv, 0.0);\r\n\r\n\t} else {\r\n\r\n\t\t/* Up to four lines can be crossing a pixel (one through each edge).\r\n\t\t * The line with the maximum weight for each direction is favoured.\r\n\t\t */\r\n\r\n\t\tvec2 offset;\r\n\t\toffset.x = a.a > a.b ? a.a : -a.b; // Left vs. right.\r\n\t\toffset.y = a.g > a.r ? -a.g : a.r; // Top vs. bottom (changed signs).\r\n\r\n\t\t// Go in the direction with the maximum weight (horizontal vs. vertical).\r\n\t\tif(abs(offset.x) > abs(offset.y)) {\r\n\r\n\t\t\toffset.y = 0.0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\toffset.x = 0.0;\r\n\r\n\t\t}\r\n\r\n\t\t// Fetch the opposite color and lerp by hand.\r\n\t\tcolor = texture2D(tDiffuse, vUv, 0.0);\r\n\t\tvec2 coord = vUv + sign(offset) * texelSize;\r\n\t\tvec4 oppositeColor = texture2D(tDiffuse, coord, 0.0);\r\n\t\tfloat s = abs(offset.x) > abs(offset.y) ? abs(offset.x) : abs(offset.y);\r\n\r\n\t\t// Gamma correction.\r\n\t\tcolor.rgb = pow(abs(color.rgb), vec3(2.2));\r\n\t\toppositeColor.rgb = pow(abs(oppositeColor.rgb), vec3(2.2));\r\n\t\tcolor = mix(color, oppositeColor, s);\r\n\t\tcolor.rgb = pow(abs(color.rgb), vec3(1.0 / 2.2));\r\n\r\n\t}\r\n\r\n\tgl_FragColor = color;\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tvOffset = uv.xyxy + texelSize.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // Changed sign in W component.\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Zt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2;return n(this,a),u(this,s(a).call(this,{type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"8",MAX_SEARCH_STEPS_FLOAT:"8.0",AREATEX_MAX_DISTANCE:"16.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{tDiffuse:new e.Uniform(null),tArea:new e.Uniform(null),tSearch:new e.Uniform(null),texelSize:new e.Uniform(t)},fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + float(offset) * texelSize, 0.0)\r\n\r\nuniform sampler2D tDiffuse;\r\nuniform sampler2D tArea;\r\nuniform sampler2D tSearch;\r\n\r\nuniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\nvarying vec2 vPixCoord;\r\n\r\nvec2 round(vec2 x) {\r\n\r\n\treturn sign(x) * floor(abs(x) + 0.5);\r\n\r\n}\r\n\r\nfloat searchLength(vec2 e, float bias, float scale) {\r\n\r\n\t// Not required if tSearch accesses are set to point.\r\n\t// const vec2 SEARCH_TEX_PIXEL_SIZE = 1.0 / vec2(66.0, 33.0);\r\n\t// e = vec2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE + e * vec2(scale, 1.0) * vec2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\r\n\r\n\te.r = bias + e.r * scale;\r\n\r\n\treturn 255.0 * texture2D(tSearch, e, 0.0).r;\r\n\r\n}\r\n\r\nfloat searchXLeft(vec2 texCoord, float end) {\r\n\r\n\t/* @PSEUDO_GATHER4\r\n\t * This texCoord has been offset by (-0.25, -0.125) in the vertex shader to\r\n\t * sample between edge, thus fetching four edges in a row.\r\n\t * Sampling with different offsets in each direction allows to disambiguate\r\n\t * which edges are active from the four fetched ones.\r\n\t */\r\n\r\n\tvec2 e = vec2(0.0, 1.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(tDiffuse, texCoord, 0.0).rg;\r\n\t\ttexCoord -= vec2(2.0, 0.0) * texelSize;\r\n\r\n\t\tif(!(texCoord.x > end && e.g > 0.8281 && e.r == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\t// Correct the previously applied offset (-0.25, -0.125).\r\n\ttexCoord.x += 0.25 * texelSize.x;\r\n\r\n\t// The searches are biased by 1, so adjust the coords accordingly.\r\n\ttexCoord.x += texelSize.x;\r\n\r\n\t// Disambiguate the length added by the last step.\r\n\ttexCoord.x += 2.0 * texelSize.x; // Undo last step.\r\n\ttexCoord.x -= texelSize.x * searchLength(e, 0.0, 0.5);\r\n\r\n\treturn texCoord.x;\r\n\r\n}\r\n\r\nfloat searchXRight(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(0.0, 1.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(tDiffuse, texCoord, 0.0).rg;\r\n\t\ttexCoord += vec2(2.0, 0.0) * texelSize;\r\n\r\n\t\tif(!(texCoord.x < end && e.g > 0.8281 && e.r == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.x -= 0.25 * texelSize.x;\r\n\ttexCoord.x -= texelSize.x;\r\n\ttexCoord.x -= 2.0 * texelSize.x;\r\n\ttexCoord.x += texelSize.x * searchLength(e, 0.5, 0.5);\r\n\r\n\treturn texCoord.x;\r\n\r\n}\r\n\r\nfloat searchYUp(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(1.0, 0.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(tDiffuse, texCoord, 0.0).rg;\r\n\t\ttexCoord += vec2(0.0, 2.0) * texelSize; // Changed sign.\r\n\r\n\t\tif(!(texCoord.y > end && e.r > 0.8281 && e.g == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.y -= 0.25 * texelSize.y; // Changed sign.\r\n\ttexCoord.y -= texelSize.y; // Changed sign.\r\n\ttexCoord.y -= 2.0 * texelSize.y; // Changed sign.\r\n\ttexCoord.y += texelSize.y * searchLength(e.gr, 0.0, 0.5); // Changed sign.\r\n\r\n\treturn texCoord.y;\r\n\r\n}\r\n\r\nfloat searchYDown(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(1.0, 0.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i ) {\r\n\r\n\t\te = texture2D(tDiffuse, texCoord, 0.0).rg;\r\n\t\ttexCoord -= vec2(0.0, 2.0) * texelSize; // Changed sign.\r\n\r\n\t\tif(!(texCoord.y < end && e.r > 0.8281 && e.g == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.y += 0.25 * texelSize.y; // Changed sign.\r\n\ttexCoord.y += texelSize.y; // Changed sign.\r\n\ttexCoord.y += 2.0 * texelSize.y; // Changed sign.\r\n\ttexCoord.y -= texelSize.y * searchLength(e.gr, 0.5, 0.5); // Changed sign.\r\n\r\n\treturn texCoord.y;\r\n\r\n}\r\n\r\nvec2 area(vec2 dist, float e1, float e2, float offset) {\r\n\r\n\t// Rounding prevents precision errors of bilinear filtering.\r\n\tvec2 texCoord = AREATEX_MAX_DISTANCE * round(4.0 * vec2(e1, e2)) + dist;\r\n\r\n\t// Scale and bias for texel space translation.\r\n\ttexCoord = AREATEX_PIXEL_SIZE * texCoord + (0.5 * AREATEX_PIXEL_SIZE);\r\n\r\n\t// Move to proper place, according to the subpixel offset.\r\n\ttexCoord.y += AREATEX_SUBTEX_SIZE * offset;\r\n\r\n\treturn texture2D(tArea, texCoord, 0.0).rg;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\tvec4 weights = vec4(0.0);\r\n\tvec4 subsampleIndices = vec4(0.0);\r\n\tvec2 e = texture2D(tDiffuse, vUv).rg;\r\n\r\n\tif(e.g > 0.0) {\r\n\r\n\t\t// Edge at north.\r\n\t\tvec2 d;\r\n\r\n\t\t// Find the distance to the left.\r\n\t\tvec2 coords;\r\n\t\tcoords.x = searchXLeft(vOffset[0].xy, vOffset[2].x);\r\n\t\tcoords.y = vOffset[1].y; // vOffset[1].y = vUv.y - 0.25 * texelSize.y (@CROSSING_OFFSET)\r\n\t\td.x = coords.x;\r\n\r\n\t\t/* Now fetch the left crossing edges, two at a time using bilinear\r\n\t\tfiltering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to discern what\r\n\t\tvalue each edge has. */\r\n\t\tfloat e1 = texture2D(tDiffuse, coords, 0.0).r;\r\n\r\n\t\t// Find the distance to the right.\r\n\t\tcoords.x = searchXRight(vOffset[0].zw, vOffset[2].y);\r\n\t\td.y = coords.x;\r\n\r\n\t\t/* Translate distances to pixel units for better interleave arithmetic and\r\n\t\tmemory accesses. */\r\n\t\td = d / texelSize.x - vPixCoord.x;\r\n\r\n\t\t// The area texture is compressed quadratically.\r\n\t\tvec2 sqrtD = sqrt(abs(d));\r\n\r\n\t\t// Fetch the right crossing edges.\r\n\t\tcoords.y -= texelSize.y; // WebGL port note: Added.\r\n\t\tfloat e2 = sampleLevelZeroOffset(tDiffuse, coords, ivec2(1, 0)).r;\r\n\r\n\t\t// Pattern recognised, now get the actual area.\r\n\t\tweights.rg = area(sqrtD, e1, e2, subsampleIndices.y);\r\n\r\n\t}\r\n\r\n\tif(e.r > 0.0) {\r\n\r\n\t\t// Edge at west.\r\n\t\tvec2 d;\r\n\r\n\t\t// Find the distance to the top.\r\n\t\tvec2 coords;\r\n\t\tcoords.y = searchYUp(vOffset[1].xy, vOffset[2].z);\r\n\t\tcoords.x = vOffset[0].x; // vOffset[1].x = vUv.x - 0.25 * texelSize.x;\r\n\t\td.x = coords.y;\r\n\r\n\t\t// Fetch the top crossing edges.\r\n\t\tfloat e1 = texture2D(tDiffuse, coords, 0.0).g;\r\n\r\n\t\t// Find the distance to the bottom.\r\n\t\tcoords.y = searchYDown(vOffset[1].zw, vOffset[2].w);\r\n\t\td.y = coords.y;\r\n\r\n\t\t// Distances in pixel units.\r\n\t\td = d / texelSize.y - vPixCoord.y;\r\n\r\n\t\t// The area texture is compressed quadratically.\r\n\t\tvec2 sqrtD = sqrt(abs(d));\r\n\r\n\t\t// Fetch the bottom crossing edges.\r\n\t\tcoords.y -= texelSize.y; // WebGL port note: Added.\r\n\t\tfloat e2 = sampleLevelZeroOffset(tDiffuse, coords, ivec2(0, 1)).g;\r\n\r\n\t\t// Get the area for this direction.\r\n\t\tweights.ba = area(sqrtD, e1, e2, subsampleIndices.x);\r\n\r\n\t}\r\n\r\n\tgl_FragColor = weights;\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\nvarying vec2 vPixCoord;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tvPixCoord = uv / texelSize;\r\n\r\n\t// Offsets for the searches (see @PSEUDO_GATHER4).\r\n\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-0.25, 0.125, 1.25, 0.125); // Changed sign in Y and W components.\r\n\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(-0.125, 0.25, -0.125, -1.25); //Changed sign in Y and W components.\r\n\r\n\t// This indicates the ends of the loops.\r\n\tvOffset[2] = vec4(vOffset[0].xz, vOffset[1].yw) + vec4(-2.0, 2.0, -2.0, 2.0) * texelSize.xxyy * MAX_SEARCH_STEPS_FLOAT;\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),o(a,[{key:"setOrthogonalSearchSteps",value:function(e){this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),$t=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"ToneMappingMaterial",uniforms:{tDiffuse:new e.Uniform(null),luminanceMap:new e.Uniform(null),averageLuminance:new e.Uniform(1),maxLuminance:new e.Uniform(16),middleGrey:new e.Uniform(.6)},fragmentShader:"#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D tDiffuse;\r\nuniform float middleGrey;\r\nuniform float maxLuminance;\r\n\r\n#ifdef ADAPTED_LUMINANCE\r\n\r\n\tuniform sampler2D luminanceMap;\r\n\r\n#else\r\n\r\n\tuniform float averageLuminance;\r\n\r\n#endif\r\n\r\nvarying vec2 vUv;\r\n\r\nvec3 toneMap(vec3 c) {\r\n\r\n\t#ifdef ADAPTED_LUMINANCE\r\n\r\n\t\t// Get the calculated average luminance by sampling the center.\r\n\t\tfloat lumAvg = texture2D(luminanceMap, vec2(0.5)).r;\r\n\r\n\t#else\r\n\r\n\t\tfloat lumAvg = averageLuminance;\r\n\r\n\t#endif\r\n\r\n\t// Calculate the luminance of the current pixel.\r\n\tfloat lumPixel = linearToRelativeLuminance(c);\r\n\r\n\t// Apply the modified operator (Reinhard Eq. 4).\r\n\tfloat lumScaled = (lumPixel * middleGrey) / lumAvg;\r\n\r\n\tfloat lumCompressed = (lumScaled * (1.0 + (lumScaled / (maxLuminance * maxLuminance)))) / (1.0 + lumScaled);\r\n\r\n\treturn lumCompressed * c;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(tDiffuse, vUv);\r\n\tgl_FragColor = vec4(toneMap(texel.rgb), texel.a);\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),ea=function(){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Pass",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Scene,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new e.OrthographicCamera(-1,1,1,-1,0,1);n(this,t),this.name=a,this.scene=r,this.camera=o,this.quad=null,this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0}return o(t,[{key:"getFullscreenMaterial",value:function(){return null===this.quad?null:this.quad.material}},{key:"setFullscreenMaterial",value:function(t){var a=this.quad;null===a?(a=new e.Mesh(new e.PlaneBufferGeometry(2,2),t),a.frustumCulled=!1,null!==this.scene&&(this.scene.add(a),this.quad=a)):a.material=t}},{key:"render",value:function(){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(){}},{key:"initialize",value:function(){}},{key:"dispose",value:function(){var e=this.getFullscreenMaterial();null!==e&&e.dispose();for(var t=Object.keys(this),a=0,n;a<t.length;a++)n=t[a],null!==this[n]&&"function"==typeof this[n].dispose&&(this[n].dispose(),this[n]=null)}},{key:"material",get:function(){return console.warn("Pass.material has been deprecated, please use Pass.getFullscreenMaterial()"),this.getFullscreenMaterial()},set:function(e){console.warn("Pass.material has been deprecated, please use Pass.setFullscreenMaterial(Material)"),this.setFullscreenMaterial(e)}}]),t}(),ta=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;return n(this,a),r=u(this,s(a).call(this,"BlurPass")),r.renderTargetX=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),r.renderTargetX.texture.name="Blur.TargetX",r.renderTargetX.texture.generateMipmaps=!1,r.renderTargetY=r.renderTargetX.clone(),r.renderTargetY.texture.name="Blur.TargetY",r.resolution=new e.Vector2,r.resolutionScale=void 0===t.resolutionScale?.5:t.resolutionScale,r.convolutionMaterial=new Ot,r.ditheredConvolutionMaterial=new Ot,r.ditheredConvolutionMaterial.dithering=!0,r.dithering=!1,r.kernelSize=t.kernelSize,r}return i(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.resolutionScale}},{key:"setResolutionScale",value:function(e){this.resolutionScale=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function(e,t,a){var n=this.scene,r=this.camera,o=this.renderTargetX,s=this.renderTargetY,d=this.convolutionMaterial,c=d.uniforms,u=d.getKernel(),g=t,m,f,p;for(this.setFullscreenMaterial(d),f=0,p=u.length-1;f<p;++f)m=0==f%2?o:s,c.kernel.value=u[f],c.tDiffuse.value=g.texture,e.render(n,r,m),g=m;this.dithering&&(d=this.ditheredConvolutionMaterial,c=d.uniforms,this.setFullscreenMaterial(d)),c.kernel.value=u[f],c.tDiffuse.value=g.texture,e.render(n,r,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),e=Pe(1,ze(e*this.resolutionScale)),t=Pe(1,ze(t*this.resolutionScale)),this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t),this.convolutionMaterial.setTexelSize(1/e,1/t),this.ditheredConvolutionMaterial.setTexelSize(1/e,1/t)}},{key:"initialize",value:function(t,a){a||(this.renderTargetX.texture.format=e.RGBFormat,this.renderTargetY.texture.format=e.RGBFormat)}},{key:"width",get:function(){return this.renderTargetX.width}},{key:"height",get:function(){return this.renderTargetX.height}},{key:"kernelSize",get:function(){return this.convolutionMaterial.kernelSize},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ut.LARGE;this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}}]),a}(ea),aa=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;return n(this,a),r=u(this,s(a).call(this,"BloomPass")),r.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),r.renderTarget.texture.name="Bloom.Target",r.renderTarget.texture.generateMipmaps=!1,r.blurPass=new ta(t),r.resolution=new e.Vector2,r.combineMaterial=new It(void 0===t.screenMode||t.screenMode),r.intensity=t.intensity,r.luminosityMaterial=new Nt(!0),r.distinction=t.distinction,r}return i(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){this.blurPass.setResolutionScale(e),this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function(e,t,a){var n=this.scene,r=this.camera,o=this.blurPass,i=this.luminosityMaterial,s=this.combineMaterial,l=this.renderTarget;this.setFullscreenMaterial(i),i.uniforms.tDiffuse.value=t.texture,e.render(n,r,l),o.render(e,l,l),this.blend&&(this.setFullscreenMaterial(s),s.uniforms.texture1.value=t.texture,s.uniforms.texture2.value=l.texture,e.render(n,r,this.renderToScreen?null:a))}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.blurPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTarget.setSize(e,t)}},{key:"initialize",value:function(t,a){this.blurPass.initialize(t,a),a||(this.renderTarget.texture.format=e.RGBFormat)}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ut.LARGE;this.blurPass.kernelSize=e}},{key:"intensity",get:function(){return this.combineMaterial.uniforms.opacity2.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.combineMaterial.uniforms.opacity2.value=e}},{key:"distinction",get:function(){return this.luminosityMaterial.uniforms.distinction.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.luminosityMaterial.uniforms.distinction.value=e}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"blend",get:function(){return this.needsSwap},set:function(e){this.needsSwap=e}},{key:"overlay",get:function(){return this.renderTarget.texture}},{key:"resolutionScale",get:function(){return console.warn("BloomPass.resolutionScale has been deprecated, please use BloomPass.getResolutionScale()"),this.getResolutionScale()},set:function(e){console.warn("BloomPass.resolutionScale has been deprecated, please use BloomPass.setResolutionScale(Number)"),this.setResolutionScale(e)}}]),a}(ea),na=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r;return n(this,t),r=u(this,s(t).call(this,"BokehPass")),r.setFullscreenMaterial(new Lt(e,a)),r}return i(t,e),o(t,[{key:"render",value:function(e,t,a){var n=this.getFullscreenMaterial().uniforms;n.tDiffuse.value=t.texture,n.tDepth.value=t.depthTexture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.getFullscreenMaterial().uniforms.aspect.value=e/t}}]),t}(ea),ra=function(e){function t(){var e;return n(this,t),e=u(this,s(t).call(this,"ClearMaskPass",null,null)),e.needsSwap=!1,e}return i(t,e),o(t,[{key:"render",value:function(e){e.state.buffers.stencil.setTest(!1)}}]),t}(ea),oa=new e.Color,ia=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a;return n(this,t),a=u(this,s(t).call(this,"ClearPass",null,null)),a.needsSwap=!1,a.clearColor=void 0===e.clearColor?null:e.clearColor,a.clearAlpha=void 0===e.clearAlpha?0:e.clearAlpha,a}return i(t,e),o(t,[{key:"render",value:function(e,t){var a=this.clearColor,n;null!==a&&(oa.copy(e.getClearColor()),n=e.getClearAlpha(),e.setClearColor(a,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?null:t),e.clear(),null!==a&&e.setClearColor(oa,n)}}]),t}(ea),sa=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a;return n(this,t),a=u(this,s(t).call(this,"DotScreenPass")),a.setFullscreenMaterial(new _t(e)),a}return i(t,e),o(t,[{key:"render",value:function(e,t,a){this.getFullscreenMaterial().uniforms.tDiffuse.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){e=Pe(1,e),t=Pe(1,t);var a=this.getFullscreenMaterial().uniforms;a.offsetRepeat.value.z=e,a.offsetRepeat.value.w=t}}]),t}(ea),la=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;return n(this,a),r=u(this,s(a).call(this,"FilmPass")),r.setFullscreenMaterial(new Ht(t)),r.resolution=new e.Vector2,r.scanlineDensity=void 0===t.scanlineDensity?1.25:t.scanlineDensity,r.gridScale=void 0===t.gridScale?1:Pe(t.gridScale,1e-6),r.gridLineWidth=void 0===t.gridLineWidth?0:Pe(t.gridLineWidth,0),r}return i(a,t),o(a,[{key:"getScanlineDensity",value:function(){return this.scanlineDensity}},{key:"setScanlineDensity",value:function(e){this.scanlineDensity=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"getGridScale",value:function(){return this.gridScale}},{key:"setGridScale",value:function(e){this.gridScale=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"getGridLineWidth",value:function(){return this.gridLineWidth}},{key:"setGridLineWidth",value:function(e){this.gridLineWidth=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function(e,t,a,n){var r=this.getFullscreenMaterial().uniforms;r.tDiffuse.value=t.texture,r.time.value+=n,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t);var a=this.gridScale*(.125*t),n=this.getFullscreenMaterial().uniforms;n.scanlineCount.value=Le(t*this.scanlineDensity),n.gridScale.value.set(e/t*a,a),n.gridLineWidth.value=a/t+this.gridLineWidth}}]),a}(ea),da=function(t){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t;return n(this,a),t=u(this,s(a).call(this,"GlitchPass")),t.setFullscreenMaterial(new Vt),t.texture=null,t.perturbMap=void 0===e.perturbMap?t.generatePerturbMap(e.dtSize):e.perturbMap,t.perturbMap.name="Glitch.Perturbation",t.perturbMap.generateMipmaps=!1,t.mode=ca.SPORADIC,t.counter=0,t.breakPoint=j(120,240),t}return i(a,t),o(a,[{key:"generatePerturbMap",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:64,a=t*t,n=new Float32Array(3*a),r=this.perturbMap,o,s;for(o=0;o<a;++o)s=Math.random(),n[3*o]=s,n[3*o+1]=s,n[3*o+2]=s;return null!==r&&r.dispose(),r=new e.DataTexture(n,t,t,e.RGBFormat,e.FloatType),r.needsUpdate=!0,this.perturbMap=r,r}},{key:"render",value:function(e,t,a){var n=this.mode,r=this.counter,o=this.breakPoint,i=this.getFullscreenMaterial().uniforms;i.tDiffuse.value=t.texture,i.seed.value=Math.random(),i.active.value=!0,0==r%o||n===ca.CONSTANT_WILD?(i.amount.value=Math.random()/30,i.angle.value=K(-we,Math.PI),i.seedX.value=K(-1,1),i.seedY.value=K(-1,1),i.distortionX.value=K(0,1),i.distortionY.value=K(0,1),this.breakPoint=j(120,240),this.counter=0):r%o<o/5||n===ca.CONSTANT_MILD?(i.amount.value=Math.random()/90,i.angle.value=K(-we,Math.PI),i.distortionX.value=K(0,1),i.distortionY.value=K(0,1),i.seedX.value=K(-.3,.3),i.seedY.value=K(-.3,.3)):i.active.value=!1,++this.counter,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"perturbMap",get:function(){return this.texture},set:function(e){this.texture=e,this.getFullscreenMaterial().uniforms.tPerturb.value=e}}]),a}(ea),ca={SPORADIC:0,CONSTANT_MILD:1,CONSTANT_WILD:2},ua=function(e){function t(e,a){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o;return n(this,t),o=u(this,s(t).call(this,"RenderPass",e,a)),o.needsSwap=!1,o.clearPass=new ia(r),o.overrideMaterial=void 0===r.overrideMaterial?null:r.overrideMaterial,o.clearDepth=void 0!==r.clearDepth&&r.clearDepth,o.clear=void 0===r.clear||r.clear,o}return i(t,e),o(t,[{key:"render",value:function(e,t){var a=this.scene,n=this.renderToScreen?null:t,r=a.overrideMaterial;this.clear?(this.clearPass.renderToScreen=this.renderToScreen,this.clearPass.render(e,t)):this.clearDepth&&(e.setRenderTarget(n),e.clearDepth()),a.overrideMaterial=this.overrideMaterial,e.render(a,this.camera,n),a.overrideMaterial=r}}]),t}(ea),ga=function(t){function a(t,r,o){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},l;return n(this,a),l=u(this,s(a).call(this,"GodRaysPass")),l.lightScene=new e.Scene,l.mainScene=t,l.mainCamera=r,l.renderTargetX=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),l.renderTargetX.texture.name="GodRays.TargetX",l.renderTargetX.texture.generateMipmaps=!1,l.renderTargetY=l.renderTargetX.clone(),l.renderTargetY.texture.name="GodRays.TargetY",l.renderTargetMask=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter}),l.renderTargetMask.texture.name="GodRays.Mask",l.renderTargetMask.texture.generateMipmaps=!1,l.renderPassLight=new ua(l.lightScene,l.mainCamera,{clearColor:new e.Color(0)}),l.renderPassMask=new ua(l.mainScene,l.mainCamera,{overrideMaterial:new e.MeshBasicMaterial({color:0})}),l.renderPassMask.clear=!1,l.blurPass=new ta(i),l.resolution=new e.Vector2,l.lightSource=o,l.screenPosition=new e.Vector3,l.godRaysMaterial=new Yt(i),l.godRaysMaterial.uniforms.lightPosition.value=l.screenPosition,l.samples=i.samples,l.combineMaterial=new It(void 0===i.screenMode||i.screenMode),l.intensity=i.intensity,l}return i(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){this.blurPass.setResolutionScale(e),this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function(e,t,a){var n=this.scene,r=this.camera,o=this.mainScene,i=this.lightSource,s=this.screenPosition,l=this.godRaysMaterial,d=this.combineMaterial,c=this.renderTargetMask,u=this.renderTargetX,g=this.renderTargetY,m,f;s.copy(i.position).project(this.mainCamera),s.x=J(.5*(s.x+1),0,1),s.y=J(.5*(s.y+1),0,1),f=i.parent,m=o.background,o.background=null,this.lightScene.add(i),this.renderPassLight.render(e,c),this.renderPassMask.render(e,c),null!==f&&f.add(i),o.background=m,this.blurPass.render(e,this.renderTargetMask,u),this.setFullscreenMaterial(l),l.uniforms.tDiffuse.value=u.texture,e.render(n,r,g),this.blend&&(this.setFullscreenMaterial(d),d.uniforms.texture1.value=t.texture,d.uniforms.texture2.value=g.texture,e.render(n,r,this.renderToScreen?null:a))}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.renderPassLight.setSize(e,t),this.renderPassMask.setSize(e,t),this.blurPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTargetMask.setSize(e,t),this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t)}},{key:"initialize",value:function(t,a){this.renderPassLight.initialize(t,a),this.renderPassMask.initialize(t,a),this.blurPass.initialize(t,a),a||(this.renderTargetMask.texture.format=e.RGBFormat,this.renderTargetX.texture.format=e.RGBFormat,this.renderTargetY.texture.format=e.RGBFormat)}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ut.LARGE;this.blurPass.kernelSize=e}},{key:"intensity",get:function(){return this.combineMaterial.uniforms.opacity2.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.combineMaterial.uniforms.opacity2.value=e}},{key:"samples",get:function(){return Ee(this.godRaysMaterial.defines.NUM_SAMPLES_INT)},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:60;e=ze(e),this.godRaysMaterial.defines.NUM_SAMPLES_FLOAT=e.toFixed(1),this.godRaysMaterial.defines.NUM_SAMPLES_INT=e.toFixed(0),this.godRaysMaterial.needsUpdate=!0}},{key:"dithering",get:function(){return this.godRaysMaterial.dithering},set:function(e){this.dithering!==e&&(this.godRaysMaterial.dithering=e,this.godRaysMaterial.needsUpdate=!0)}},{key:"blend",get:function(){return this.needsSwap},set:function(e){this.needsSwap=e}},{key:"overlay",get:function(){return this.renderTargetY.texture}},{key:"resolutionScale",get:function(){return console.warn("GodRaysPass.resolutionScale has been deprecated, please use GodRaysPass.getResolutionScale()"),this.getResolutionScale()},set:function(e){console.warn("GodRaysPass.resolutionScale has been deprecated, please use GodRaysPass.setResolutionScale(Number)"),this.setResolutionScale(e)}}]),a}(ea),ma=function(e){function t(e,a){var r;return n(this,t),r=u(this,s(t).call(this,"MaskPass",e,a)),r.needsSwap=!1,r.inverse=!1,r.clearStencil=!0,r}return i(t,e),o(t,[{key:"render",value:function(e,t,a){var n=e.context,r=e.state,o=this.scene,i=this.camera,s=this.inverse?0:1;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),r.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),r.buffers.stencil.setClear(1-s),this.clearStencil&&(this.renderToScreen?(e.setRenderTarget(null),e.clearStencil()):(e.setRenderTarget(t),e.clearStencil(),e.setRenderTarget(a),e.clearStencil())),this.renderToScreen?e.render(o,i,null):(e.render(o,i,t),e.render(o,i,a)),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setFunc(n.EQUAL,1,4294967295),r.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP)}}]),t}(ea),fa=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"tDiffuse",r;return n(this,t),r=u(this,s(t).call(this,"ShaderPass")),r.setFullscreenMaterial(e),r.textureID=a,r}return i(t,e),o(t,[{key:"render",value:function(e,t,a){var n=this.getFullscreenMaterial().uniforms;void 0!==n[this.textureID]&&(n[this.textureID].value=t.texture),e.render(this.scene,this.camera,this.renderToScreen?null:a)}}]),t}(ea),pa=function(t){function a(t,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i;return n(this,a),i=u(this,s(a).call(this,"OutlinePass")),i.mainScene=t,i.mainCamera=r,i.renderTargetDepth=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter}),i.renderTargetDepth.texture.name="Outline.Depth",i.renderTargetDepth.texture.generateMipmaps=!1,i.renderTargetMask=i.renderTargetDepth.clone(),i.renderTargetMask.texture.format=e.RGBFormat,i.renderTargetMask.texture.name="Outline.Mask",i.renderTargetEdges=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:e.RGBFormat}),i.renderTargetEdges.texture.name="Outline.Edges",i.renderTargetEdges.texture.generateMipmaps=!1,i.renderTargetBlurredEdges=i.renderTargetEdges.clone(),i.renderTargetBlurredEdges.texture.name="Outline.BlurredEdges",i.renderPassDepth=new ua(i.mainScene,i.mainCamera,{overrideMaterial:new e.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,morphTargets:!0,skinning:!0}),clearColor:new e.Color(16777215),clearAlpha:1}),i.renderPassMask=new ua(i.mainScene,i.mainCamera,{overrideMaterial:new Qt(i.renderTargetDepth.texture,i.mainCamera),clearColor:new e.Color(16777215),clearAlpha:1}),i.blurPass=new ta(o),i.kernelSize=o.kernelSize,i.resolution=new e.Vector2,i.copyPass=new fa(new Gt()),i.copyPass.renderToScreen=!0,i.outlineEdgesMaterial=new Wt(o),i.outlineEdgesMaterial.uniforms.tMask.value=i.renderTargetMask.texture,i.outlineBlendMaterial=new Xt(o),i.outlineBlendMaterial.uniforms.tMask.value=i.renderTargetMask.texture,i.blur=void 0===o.blur||o.blur,i.selection=[],i.time=0,i.pulseSpeed=void 0===o.pulseSpeed?0:o.pulseSpeed,i.selectionLayer=10,i}return i(a,t),o(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){this.blurPass.setResolutionScale(e),this.setSize(this.resolution.x,this.resolution.y)}},{key:"setPatternTexture",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.outlineBlendMaterial.setPatternTexture(e)}},{key:"setSelection",value:function(e){var t=e.slice(0),a=this.selectionLayer,n,r;for(this.clearSelection(),n=0,r=t.length;n<r;++n)t[n].layers.enable(a);return this.selection=t,this}},{key:"clearSelection",value:function(){var e=this.selection,t=this.selectionLayer,a,n;for(a=0,n=e.length;a<n;++a)e[a].layers.disable(t);return this.selection=[],this.time=0,this}},{key:"selectObject",value:function(e){return e.layers.enable(this.selectionLayer),this.selection.push(e),this}},{key:"deselectObject",value:function(e){var t=this.selection,a=t.indexOf(e);return 0<=a&&(t[a].layers.disable(this.selectionLayer),t.splice(a,1),0===t.length&&(this.time=0)),this}},{key:"setSelectionVisible",value:function(e){var t=this.selection,a,n;for(a=0,n=t.length;a<n;++a)e?t[a].layers.enable(0):t[a].layers.disable(0)}},{key:"render",value:function(e,t,a,n){var r=this.mainScene,o=this.mainCamera,i=this.outlineBlendMaterial.uniforms.pulse,s,l;0<this.selection.length?(s=r.background,l=o.layers.mask,r.background=null,i.value=1,0<this.pulseSpeed&&(i.value=.625+.375*De(10*(this.time*this.pulseSpeed)),this.time+=n),this.setSelectionVisible(!1),this.renderPassDepth.render(e,this.renderTargetDepth),this.setSelectionVisible(!0),o.layers.mask=1<<this.selectionLayer,this.renderPassMask.render(e,this.renderTargetMask),o.layers.mask=l,r.background=s,this.setFullscreenMaterial(this.outlineEdgesMaterial),e.render(this.scene,this.camera,this.renderTargetEdges),this.blurPass.enabled&&this.blurPass.render(e,this.renderTargetEdges,this.renderTargetBlurredEdges),this.blend&&(this.setFullscreenMaterial(this.outlineBlendMaterial),this.outlineBlendMaterial.uniforms.tDiffuse.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:a))):this.renderToScreen&&this.copyPass.render(e,t)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.renderTargetDepth.setSize(e,t),this.renderTargetMask.setSize(e,t),this.renderPassDepth.setSize(e,t),this.renderPassMask.setSize(e,t),this.blurPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTargetEdges.setSize(e,t),this.renderTargetBlurredEdges.setSize(e,t),this.outlineBlendMaterial.uniforms.aspect.value=e/t,this.outlineEdgesMaterial.setTexelSize(1/e,1/t)}},{key:"initialize",value:function(e,t){this.renderPassDepth.initialize(e,t),this.renderPassMask.initialize(e,t),this.blurPass.initialize(e,t)}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ut.VERY_SMALL;this.blurPass.kernelSize=e}},{key:"blur",get:function(){return this.blurPass.enabled},set:function(e){this.blurPass.enabled=e,this.outlineBlendMaterial.uniforms.tEdges.value=e?this.renderTargetBlurredEdges.texture:this.renderTargetEdges.texture}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"blend",get:function(){return this.needsSwap},set:function(e){this.needsSwap=e}},{key:"overlay",get:function(){return this.outlineBlendMaterial.uniforms.tEdges.value}},{key:"resolutionScale",get:function(){return console.warn("OutlinePass.resolutionScale has been deprecated, please use OutlinePass.getResolutionScale()"),this.getResolutionScale()},set:function(e){console.warn("OutlinePass.resolutionScale has been deprecated, please use OutlinePass.setResolutionScale(Number)"),this.setResolutionScale(e)}}]),a}(ea),va=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30,a;return n(this,t),a=u(this,s(t).call(this,"PixelationPass")),a.setFullscreenMaterial(new jt),a.granularity=e,a}return i(t,e),o(t,[{key:"render",value:function(e,t,a){this.getFullscreenMaterial().uniforms.tDiffuse.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.getFullscreenMaterial().setResolution(e,t)}},{key:"granularity",get:function(){return this.getFullscreenMaterial().granularity},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30;e=ze(e),0<e%2&&(e+=1),this.getFullscreenMaterial().granularity=e}}]),t}(ea),ya=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r;return n(this,t),r=u(this,s(t).call(this,"RealisticBokehPass")),r.setFullscreenMaterial(new Kt(e,a)),r}return i(t,e),o(t,[{key:"render",value:function(e,t,a){var n=this.getFullscreenMaterial().uniforms;n.tDiffuse.value=t.texture,n.tDepth.value=t.depthTexture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.getFullscreenMaterial().setTexelSize(1/e,1/t)}}]),t}(ea),Aa=function(t){function a(t){var r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o;return n(this,a),o=u(this,s(a).call(this,"SavePass")),o.setFullscreenMaterial(new Gt),o.needsSwap=!1,o.renderTarget=void 0===t?new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}):t,o.renderTarget.texture.name="Save.Target",o.renderTarget.texture.generateMipmaps=!1,o.resize=r,o}return i(a,t),o(a,[{key:"render",value:function(e,t){this.getFullscreenMaterial().uniforms.tDiffuse.value=t.texture,e.render(this.scene,this.camera,this.renderTarget)}},{key:"setSize",value:function(e,t){this.resize&&(e=Pe(1,e),t=Pe(1,t),this.renderTarget.setSize(e,t))}},{key:"initialize",value:function(t,a){a||(this.renderTarget.texture.format=e.RGBFormat)}}]),a}(ea),xa=new e.Vector3,v=new e.Vector3,ha=function(t){function a(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Vector3,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i;return n(this,a),i=u(this,s(a).call(this,"ShockWavePass")),i.mainCamera=t,i.epicenter=r,i.screenPosition=new e.Vector3,i.speed=void 0===o.speed?2:o.speed,i.time=0,i.active=!1,i.shockWaveMaterial=new Jt(o),i.shockWaveMaterial.uniforms.center.value=i.screenPosition,i.copyMaterial=new Gt,i}return i(a,t),o(a,[{key:"explode",value:function(){this.time=0,this.active=!0}},{key:"render",value:function(e,t,a,n){var r=this.epicenter,o=this.mainCamera,i=this.screenPosition,s=this.shockWaveMaterial,l=s.uniforms,d=l.center,c=l.radius,u=l.maxRadius,g=l.waveSize;this.copyMaterial.uniforms.tDiffuse.value=t.texture,this.setFullscreenMaterial(this.copyMaterial),this.active&&(o.getWorldDirection(xa),v.copy(o.position).sub(r),xa.angleTo(v)>.5*we&&(l.cameraDistance.value=o.position.distanceTo(r),i.copy(r).project(o),d.value.x=.5*(i.x+1),d.value.y=.5*(i.y+1),l.tDiffuse.value=t.texture,this.setFullscreenMaterial(s)),this.time+=n*this.speed,c.value=this.time-g.value,c.value>=2*(u.value+g.value)&&(this.active=!1)),e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.shockWaveMaterial.uniforms.aspect.value=e/t}}]),a}(ea),Ca=function(t){function a(t,r){var o;return n(this,a),o=u(this,s(a).call(this,"SMAAPass")),o.clearPass=new ia({clearColor:new e.Color(0),clearAlpha:1}),o.renderTargetColorEdges=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,format:e.RGBFormat,stencilBuffer:!1,depthBuffer:!1}),o.renderTargetColorEdges.texture.name="SMAA.ColorEdges",o.renderTargetColorEdges.texture.generateMipmaps=!1,o.renderTargetWeights=o.renderTargetColorEdges.clone(),o.renderTargetWeights.texture.name="SMAA.Weights",o.renderTargetWeights.texture.format=e.RGBAFormat,o.colorEdgesMaterial=new Ft,o.weightsMaterial=new Zt,o.weightsMaterial.uniforms.tDiffuse.value=o.renderTargetColorEdges.texture,o.searchTexture=new e.Texture(t),o.searchTexture.name="SMAA.Search",o.searchTexture.magFilter=e.NearestFilter,o.searchTexture.minFilter=e.NearestFilter,o.searchTexture.format=e.RGBAFormat,o.searchTexture.generateMipmaps=!1,o.searchTexture.needsUpdate=!0,o.searchTexture.flipY=!1,o.weightsMaterial.uniforms.tSearch.value=o.searchTexture,o.areaTexture=new e.Texture(r),o.areaTexture.name="SMAA.Area",o.areaTexture.minFilter=e.LinearFilter,o.areaTexture.format=e.RGBAFormat,o.areaTexture.generateMipmaps=!1,o.areaTexture.needsUpdate=!0,o.areaTexture.flipY=!1,o.weightsMaterial.uniforms.tArea.value=o.areaTexture,o.blendMaterial=new qt,o.blendMaterial.uniforms.tWeights.value=o.renderTargetWeights.texture,o}return i(a,t),o(a,[{key:"render",value:function(e,t,a){this.setFullscreenMaterial(this.colorEdgesMaterial),this.colorEdgesMaterial.uniforms.tDiffuse.value=t.texture,this.clearPass.render(e,this.renderTargetColorEdges),e.render(this.scene,this.camera,this.renderTargetColorEdges),this.setFullscreenMaterial(this.weightsMaterial),e.render(this.scene,this.camera,this.renderTargetWeights),this.setFullscreenMaterial(this.blendMaterial),this.blendMaterial.uniforms.tDiffuse.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.renderTargetColorEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),this.colorEdgesMaterial.uniforms.texelSize.value.copy(this.weightsMaterial.uniforms.texelSize.value.copy(this.blendMaterial.uniforms.texelSize.value.set(1/e,1/t)))}}],[{key:"searchImageDataURL",get:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII"}},{key:"areaImageDataURL",get:function(){return"data:image/png;base64,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"}}]),a}(ea),ka=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o;return n(this,t),o=u(this,s(t).call(this,"TexturePass")),o.setFullscreenMaterial(new It(r)),o.texture=e,o.opacitySource=a,o}return i(t,e),o(t,[{key:"render",value:function(e,t,a){this.getFullscreenMaterial().uniforms.texture1.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"texture",get:function(){return this.getFullscreenMaterial().uniforms.texture2.value},set:function(e){this.getFullscreenMaterial().uniforms.texture2.value=e}},{key:"opacityDestination",get:function(){return this.getFullscreenMaterial().uniforms.opacity1.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.getFullscreenMaterial().uniforms.opacity1.value=e}},{key:"opacitySource",get:function(){return this.getFullscreenMaterial().uniforms.opacity2.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.getFullscreenMaterial().uniforms.opacity2.value=e}}]),t}(ea),ba=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r;return n(this,a),r=u(this,s(a).call(this,"ToneMappingPass")),r.renderTargetLuminosity=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearMipMapLinearFilter,magFilter:e.LinearFilter,format:e.RGBFormat,stencilBuffer:!1,depthBuffer:!1}),r.renderTargetLuminosity.texture.name="ToneMapping.Luminosity",r.renderTargetAdapted=r.renderTargetLuminosity.clone(),r.renderTargetAdapted.texture.name="ToneMapping.AdaptedLuminosity",r.renderTargetAdapted.texture.generateMipmaps=!1,r.renderTargetAdapted.texture.minFilter=e.LinearFilter,r.renderTargetPrevious=r.renderTargetAdapted.clone(),r.renderTargetPrevious.texture.name="ToneMapping.PreviousLuminosity",r.copyMaterial=new Gt,r.luminosityMaterial=new Nt,r.luminosityMaterial.uniforms.distinction.value=void 0===t.distinction?1:t.distinction,r.adaptiveLuminosityMaterial=new zt,r.resolution=t.resolution,r.toneMappingMaterial=new $t,r.adaptive=t.adaptive,r}return i(a,t),o(a,[{key:"render",value:function(e,t,a,n){var r=this.scene,o=this.camera,i=this.adaptiveLuminosityMaterial,s=this.luminosityMaterial,l=this.toneMappingMaterial,d=this.copyMaterial,c=this.renderTargetPrevious,u=this.renderTargetLuminosity,g=this.renderTargetAdapted;this.adaptive&&(this.setFullscreenMaterial(s),s.uniforms.tDiffuse.value=t.texture,e.render(r,o,u),this.setFullscreenMaterial(i),i.uniforms.delta.value=n,i.uniforms.tPreviousLum.value=c.texture,i.uniforms.tCurrentLum.value=u.texture,e.render(r,o,g),this.setFullscreenMaterial(d),d.uniforms.tDiffuse.value=g.texture,e.render(r,o,c)),this.setFullscreenMaterial(l),l.uniforms.tDiffuse.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"initialize",value:function(t){this.setFullscreenMaterial(new e.MeshBasicMaterial({color:8388607})),t.render(this.scene,this.camera,this.renderTargetPrevious),this.getFullscreenMaterial().dispose()}},{key:"resolution",get:function(){return this.renderTargetLuminosity.width},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:256,t=Pe(0,be(Se(e)));e=Me(2,t),this.renderTargetLuminosity.setSize(e,e),this.renderTargetPrevious.setSize(e,e),this.renderTargetAdapted.setSize(e,e),this.adaptiveLuminosityMaterial.defines.MIP_LEVEL_1X1=t.toFixed(1),this.adaptiveLuminosityMaterial.needsUpdate=!0}},{key:"adaptive",get:function(){return void 0!==this.toneMappingMaterial.defines.ADAPTED_LUMINANCE},set:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];e?(this.toneMappingMaterial.defines.ADAPTED_LUMINANCE="1",this.toneMappingMaterial.uniforms.luminanceMap.value=this.renderTargetAdapted.texture):(delete this.toneMappingMaterial.defines.ADAPTED_LUMINANCE,this.toneMappingMaterial.uniforms.luminanceMap.value=null),this.toneMappingMaterial.needsUpdate=!0}},{key:"dithering",get:function(){return this.toneMappingMaterial.dithering},set:function(e){this.dithering!==e&&(this.toneMappingMaterial.dithering=e,this.toneMappingMaterial.needsUpdate=!0)}}]),a}(ea),Sa=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(void 0===a.depthBuffer||a.depthBuffer,void 0!==a.stencilBuffer&&a.stencilBuffer,void 0!==a.depthTexture&&a.depthTexture),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new fa(new Gt()),this.passes=[]}return o(t,[{key:"replaceRenderer",value:function(e){var t=this.renderer,a,n,r;return null!==t&&t!==e&&(this.renderer=e,this.renderer.autoClear=!1,a=t.domElement.parentNode,n=t.getSize(),r=e.getSize(),null!==a&&(a.removeChild(t.domElement),a.appendChild(e.domElement)),(n.width!==r.width||n.height!==r.height)&&this.setSize()),t}},{key:"createBuffer",value:function(t,a,n){var r=this.renderer.getDrawingBufferSize(),o=this.renderer.context.getContextAttributes().alpha,i=new e.WebGLRenderTarget(r.width,r.height,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:o?e.RGBAFormat:e.RGBFormat,depthBuffer:t,stencilBuffer:a,depthTexture:n?new e.DepthTexture:null});return n&&a&&(i.depthTexture.format=e.DepthStencilFormat,i.depthTexture.type=e.UnsignedInt248Type),i.texture.name="EffectComposer.Buffer",i.texture.generateMipmaps=!1,i}},{key:"addPass",value:function(e,t){var a=this.renderer,n=a.getDrawingBufferSize();e.setSize(n.width,n.height),e.initialize(a,a.context.getContextAttributes().alpha),void 0===t?this.passes.push(e):this.passes.splice(t,0,e)}},{key:"removePass",value:function(e){this.passes.splice(this.passes.indexOf(e),1)}},{key:"render",value:function(e){var t=this.renderer,a=this.copyPass,n=this.inputBuffer,r=this.outputBuffer,o=!1,i=!0,s=!1,l=void 0,d,c,u;try{for(var g=this.passes[Symbol.iterator](),m,f;!(i=(m=g.next()).done);i=!0)f=m.value,f.enabled&&(f.render(t,n,r,e,o),f.needsSwap&&(o&&(a.renderToScreen=f.renderToScreen,d=t.context,c=t.state,c.buffers.stencil.setFunc(d.NOTEQUAL,1,4294967295),a.render(t,n,r,e,o),c.buffers.stencil.setFunc(d.EQUAL,1,4294967295)),u=n,n=r,r=u),f instanceof ma?o=!0:f instanceof ra&&(o=!1))}catch(e){s=!0,l=e}finally{try{i||null==g.return||g.return()}finally{if(s)throw l}}}},{key:"setSize",value:function(e,t){var a=this.renderer,n,r;(void 0===e||void 0===t)&&(n=a.getSize(),e=n.width,t=n.height),a.setSize(e,t),r=a.getDrawingBufferSize(),this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);var o=!0,i=!1,s=void 0;try{for(var l=this.passes[Symbol.iterator](),d,c;!(o=(d=l.next()).done);o=!0)c=d.value,c.setSize(r.width,r.height)}catch(e){i=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}}},{key:"reset",value:function(){var e=this.createBuffer(this.inputBuffer.depthBuffer,this.inputBuffer.stencilBuffer,null!==this.inputBuffer.depthTexture);this.dispose(),this.inputBuffer=e,this.outputBuffer=e.clone(),this.copyPass=new fa(new Gt())}},{key:"dispose",value:function(){var e=!0,t=!1,a=void 0;try{for(var n=this.passes[Symbol.iterator](),r,o;!(e=(r=n.next()).done);e=!0)o=r.value,o.dispose()}catch(e){t=!0,a=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}this.passes=[],null!==this.inputBuffer&&(this.inputBuffer.dispose(),this.inputBuffer=null),null!==this.outputBuffer&&(this.outputBuffer.dispose(),this.outputBuffer=null),this.copyPass.dispose()}},{key:"depthTexture",get:function(){return this.inputBuffer.depthTexture},set:function(e){this.inputBuffer.depthTexture=e,this.outputBuffer.depthTexture=e}}]),t}(),Da=function(){function e(){n(this,e)}return o(e,[{key:"setSize",value:function(){}}]),e}(),Ea=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:4;n(this,e),this.width=t,this.height=a,this.data=r,this.channels=o}return o(e,[{key:"toCanvas",value:function(){return"undefined"==typeof document?null:Z(this.width,this.height,this.data,this.channels)}}]),e}(),wa=new e.Box2,Ma=new e.Box2,Ba=16,Pa=20,Ta=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),za=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],La=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],Fa=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])],Ia=function(){function t(){n(this,t)}return o(t,null,[{key:"generate",value:function(){var t=10*Ba,a=5*Ta.length*Ba,n=new Uint8ClampedArray(2*(t*a)),r=new Ea(t,a,n,2),o=226,s=Pa,d=[],c=[],u=new e.Vector2,g,m;for(g=0;16>g;++g)d.push(new Ea(o,o,new Uint8ClampedArray(2*(o*o)),2)),c.push(new Ea(s,s,new Uint8ClampedArray(2*(s*s)),2));for(g=0,m=Ta.length;g<m;++g)le(d,Ta[g],!0),u.set(0,5*Ba*g),de(u,d,La,Ba,!0,r);for(g=0,m=za.length;g<m;++g)le(c,za[g],!1),u.set(5*Ba,4*Pa*g),de(u,c,Fa,Pa,!1,r);return r}}]),t}(),Oa=new Map([[ue([0,0,0,0]),[0,0,0,0]],[ue([0,0,0,1]),[0,0,0,1]],[ue([0,0,1,0]),[0,0,1,0]],[ue([0,0,1,1]),[0,0,1,1]],[ue([0,1,0,0]),[0,1,0,0]],[ue([0,1,0,1]),[0,1,0,1]],[ue([0,1,1,0]),[0,1,1,0]],[ue([0,1,1,1]),[0,1,1,1]],[ue([1,0,0,0]),[1,0,0,0]],[ue([1,0,0,1]),[1,0,0,1]],[ue([1,0,1,0]),[1,0,1,0]],[ue([1,0,1,1]),[1,0,1,1]],[ue([1,1,0,0]),[1,1,0,0]],[ue([1,1,0,1]),[1,1,0,1]],[ue([1,1,1,0]),[1,1,1,0]],[ue([1,1,1,1]),[1,1,1,1]]]),Ra=function(){function e(){n(this,e)}return o(e,null,[{key:"generate",value:function(){var e=33,a=64,n=16,r=new Uint8ClampedArray(66*e),o=new Uint8ClampedArray(a*n),l,d,c,u,g,m,f;for(d=0;d<e;++d)for(l=0;66>l;++l)c=.03125*l,u=.03125*d,Oa.has(c)&&Oa.has(u)&&(m=Oa.get(c),f=Oa.get(u),r[66*d+l]=127*ge(m,f),r[66*d+l+33]=127*me(m,f));for(g=0,d=e-n;d<e;++d)for(l=0;l<a;++l,++g)o[g]=r[66*d+l];return new Ea(a,n,o,1)}}]),e}(),Ua={MOVE_FORWARD:0,MOVE_LEFT:1,MOVE_BACKWARD:2,MOVE_RIGHT:3,MOVE_DOWN:4,MOVE_UP:5,ZOOM_OUT:6,ZOOM_IN:7},Ga=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.x=t,this.y=a,this.z=r}return o(e,[{key:"set",value:function(e,t,a){return this.x=e,this.y=t,this.z=a,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"setFromSpherical",value:function(e){this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,a){var n=he(t)*e;return this.x=n*he(a),this.y=De(t)*e,this.z=n*De(a),this}},{key:"setFromCylindrical",value:function(e){this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,a){return this.x=e*he(t),this.y=a,this.z=e*De(t),this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=n,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"crossVectors",value:function(e,t){var a=e.x,n=e.y,r=e.z,o=t.x,i=t.y,s=t.z;return this.x=n*s-r*i,this.y=r*o-a*s,this.z=a*i-n*o,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"transformDirection",value:function(t){var a=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*a+o[4]*n+o[8]*r,this.y=o[1]*a+o[5]*n+o[9]*r,this.z=o[2]*a+o[6]*n+o[10]*r,this.normalize()}},{key:"applyMatrix3",value:function(t){var a=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*a+o[3]*n+o[6]*r,this.y=o[1]*a+o[4]*n+o[7]*r,this.z=o[2]*a+o[5]*n+o[8]*r,this}},{key:"applyMatrix4",value:function(t){var a=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*a+o[4]*n+o[8]*r+o[12],this.y=o[1]*a+o[5]*n+o[9]*r+o[13],this.z=o[2]*a+o[6]*n+o[10]*r+o[14],this}},{key:"applyQuaternion",value:function(e){var t=this.x,a=this.y,n=this.z,r=e.x,o=e.y,i=e.z,s=e.w,l=s*t+o*n-i*a,d=s*a+i*t-r*n,c=s*n+r*a-o*t,u=-r*t-o*a-i*n;return this.x=l*s+u*-r+d*-i-c*-o,this.y=d*s+u*-o+c*-r-l*-i,this.z=c*s+u*-i+l*-o-d*-r,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"reflect",value:function(e){var t=e.x,a=e.y,n=e.z;return this.sub(e.multiplyScalar(2*this.dot(e))),e.set(t,a,n),this}},{key:"angleTo",value:function(e){var t=this.dot(e)/ke(this.lengthSquared()*e.lengthSquared());return xe(Te(Pe(t,-1),1))}},{key:"manhattanLength",value:function(){return Be(this.x)+Be(this.y)+Be(this.z)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return ke(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanDistanceTo",value:function(e){return Be(this.x-e.x)+Be(this.y-e.y)+Be(this.z-e.z)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return t*t+a*a+n*n}},{key:"distanceTo",value:function(e){return ke(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=Te(this.x,e.x),this.y=Te(this.y,e.y),this.z=Te(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Pe(this.x,e.x),this.y=Pe(this.y,e.y),this.z=Pe(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Pe(e.x,Te(t.x,this.x)),this.y=Pe(e.y,Te(t.y,this.y)),this.z=Pe(e.z,Te(t.z,this.z)),this}},{key:"floor",value:function(){return this.x=ze(this.x),this.y=ze(this.y),this.z=ze(this.z),this}},{key:"ceil",value:function(){return this.x=be(this.x),this.y=be(this.y),this.z=be(this.z),this}},{key:"round",value:function(){return this.x=Le(this.x),this.y=Le(this.y),this.z=Le(this.z),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}}]),e}(),Qa=new Ga,_a=[new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga,new Ga],Ha=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga(1/0,1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga(-Infinity,-Infinity,-Infinity);n(this,e),this.min=t,this.max=a}return o(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"setFromSphere",value:function(e){return this.set(e.center,e.center),this.expandByScalar(e.radius),this}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"setFromPoints",value:function(e){var t,a;for(this.min.set(0,0,0),this.max.set(0,0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var a=Qa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga;return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=Qa.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"applyMatrix4",value:function(e){var t=this.min,a=this.max;return this.isEmpty()||(_a[0].set(t.x,t.y,t.z).applyMatrix4(e),_a[1].set(t.x,t.y,a.z).applyMatrix4(e),_a[2].set(t.x,a.y,t.z).applyMatrix4(e),_a[3].set(t.x,a.y,a.z).applyMatrix4(e),_a[4].set(a.x,t.y,t.z).applyMatrix4(e),_a[5].set(a.x,t.y,a.z).applyMatrix4(e),_a[6].set(a.x,a.y,t.z).applyMatrix4(e),_a[7].set(a.x,a.y,a.z).applyMatrix4(e),this.setFromPoints(_a)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"containsPoint",value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.z>=t.z&&e.x<=a.x&&e.y<=a.y&&e.z<=a.z}},{key:"containsBox",value:function(e){var t=this.min,a=this.max,n=e.min,r=e.max;return t.x<=n.x&&r.x<=a.x&&t.y<=n.y&&r.y<=a.y&&t.z<=n.z&&r.z<=a.z}},{key:"intersectsBox",value:function(e){var t=this.min,a=this.max,n=e.min,r=e.max;return r.x>=t.x&&r.y>=t.y&&r.z>=t.z&&n.x<=a.x&&n.y<=a.y&&n.z<=a.z}},{key:"intersectsSphere",value:function(e){var t=this.clampPoint(e.center,Qa);return t.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,a;return 0<e.normal.x?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=e.constant&&a>=e.constant}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Va=new Ha,Ya=new Ga,Na=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.center=t,this.radius=a}return o(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromPoints",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Va.setFromPoints(e).getCenter(this.center),a=0,n,r;for(n=0,r=e.length;n<r;++n)a=Pe(a,t.distanceToSquared(e[n]));return this.radius=ke(a),this}},{key:"setFromBox",value:function(e){return e.getCenter(this.center),this.radius=.5*e.getSize(Ya).length(),this}},{key:"isEmpty",value:function(){return 0>=this.radius}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga,a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Be(e.distanceToPoint(this.center))<=this.radius}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),Xa=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=a}return o(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this}},{key:"applyMatrix3",value:function(t){var a=this.x,n=this.y,r=t.elements;return this.x=r[0]*a+r[3]*n+r[6],this.y=r[1]*a+r[4]*n+r[7],this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"manhattanLength",value:function(){return Be(this.x)+Be(this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return ke(this.x*this.x+this.y*this.y)}},{key:"manhattanDistanceTo",value:function(e){return Be(this.x-e.x)+Be(this.y-e.y)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y;return t*t+a*a}},{key:"distanceTo",value:function(e){return ke(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=Te(this.x,e.x),this.y=Te(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Pe(this.x,e.x),this.y=Pe(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Pe(e.x,Te(t.x,this.x)),this.y=Pe(e.y,Te(t.y,this.y)),this}},{key:"floor",value:function(){return this.x=ze(this.x),this.y=ze(this.y),this}},{key:"ceil",value:function(){return this.x=be(this.x),this.y=be(this.y),this}},{key:"round",value:function(){return this.x=Le(this.x),this.y=Le(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"angle",value:function e(){var e=Ae(this.y,this.x);return 0>e&&(e+=2*we),e}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"rotateAround",value:function(e,t){var a=De(t),n=he(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*a-o*n+e.x,this.y=r*n+o*a+e.y,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"width",get:function(){return this.x},set:function(e){return this.x=e}},{key:"height",get:function(){return this.y},set:function(e){return this.y=e}}]),e}(),Wa=new Xa,ja=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Xa(1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Xa(-Infinity,-Infinity);n(this,e),this.min=t,this.max=a}return o(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Xa;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Xa;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"getBoundingSphere",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Na;return this.getCenter(e.center),e.radius=.5*this.getSize(Wa).length(),e}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"setFromPoints",value:function(e){var t,a;for(this.min.set(0,0),this.max.set(0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var a=Wa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Xa;return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=Wa.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"containsPoint",value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.x<=a.x&&e.y<=a.y}},{key:"containsBox",value:function(e){var t=this.min,a=this.max,n=e.min,r=e.max;return t.x<=n.x&&r.x<=a.x&&t.y<=n.y&&r.y<=a.y}},{key:"intersectsBox",value:function(e){var t=this.min,a=this.max,n=e.min,r=e.max;return r.x>=t.x&&r.y>=t.y&&n.x<=a.x&&n.y<=a.y}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Ka=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.radius=t,this.theta=a,this.y=r}return o(e,[{key:"set",value:function(e,t,a){return this.radius=e,this.theta=t,this.y=a,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,a){return this.radius=ke(e*e+a*a),this.theta=Ae(e,a),this.y=t,this}}]),e}(),Ja=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])}return o(e,[{key:"set",value:function(e,t,a,n,r,o,i,s,l){var d=this.elements;return d[0]=e,d[3]=t,d[6]=a,d[1]=n,d[4]=r,d[7]=o,d[2]=i,d[5]=s,d[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;9>n;++n)a[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;9>n;++n)e[n+t]=a[n];return e}},{key:"multiplyMatrices",value:function(e,t){var a=e.elements,n=t.elements,r=this.elements,o=a[0],i=a[3],s=a[6],l=a[1],d=a[4],c=a[7],u=a[2],g=a[5],m=a[8],f=n[0],p=n[3],v=n[6],y=n[1],A=n[4],x=n[7],h=n[2],C=n[5],k=n[8];return r[0]=o*f+i*y+s*h,r[3]=o*p+i*A+s*C,r[6]=o*v+i*x+s*k,r[1]=l*f+d*y+c*h,r[4]=l*p+d*A+c*C,r[7]=l*v+d*x+c*k,r[2]=u*f+g*y+m*h,r[5]=u*p+g*A+m*C,r[8]=u*v+g*x+m*k,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var t=this.elements,n=t[0],a=t[1],r=t[2],o=t[3],s=t[4],e=t[5],l=t[6],d=t[7],c=t[8];return n*s*c-n*e*d-a*o*c+a*e*l+r*o*d-r*s*l}},{key:"getInverse",value:function(e){var t=e.elements,a=this.elements,n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],g=u*s-l*c,m=l*d-u*i,f=c*i-s*d,p=n*g+r*m+o*f,v;return 0===p?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(v=1/p,a[0]=g*v,a[1]=(o*c-u*r)*v,a[2]=(l*r-o*s)*v,a[3]=m*v,a[4]=(u*n-o*d)*v,a[5]=(o*i-l*n)*v,a[6]=f*v,a[7]=(r*d-c*n)*v,a[8]=(s*n-r*i)*v),this}},{key:"transpose",value:function(){var e=this.elements,a;return a=e[1],e[1]=e[3],e[3]=a,a=e[2],e[2]=e[6],e[6]=a,a=e[5],e[5]=e[7],e[7]=a,this}},{key:"scale",value:function(e,t){var a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=t,a[4]*=t,a[7]*=t,this}},{key:"rotate",value:function(e){var t=De(e),a=he(e),n=this.elements,r=n[0],o=n[3],i=n[6],s=n[1],l=n[4],d=n[7];return n[0]=t*r+a*s,n[3]=t*o+a*l,n[6]=t*i+a*d,n[1]=-a*r+t*s,n[4]=-a*o+t*l,n[7]=-a*i+t*d,this}},{key:"translate",value:function(e,t){var a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=t*a[2],a[4]+=t*a[5],a[7]+=t*a[8],this}},{key:"equals",value:function(e){var t=this.elements,a=e.elements,n=!0,r;for(r=0;n&&9>r;++r)t[r]!==a[r]&&(n=!1);return n}}]),e}(),qa={XYZ:"XYZ",YZX:"YZX",ZXY:"ZXY",XZY:"XZY",YXZ:"YXZ",ZYX:"ZYX"},Za=new Ga,$a=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=t,this.y=a,this.z=r,this.w=o}var a=Number.EPSILON;return o(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"setFromEuler",value:function(e){var t=e.x,a=e.y,n=e.z,r=De,o=he,i=r(t/2),s=r(a/2),l=r(n/2),d=o(t/2),c=o(a/2),u=o(n/2);switch(e.order){case qa.XYZ:this.x=d*s*l+i*c*u,this.y=i*c*l-d*s*u,this.z=i*s*u+d*c*l,this.w=i*s*l-d*c*u;break;case qa.YXZ:this.x=d*s*l+i*c*u,this.y=i*c*l-d*s*u,this.z=i*s*u-d*c*l,this.w=i*s*l+d*c*u;break;case qa.ZXY:this.x=d*s*l-i*c*u,this.y=i*c*l+d*s*u,this.z=i*s*u+d*c*l,this.w=i*s*l-d*c*u;break;case qa.ZYX:this.x=d*s*l-i*c*u,this.y=i*c*l+d*s*u,this.z=i*s*u-d*c*l,this.w=i*s*l+d*c*u;break;case qa.YZX:this.x=d*s*l+i*c*u,this.y=i*c*l+d*s*u,this.z=i*s*u-d*c*l,this.w=i*s*l-d*c*u;break;case qa.XZY:this.x=d*s*l-i*c*u,this.y=i*c*l-d*s*u,this.z=i*s*u+d*c*l,this.w=i*s*l+d*c*u;}return this}},{key:"setFromAxisAngle",value:function(e,t){var a=t/2,n=he(a);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=De(a),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,a=t[0],n=t[4],r=t[8],o=t[1],i=t[5],l=t[9],d=t[2],c=t[6],u=t[10],g=a+i+u,m;return 0<g?(m=.5/ke(g+1),this.w=.25/m,this.x=(c-l)*m,this.y=(r-d)*m,this.z=(o-n)*m):a>i&&a>u?(m=2*ke(1+a-i-u),this.w=(c-l)/m,this.x=.25*m,this.y=(n+o)/m,this.z=(r+d)/m):i>u?(m=2*ke(1+i-a-u),this.w=(r-d)/m,this.x=(n+o)/m,this.y=.25*m,this.z=(l+c)/m):(m=2*ke(1+u-a-i),this.w=(o-n)/m,this.x=(r+d)/m,this.y=(l+c)/m,this.z=.25*m),this}},{key:"setFromUnitVectors",value:function(e,t){var a=e.dot(t)+1;return 1e-6>a?(a=0,Be(e.x)>Be(e.z)?Za.set(-e.y,e.x,0):Za.set(0,-e.z,e.y)):Za.crossVectors(e,t),this.x=Za.x,this.y=Za.y,this.z=Za.z,this.w=a,this.normalize()}},{key:"angleTo",value:function(e){return 2*xe(Be(Te(Pe(this.dot(e),-1),1)))}},{key:"rotateTowards",value:function(e,t){var a=this.angleTo(e);return 0!==a&&this.slerp(e,Te(1,t/a)),this}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return ke(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"normalize",value:function(){var e=this.length(),t;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/e,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"multiplyQuaternions",value:function(e,t){var a=e.x,n=e.y,r=e.z,o=e.w,i=t.x,s=t.y,l=t.z,d=t.w;return this.x=a*d+o*i+n*l-r*s,this.y=n*d+o*s+r*i-a*l,this.z=r*d+o*l+a*s-n*i,this.w=o*d-a*i-n*s-r*l,this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"slerp",value:function(e,n){var t=this.x,r=this.y,o=this.z,i=this.w,l,d,c,u,g,m,f;return 1===n?this.copy(e):0<n&&(l=i*e.w+t*e.x+r*e.y+o*e.z,0>l?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,l=-l):this.copy(e),1<=l?(this.w=i,this.x=t,this.y=r,this.z=o):(d=1-l*l,g=1-n,d<=a?(this.w=g*i+n*this.w,this.x=g*t+n*this.x,this.y=g*r+n*this.y,this.z=g*o+n*this.z,this.normalize()):(c=ke(d),u=Ae(c,l),m=he(g*u)/c,f=he(n*u)/c,this.w=i*m+this.w*f,this.x=t*m+this.x*f,this.y=r*m+this.y*f,this.z=o*m+this.z*f))),this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}],[{key:"slerp",value:function(e,a,n,r){return n.copy(e).slerp(a,r)}},{key:"slerpFlat",value:function(e,n,r,o,i,l,d){var c=i[l],u=i[l+1],g=i[l+2],m=i[l+3],p=r[o],v=r[o+1],y=r[o+2],A=r[o+3],x,h,C,k,b,S,D,E;(A!==m||p!==c||v!==u||y!==g)&&(x=1-d,k=p*c+v*u+y*g+A*m,S=0<=k?1:-1,b=1-k*k,b>a&&(C=ke(b),D=Ae(C,k*S),x=he(x*D)/C,d=he(d*D)/C),E=d*S,p=p*x+c*E,v=v*x+u*E,y=y*x+g*E,A=A*x+m*E,x===1-d&&(h=1/ke(p*p+v*v+y*y+A*A),p*=h,v*=h,y*=h,A*=h)),e[n]=p,e[n+1]=v,e[n+2]=y,e[n+3]=A}}]),e}(),en=new Ja,m=new $a,q=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.x=t,this.y=a,this.z=r,this.order=e.defaultOrder}return o(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.order=n,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.order=t.order,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.order)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.order=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.order,e}},{key:"toVector3",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return e.set(this.x,this.y,this.z)}},{key:"setFromRotationMatrix",value:function(e){var t=Math.asin,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order,n=e.elements,r=n[0],o=n[4],i=n[8],s=n[1],l=n[5],d=n[9],c=n[2],u=n[6],g=n[10],m=1-1e-5;switch(a){case qa.XYZ:{this.y=t(fe(i,-1,1)),Be(i)<m?(this.x=Ae(-d,g),this.z=Ae(-o,r)):(this.x=Ae(u,l),this.z=0);break}case qa.YXZ:{this.x=t(-fe(d,-1,1)),Be(d)<m?(this.y=Ae(i,g),this.z=Ae(s,l)):(this.y=Ae(-c,r),this.z=0);break}case qa.ZXY:{this.x=t(fe(u,-1,1)),Be(u)<m?(this.y=Ae(-c,g),this.z=Ae(-o,l)):(this.y=0,this.z=Ae(s,r));break}case qa.ZYX:{this.y=t(-fe(c,-1,1)),Be(c)<m?(this.x=Ae(u,g),this.z=Ae(s,r)):(this.x=0,this.z=Ae(-o,l));break}case qa.YZX:{this.z=t(fe(s,-1,1)),Be(s)<m?(this.x=Ae(-d,l),this.y=Ae(-c,r)):(this.x=0,this.y=Ae(i,g));break}case qa.XZY:{this.z=t(-fe(o,-1,1)),Be(o)<m?(this.x=Ae(u,l),this.y=Ae(i,r)):(this.x=Ae(-d,g),this.y=0);break}}return this.order=a,this}},{key:"setFromQuaternion",value:function(e,t){return en.makeRotationFromQuaternion(e),this.setFromRotationMatrix(en,t)}},{key:"setFromVector3",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return m.setFromEuler(this),this.setFromQuaternion(m,e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.order===this.order}}],[{key:"defaultOrder",get:function(){return qa.XYZ}}]),e}(),tn=new Ga,a=new Ga,b=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga(1,0,0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.normal=t,this.constant=a}return o(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,a,n){return this.normal.set(e,t,a),this.constant=n,this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=tn.subVectors(n,t).cross(a.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,tn),this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.normal.negate(),this.constant=-this.constant,this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"intersectLine",value:function(e,a){var n=e.delta(tn),r=this.normal.dot(n);if(0===r)0===this.distanceToPoint(e.start)&&a.copy(e.start);else{var o=-(e.start.dot(this.normal)+this.constant)/r;0<=o&&1>=o&&a.copy(n).multiplyScalar(o).add(e.start)}return a}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return 0>t&&0<a||0>a&&0<t}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),an=new Ga,nn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new b,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new b,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new b,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new b,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new b,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new b;n(this,e),this.planes=[t,a,r,o,i,s]}return o(e,[{key:"set",value:function(e,t,a,n,r,o){var i=this.planes;return i[0].copy(e),i[1].copy(t),i[2].copy(a),i[3].copy(n),i[4].copy(r),i[5].copy(o),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){var t=this.planes,a;for(a=0;6>a;++a)t[a].copy(e.planes[a]);return this}},{key:"setFromMatrix",value:function(e){var t=this.planes,a=e.elements,n=a[0],r=a[1],o=a[2],i=a[3],s=a[4],l=a[5],d=a[6],c=a[7],u=a[8],g=a[9],m=a[10],f=a[11],p=a[12],v=a[13],y=a[14],A=a[15];return t[0].setComponents(i-n,c-s,f-u,A-p).normalize(),t[1].setComponents(i+n,c+s,f+u,A+p).normalize(),t[2].setComponents(i+r,c+l,f+g,A+v).normalize(),t[3].setComponents(i-r,c-l,f-g,A-v).normalize(),t[4].setComponents(i-o,c-d,f-m,A-y).normalize(),t[5].setComponents(i+o,c+d,f+m,A+y).normalize(),this}},{key:"intersectsSphere",value:function(e){var t=this.planes,a=e.center,n=-e.radius,r=!0,o,s;for(o=0;6>o;++o)if(s=t[o].distanceToPoint(a),s<n){r=!1;break}return r}},{key:"intersectsBox",value:function(e){var t=this.planes,a=e.min,n=e.max,r,o;for(r=0;6>r;++r)if(o=t[r],an.x=0<o.normal.x?n.x:a.x,an.y=0<o.normal.y?n.y:a.y,an.z=0<o.normal.z?n.z:a.z,0>o.distanceToPoint(an))return!1;return!0}},{key:"containsPoint",value:function(e){var t=this.planes,a=!0,n;for(n=0;6>n;++n)if(0>t[n].distanceToPoint(e)){a=!1;break}return a}}]),e}(),rn=new Ga,on=new Ga,sn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga;n(this,e),this.start=t,this.end=a}return o(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return e.subVectors(this.end,this.start)}},{key:"lengthSquared",value:function(){return this.start.distanceToSquared(this.end)}},{key:"length",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,a){rn.subVectors(e,this.start),on.subVectors(this.end,this.start);var n=on.dot(on),r=on.dot(rn),o=a?Te(Pe(r/n,0),1):r/n;return o}},{key:"closestPointToPoint",value:function(e){var a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Ga,r=this.closestPointToPointParameter(e,a);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}(),ln=new Ga,dn=new Ga,cn=new Ga,c=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return o(e,[{key:"set",value:function(e,t,a,n,r,o,i,s,l,d,c,u,g,m,f,p){var v=this.elements;return v[0]=e,v[4]=t,v[8]=a,v[12]=n,v[1]=r,v[5]=o,v[9]=i,v[13]=s,v[2]=l,v[6]=d,v[10]=c,v[14]=u,v[3]=g,v[7]=m,v[11]=f,v[15]=p,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;16>n;++n)a[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;16>n;++n)e[n+t]=a[n];return e}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return ke(Pe(t,a,n))}},{key:"copyPosition",value:function(e){var t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}},{key:"setPosition",value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:"extractBasis",value:function(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,a=e.elements,n=1/ln.setFromMatrixColumn(e,0).length(),r=1/ln.setFromMatrixColumn(e,1).length(),o=1/ln.setFromMatrixColumn(e,2).length();return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=0,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=0,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var n=this.elements,r=t.x,o=t.y,i=t.z,s=De(r),a=he(r),l=De(o),c=he(o),d=De(i),e=he(i),u,g,m,f,p,v,y,A,x,h,C,k;switch(t.order){case qa.XYZ:{u=s*d,g=s*e,m=a*d,f=a*e,n[0]=l*d,n[4]=-l*e,n[8]=c,n[1]=g+m*c,n[5]=u-f*c,n[9]=-a*l,n[2]=f-u*c,n[6]=m+g*c,n[10]=s*l;break}case qa.YXZ:{p=l*d,v=l*e,y=c*d,A=c*e,n[0]=p+A*a,n[4]=y*a-v,n[8]=s*c,n[1]=s*e,n[5]=s*d,n[9]=-a,n[2]=v*a-y,n[6]=A+p*a,n[10]=s*l;break}case qa.ZXY:{p=l*d,v=l*e,y=c*d,A=c*e,n[0]=p-A*a,n[4]=-s*e,n[8]=y+v*a,n[1]=v+y*a,n[5]=s*d,n[9]=A-p*a,n[2]=-s*c,n[6]=a,n[10]=s*l;break}case qa.ZYX:{u=s*d,g=s*e,m=a*d,f=a*e,n[0]=l*d,n[4]=m*c-g,n[8]=u*c+f,n[1]=l*e,n[5]=f*c+u,n[9]=g*c-m,n[2]=-c,n[6]=a*l,n[10]=s*l;break}case qa.YZX:{x=s*l,h=s*c,C=a*l,k=a*c,n[0]=l*d,n[4]=k-x*e,n[8]=C*e+h,n[1]=e,n[5]=s*d,n[9]=-a*d,n[2]=-c*d,n[6]=h*e+C,n[10]=x-k*e;break}case qa.XZY:{x=s*l,h=s*c,C=a*l,k=a*c,n[0]=l*d,n[4]=-e,n[8]=c*d,n[1]=x*e+k,n[5]=s*d,n[9]=h*e-C,n[2]=C*e-h,n[6]=a*d,n[10]=k*e+x;break}}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ln.set(0,0,0),e,dn.set(1,1,1))}},{key:"lookAt",value:function(e,t,a){var n=this.elements,r=ln,o=dn,i=cn;return i.subVectors(e,t),0===i.lengthSquared()&&(i.z=1),i.normalize(),r.crossVectors(a,i),0===r.lengthSquared()&&(1===Be(a.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),r.crossVectors(a,i)),r.normalize(),o.crossVectors(i,r),n[0]=r.x,n[4]=o.x,n[8]=i.x,n[1]=r.y,n[5]=o.y,n[9]=i.y,n[2]=r.z,n[6]=o.z,n[10]=i.z,this}},{key:"multiplyMatrices",value:function(e,t){var a=this.elements,n=e.elements,r=t.elements,o=n[0],i=n[4],s=n[8],l=n[12],d=n[1],c=n[5],u=n[9],g=n[13],m=n[2],f=n[6],p=n[10],v=n[14],y=n[3],A=n[7],x=n[11],h=n[15],C=r[0],k=r[4],b=r[8],S=r[12],D=r[1],E=r[5],w=r[9],M=r[13],B=r[2],P=r[6],T=r[10],z=r[14],L=r[3],F=r[7],I=r[11],O=r[15];return a[0]=o*C+i*D+s*B+l*L,a[4]=o*k+i*E+s*P+l*F,a[8]=o*b+i*w+s*T+l*I,a[12]=o*S+i*M+s*z+l*O,a[1]=d*C+c*D+u*B+g*L,a[5]=d*k+c*E+u*P+g*F,a[9]=d*b+c*w+u*T+g*I,a[13]=d*S+c*M+u*z+g*O,a[2]=m*C+f*D+p*B+v*L,a[6]=m*k+f*E+p*P+v*F,a[10]=m*b+f*w+p*T+v*I,a[14]=m*S+f*M+p*z+v*O,a[3]=y*C+A*D+x*B+h*L,a[7]=y*k+A*E+x*P+h*F,a[11]=y*b+A*w+x*T+h*I,a[15]=y*S+A*M+x*z+h*O,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],a=e[4],n=e[8],r=e[12],o=e[1],i=e[5],s=e[9],l=e[13],d=e[2],c=e[6],u=e[10],g=e[14],m=e[3],f=e[7],p=e[11],v=e[15],y=t*i,A=t*s,x=t*l,h=a*o,C=a*s,k=a*l,b=n*o,S=n*i,D=n*l,E=r*o,w=r*i,M=r*s;return m*(M*c-D*c-w*u+k*u+S*g-C*g)+f*(A*g-x*u+E*u-b*g+D*d-M*d)+p*(x*c-y*g-E*c+h*g+w*d-k*d)+v*(-S*d-A*c+y*u+b*c-h*u+C*d)}},{key:"getInverse",value:function(e){var t=this.elements,a=e.elements,n=a[0],r=a[1],o=a[2],i=a[3],s=a[4],l=a[5],d=a[6],c=a[7],u=a[8],g=a[9],m=a[10],f=a[11],p=a[12],v=a[13],y=a[14],A=a[15],x=g*y*c-v*m*c+v*d*f-l*y*f-g*d*A+l*m*A,h=p*m*c-u*y*c-p*d*f+s*y*f+u*d*A-s*m*A,C=u*v*c-p*g*c+p*l*f-s*v*f-u*l*A+s*g*A,k=p*g*d-u*v*d-p*l*m+s*v*m+u*l*y-s*g*y,b=n*x+r*h+o*C+i*k,S;return 0===b?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(S=1/b,t[0]=x*S,t[1]=(v*m*i-g*y*i-v*o*f+r*y*f+g*o*A-r*m*A)*S,t[2]=(l*y*i-v*d*i+v*o*c-r*y*c-l*o*A+r*d*A)*S,t[3]=(g*d*i-l*m*i-g*o*c+r*m*c+l*o*f-r*d*f)*S,t[4]=h*S,t[5]=(u*y*i-p*m*i+p*o*f-n*y*f-u*o*A+n*m*A)*S,t[6]=(p*d*i-s*y*i-p*o*c+n*y*c+s*o*A-n*d*A)*S,t[7]=(s*m*i-u*d*i+u*o*c-n*m*c-s*o*f+n*d*f)*S,t[8]=C*S,t[9]=(p*g*i-u*v*i-p*r*f+n*v*f+u*r*A-n*g*A)*S,t[10]=(s*v*i-p*l*i+p*r*c-n*v*c-s*r*A+n*l*A)*S,t[11]=(u*l*i-s*g*i-u*r*c+n*g*c+s*r*f-n*l*f)*S,t[12]=k*S,t[13]=(u*v*o-p*g*o+p*r*m-n*v*m-u*r*y+n*g*y)*S,t[14]=(p*l*o-s*v*o-p*r*d+n*v*d+s*r*y-n*l*y)*S,t[15]=(s*g*o-u*l*o+u*r*d-n*g*d-s*r*m+n*l*m)*S),this}},{key:"transpose",value:function(){var e=this.elements,a;return a=e[1],e[1]=e[4],e[4]=a,a=e[2],e[2]=e[8],e[8]=a,a=e[6],e[6]=e[9],e[9]=a,a=e[3],e[3]=e[12],e[12]=a,a=e[7],e[7]=e[13],e[13]=a,a=e[11],e[11]=e[14],e[14]=a,this}},{key:"scale",value:function(e,t,a){var n=this.elements;return n[0]*=e,n[4]*=t,n[8]*=a,n[1]*=e,n[5]*=t,n[9]*=a,n[2]*=e,n[6]*=t,n[10]*=a,n[3]*=e,n[7]*=t,n[11]*=a,this}},{key:"makeScale",value:function(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}},{key:"makeTranslation",value:function(e,t,a){return this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=De(e),a=he(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=De(e),a=he(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=De(e),a=he(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,a){var n=De(a),r=he(a),o=1-n,t=e.x,i=e.y,s=e.z,l=o*t,d=o*i;return this.set(l*t+n,l*i-r*s,l*s+r*i,0,l*i+r*s,d*i+n,d*s-r*t,0,l*s-r*i,d*s+r*t,o*s*s+n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,a){return this.set(1,t,a,0,e,1,a,0,e,t,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,a){var n=this.elements,r=t.x,o=t.y,i=t.z,s=t.w,l=r+r,d=o+o,c=i+i,u=r*l,g=r*d,m=r*c,f=o*d,p=o*c,v=i*c,y=s*l,A=s*d,x=s*c,h=a.x,C=a.y,k=a.z;return n[0]=(1-(f+v))*h,n[1]=(g+x)*h,n[2]=(m-A)*h,n[3]=0,n[4]=(g-x)*C,n[5]=(1-(u+v))*C,n[6]=(p+y)*C,n[7]=0,n[8]=(m+A)*k,n[9]=(p-y)*k,n[10]=(1-(u+f))*k,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}},{key:"decompose",value:function(e,t,a){var n=this.elements,r=n[0],o=n[1],i=n[2],s=n[4],l=n[5],d=n[6],c=n[8],u=n[9],g=n[10],m=this.determinant(),f=ln.set(r,o,i).length()*(0>m?-1:1),p=ln.set(s,l,d).length(),v=ln.set(c,u,g).length(),y=1/f,A=1/p,x=1/v;return e.x=n[12],e.y=n[13],e.z=n[14],n[0]*=y,n[1]*=y,n[2]*=y,n[4]*=A,n[5]*=A,n[6]*=A,n[8]*=x,n[9]*=x,n[10]*=x,t.setFromRotationMatrix(this),n[0]=r,n[1]=o,n[2]=i,n[4]=s,n[5]=l,n[6]=d,n[8]=c,n[9]=u,n[10]=g,a.x=f,a.y=p,a.z=v,this}},{key:"makePerspective",value:function(e,t,a,n,r,o){var i=this.elements;return i[0]=2*r/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*r/(a-n),i[9]=(a+n)/(a-n),i[13]=0,i[2]=0,i[6]=0,i[10]=-(o+r)/(o-r),i[14]=-2*o*r/(o-r),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}},{key:"makeOrthographic",value:function(e,t,a,n,r,o){var i=this.elements,s=1/(t-e),l=1/(a-n),d=1/(o-r);return i[0]=2*s,i[4]=0,i[8]=0,i[12]=-((t+e)*s),i[1]=0,i[5]=2*l,i[9]=0,i[13]=-((a+n)*l),i[2]=0,i[6]=0,i[10]=-2*d,i[14]=-((o+r)*d),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}},{key:"equals",value:function(e){var t=this.elements,a=e.elements,n=!0,r;for(r=0;n&&16>r;++r)t[r]!==a[r]&&(n=!1);return n}}]),e}(),un=[new Ga,new Ga,new Ga,new Ga],gn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga;n(this,e),this.origin=t,this.direction=a}return o(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"at",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga;return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,un[0])),this}},{key:"closestPointToPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga,a=t.subVectors(e,this.origin).dot(this.direction);return 0<=a?t.copy(this.direction).multiplyScalar(a).add(this.origin):t.copy(this.origin)}},{key:"distanceSquaredToPoint",value:function(e){var t=un[0].subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):un[0].copy(this.direction).multiplyScalar(t).add(this.origin).distanceToSquared(e)}},{key:"distanceToPoint",value:function(e){return ke(this.distanceSquaredToPoint(e))}},{key:"distanceToPlane",value:function(e){var a=e.normal.dot(this.direction),n=0===a?0===e.distanceToPoint(this.origin)?0:-1:-(this.origin.dot(e.normal)+e.constant)/a;return 0<=n?n:null}},{key:"distanceSquaredToSegment",value:function(e,t,a,n){var r=un[0].copy(e).add(t).multiplyScalar(.5),o=un[1].copy(t).sub(e).normalize(),i=un[2].copy(this.origin).sub(r),s=.5*e.distanceTo(t),l=-this.direction.dot(o),d=i.dot(this.direction),u=-i.dot(o),g=i.lengthSq(),c=Be(1-l*l),m,f,p,v,y;return 0<c?(m=l*u-d,f=l*d-u,p=s*c,0<=m?f>=-p?f<=p?(v=1/c,m*=v,f*=v,y=m*(m+l*f+2*d)+f*(l*m+f+2*u)+g):(f=s,m=Pe(0,-(l*f+d)),y=-m*m+f*(f+2*u)+g):(f=-s,m=Pe(0,-(l*f+d)),y=-m*m+f*(f+2*u)+g):f<=-p?(m=Pe(0,-(-l*s+d)),f=0<m?-s:Te(Pe(-s,-u),s),y=-m*m+f*(f+2*u)+g):f<=p?(m=0,f=Te(Pe(-s,-u),s),y=f*(f+2*u)+g):(m=Pe(0,-(l*s+d)),f=0<m?s:Te(Pe(-s,-u),s),y=-m*m+f*(f+2*u)+g)):(f=0<l?-s:s,m=Pe(0,-(l*f+d)),y=-m*m+f*(f+2*u)+g),void 0!==a&&a.copy(this.direction).multiplyScalar(m).add(this.origin),void 0!==n&&n.copy(o).multiplyScalar(f).add(r),y}},{key:"intersectSphere",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga,a=un[0].subVectors(e.center,this.origin),n=a.dot(this.direction),r=a.dot(a)-n*n,o=e.radius*e.radius,i=null,s,l,d;return r<=o&&(s=ke(o-r),l=n-s,d=n+s,(0<=l||0<=d)&&(i=0>l?this.at(d,t):this.at(l,t))),i}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"intersectPlane",value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga,n=this.distanceToPlane(e);return null===n?null:this.at(n,a)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t}},{key:"intersectBox",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ga,a=this.origin,n=this.direction,r=e.min,o=e.max,i=1/n.x,s=1/n.y,l=1/n.z,d=null,c,u,g,m,f,p;return 0<=i?(c=(r.x-a.x)*i,u=(o.x-a.x)*i):(c=(o.x-a.x)*i,u=(r.x-a.x)*i),0<=s?(g=(r.y-a.y)*s,m=(o.y-a.y)*s):(g=(o.y-a.y)*s,m=(r.y-a.y)*s),c<=m&&g<=u&&((g>c||c!==c)&&(c=g),(m<u||u!==u)&&(u=m),0<=l?(f=(r.z-a.z)*l,p=(o.z-a.z)*l):(f=(o.z-a.z)*l,p=(r.z-a.z)*l),c<=p&&f<=u&&((f>c||c!==c)&&(c=f),(p<u||u!==u)&&(u=p),0<=u&&(d=this.at(0<=c?c:u,t)))),d}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,un[0])}},{key:"intersectTriangle",value:function(e,t,a,n,r){var o=this.direction,i=un[0],s=un[1],l=un[2],d=un[3],c=null,u,g,m,f,p;return s.subVectors(t,e),l.subVectors(a,e),d.crossVectors(s,l),u=o.dot(d),0===u||n&&0<u||(0<u?g=1:(g=-1,u=-u),i.subVectors(this.origin,e),m=g*o.dot(l.crossVectors(i,l)),0<=m&&(f=g*o.dot(s.cross(i)),0<=f&&m+f<=u&&(p=-g*i.dot(d),0<=p&&(c=this.at(p/u,r))))),c}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),mn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.radius=t,this.phi=a,this.theta=r}return o(e,[{key:"set",value:function(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeSafe",value:function(){return this.phi=Pe(1e-6,Te(we-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,a){return this.radius=ke(e*e+t*t+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Ae(e,a),this.phi=xe(Te(Pe(t/this.radius,-1),1))),this}}]),e}(),fn=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,1,0,1])}return o(e,[{key:"set",value:function(t,a,n,r,o,i){var s=this.elements;return s[0]=t,s[1]=a,s[3]=r,s[2]=n,s[4]=o,s[5]=i,this}},{key:"identity",value:function(){return this.set(1,0,0,1,0,1),this}},{key:"copy",value:function(e){var t=e.elements;return this.set(t[0],t[1],t[2],t[3],t[4],t[5]),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toMatrix3",value:function(e){var t=e.elements;e.set(t[0],t[1],t[2],t[1],t[3],t[4],t[2],t[4],t[5])}},{key:"add",value:function(e){var t=this.elements,a=e.elements;return t[0]+=a[0],t[1]+=a[1],t[3]+=a[3],t[2]+=a[2],t[4]+=a[4],t[5]+=a[5],this}},{key:"norm",value:function(){var t=this.elements,e=t[1]*t[1],a=t[2]*t[2],n=t[4]*t[4];return ke(t[0]*t[0]+e+a+e+t[3]*t[3]+n+a+n+t[5]*t[5])}},{key:"off",value:function(){var t=this.elements;return ke(2*(t[1]*t[1]+t[2]*t[2]+t[4]*t[4]))}},{key:"applyToVector3",value:function(t){var a=t.x,n=t.y,r=t.z,o=this.elements;return t.x=o[0]*a+o[1]*n+o[2]*r,t.y=o[1]*a+o[3]*n+o[4]*r,t.z=o[2]*a+o[4]*n+o[5]*r,t}},{key:"equals",value:function(e){var t=this.elements,a=e.elements,n=!0,r;for(r=0;n&&6>r;++r)t[r]!==a[r]&&(n=!1);return n}}],[{key:"calculateIndex",value:function(e,t){return 3-(3-e)*(2-e)/2+t}}]),e}(),pn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=t,this.y=a,this.z=r,this.w=o}return o(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*xe(e.w);var t=ke(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t=.01,a=.1,n=e.elements,r=n[0],o=n[4],i=n[8],l=n[1],d=n[5],c=n[9],u=n[2],g=n[6],m=n[10],f,p,v,A,h,C,k,b,S,D,E;return Be(o-l)<t&&Be(i-u)<t&&Be(c-g)<t?Be(o+l)<a&&Be(i+u)<a&&Be(c+g)<a&&Be(r+d+m-3)<a?this.set(1,0,0,0):(f=we,h=(r+1)/2,C=(d+1)/2,k=(m+1)/2,b=(o+l)/4,S=(i+u)/4,D=(c+g)/4,h>C&&h>k?h<t?(p=0,v=.707106781,A=.707106781):(p=ke(h),v=b/p,A=S/p):C>k?C<t?(p=.707106781,v=0,A=.707106781):(v=ke(C),p=b/v,A=D/v):k<t?(p=.707106781,v=.707106781,A=0):(A=ke(k),p=S/A,v=D/A),this.set(p,v,A,f)):(E=ke((g-c)*(g-c)+(i-u)*(i-u)+(l-o)*(l-o)),.001>Be(E)&&(E=1),this.x=(g-c)/E,this.y=(i-u)/E,this.z=(l-o)/E,this.w=xe((r+d+m-1)/2)),this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this.w=e.w*t.w,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this}},{key:"applyMatrix4",value:function(t){var a=this.x,n=this.y,r=this.z,o=this.w,i=t.elements;return this.x=i[0]*a+i[4]*n+i[8]*r+i[12]*o,this.y=i[1]*a+i[5]*n+i[9]*r+i[13]*o,this.z=i[2]*a+i[6]*n+i[10]*r+i[14]*o,this.w=i[3]*a+i[7]*n+i[11]*r+i[15]*o,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"manhattanLength",value:function(){return Be(this.x)+Be(this.y)+Be(this.z)+Be(this.w)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return ke(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanDistanceTo",value:function(e){return Be(this.x-e.x)+Be(this.y-e.y)+Be(this.z-e.z)+Be(this.w-e.w)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z,r=this.w-e.w;return t*t+a*a+n*n+r*r}},{key:"distanceTo",value:function(e){return ke(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=Te(this.x,e.x),this.y=Te(this.y,e.y),this.z=Te(this.z,e.z),this.w=Te(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Pe(this.x,e.x),this.y=Pe(this.y,e.y),this.z=Pe(this.z,e.z),this.w=Pe(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Pe(e.x,Te(t.x,this.x)),this.y=Pe(e.y,Te(t.y,this.y)),this.z=Pe(e.z,Te(t.z,this.z)),this.w=Pe(e.w,Te(t.w,this.w)),this}},{key:"floor",value:function(){return this.x=ze(this.x),this.y=ze(this.y),this.z=ze(this.z),this.w=ze(this.w),this}},{key:"ceil",value:function(){return this.x=be(this.x),this.y=be(this.y),this.z=be(this.z),this.w=be(this.w),this}},{key:"round",value:function(){return this.x=Le(this.x),this.y=Le(this.y),this.z=Le(this.z),this.w=Le(this.w),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}]),e}(),vn={MAIN:0,AUXILIARY:1,SECONDARY:2},yn=new Ga,An=new c,xn=function(){function e(t,a,r,o){n(this,e),this.position=t,this.quaternion=a,this.target=r,this.settings=o,this.spherical=new mn}return o(e,[{key:"setPosition",value:function(e){return this.position=e,this}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"updateQuaternion",value:function(){var e=this.settings,t=e.rotation;return e.general.orbit?An.lookAt(yn.subVectors(this.position,this.target),t.pivotOffset,t.up):An.lookAt(yn.set(0,0,0),this.target.setFromSpherical(this.spherical),t.up),this.quaternion.setFromRotationMatrix(An),this}},{key:"adjustSpherical",value:function(e,t){var a=this.settings,n=a.general.orbit,r=a.rotation,o=this.spherical;return o.theta=r.invertX?o.theta+e:o.theta-e,o.phi=(n||r.invertY)&&!(n&&r.invertY)?o.phi-t:o.phi+t,o.theta=Te(Pe(o.theta,r.minAzimuthalAngle),r.maxAzimuthalAngle),o.phi=Te(Pe(o.phi,r.minPolarAngle),r.maxPolarAngle),o.theta%=2*we,o.makeSafe(),n&&this.position.setFromSpherical(o).add(this.target),this}},{key:"zoom",value:function e(t){var a=this.settings,n=a.general,r=a.sensitivity,e=a.zoom,o=this.spherical,i,s,l;return n.orbit&&e.enabled&&(i=t*r.zoom,e.invert&&(i=-i),s=Pe(e.minDistance,1e-6),l=Te(e.maxDistance,1/0),o.radius=Te(Pe(o.radius+i,s),l),this.position.setFromSpherical(o).add(this.target)),this}},{key:"update",value:function(){}},{key:"lookAt",value:function(e){var t=this.spherical,a=this.position,n=this.target;return n.copy(e),this.settings.general.orbit?yn.subVectors(a,n):yn.subVectors(n,a).normalize(),t.setFromVector3(yn),t.radius=Pe(t.radius,1e-6),this.updateQuaternion(),this}},{key:"getViewDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return e.setFromSpherical(this.spherical).normalize(),this.settings.general.orbit&&e.negate(),e}}]),e}(),hn=function(){function e(){n(this,e),this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1}return o(e,[{key:"reset",value:function(){return this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1,this}}]),e}(),Cn=new Ga(1,0,0),x=new Ga(0,1,0),y=new Ga(0,0,1),z=new Ga,kn=function(){function e(t,a,r,o){n(this,e),this.position=t,this.quaternion=a,this.target=r,this.settings=o,this.movementState=new hn}return o(e,[{key:"setPosition",value:function(e){return this.position=e,this}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"translateOnAxis",value:function(e,t){z.copy(e).applyQuaternion(this.quaternion).multiplyScalar(t),this.position.add(z),this.settings.general.orbit&&this.target.add(z)}},{key:"translate",value:function(e){var t=this.settings.sensitivity,a=this.movementState,n=e*t.translation;a.backward?this.translateOnAxis(y,n):a.forward&&this.translateOnAxis(y,-n),a.right?this.translateOnAxis(Cn,n):a.left&&this.translateOnAxis(Cn,-n),a.up?this.translateOnAxis(x,n):a.down&&this.translateOnAxis(x,-n)}},{key:"update",value:function(e){this.settings.translation.enabled&&this.translate(e)}},{key:"moveTo",value:function(e){return this.settings.general.orbit?this.target.copy(e):this.position.copy(e),this}}]),e}(),bn=new Proxy({BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,META_LEFT:91,META_RIGHT:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},{get:function(e,t){return t in e?e[t]:1===t.length?t.toUpperCase().charCodeAt(0):void 0}}),Sn=function(){function e(){n(this,e),this.orbit=!0}return o(e,[{key:"copy",value:function(e){return this.orbit=e.orbit,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Dn=function(){function e(){n(this,e),this.defaultActions=new Map,this.actions=new Map}return o(e,[{key:"reset",value:function(){return this.actions=new Map(this.defaultActions),this}},{key:"setDefault",value:function(e){return this.defaultActions=e,this.reset()}},{key:"copy",value:function(e){return this.defaultActions=new Map(e.defaultActions),this.actions=new Map(e.actions),this}},{key:"clearDefault",value:function(){return this.defaultActions.clear(),this}},{key:"clear",value:function(){return this.actions.clear(),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"has",value:function(e){return this.actions.has(e)}},{key:"get",value:function(e){return this.actions.get(e)}},{key:"set",value:function(e,t){return this.actions.set(e,t),this}},{key:"delete",value:function(e){return this.actions.delete(e)}},{key:"toJSON",value:function(){return{defaultActions:p(this.defaultActions),actions:p(this.actions)}}}]),e}(),En=function(){function e(){n(this,e),this.hold=!1,this.lock=!0}return o(e,[{key:"copy",value:function(e){return this.hold=e.hold,this.lock=e.lock,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),wn=function(){function e(){n(this,e),this.up=new Ga,this.up.copy(x),this.pivotOffset=new Ga,this.minAzimuthalAngle=-Infinity,this.maxAzimuthalAngle=1/0,this.minPolarAngle=0,this.maxPolarAngle=we,this.invertX=!1,this.invertY=!1}return o(e,[{key:"copy",value:function(e){return this.up.copy(e.up),this.pivotOffset.copy(e.pivotOffset),this.minAzimuthalAngle=null===e.minAzimuthalAngle?-Infinity:e.minAzimuthalAngle,this.maxAzimuthalAngle=null===e.maxAzimuthalAngle?1/0:e.maxAzimuthalAngle,this.minPolarAngle=e.minPolarAngle,this.maxPolarAngle=e.maxPolarAngle,this.invertX=e.invertX,this.invertY=e.invertY,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Mn=function(){function e(){n(this,e),this.rotation=.0025,this.translation=1,this.zoom=.1}return o(e,[{key:"copy",value:function(e){return this.rotation=e.rotation,this.translation=e.translation,this.zoom=e.zoom,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Bn=function(){function e(){n(this,e),this.enabled=!0}return o(e,[{key:"copy",value:function(e){return this.enabled=e.enabled,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Pn=function(){function e(){n(this,e),this.enabled=!0,this.invert=!1,this.minDistance=1e-6,this.maxDistance=1/0}return o(e,[{key:"copy",value:function(e){return this.enabled=e.enabled,this.invert=e.invert,this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Tn=function(){function e(){n(this,e),this.general=new Sn,this.keyBindings=new Dn,this.keyBindings.setDefault(new Map([[bn.W,Ua.MOVE_FORWARD],[bn.UP,Ua.MOVE_FORWARD],[bn.A,Ua.MOVE_LEFT],[bn.LEFT,Ua.MOVE_LEFT],[bn.S,Ua.MOVE_BACKWARD],[bn.DOWN,Ua.MOVE_BACKWARD],[bn.D,Ua.MOVE_RIGHT],[bn.RIGHT,Ua.MOVE_RIGHT],[bn.X,Ua.MOVE_DOWN],[bn.SPACE,Ua.MOVE_UP],[bn.PAGE_DOWN,Ua.ZOOM_OUT],[bn.PAGE_UP,Ua.ZOOM_IN]])),this.pointer=new En,this.rotation=new wn,this.sensitivity=new Mn,this.translation=new Bn,this.zoom=new Pn}return o(e,[{key:"copy",value:function(e){return this.general.copy(e.general),this.keyBindings.copy(e.keyBindings),this.pointer.copy(e.pointer),this.rotation.copy(e.rotation),this.sensitivity.copy(e.sensitivity),this.translation.copy(e.translation),this.zoom.copy(e.zoom),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toDataURL",value:function(){return URL.createObjectURL(new Blob([JSON.stringify(this)],{type:"text/json"}))}}]),e}(),zn=function(){function e(){n(this,e)}return o(e,[{key:"execute",value:function(){throw new Error("Strategy#execute method not implemented!")}}]),e}(),Ln=function(e){function t(e,a){var r;return n(this,t),r=u(this,s(t).call(this)),r.movementState=e,r.direction=a,r}return i(t,e),o(t,[{key:"execute",value:function(e){var t=this.movementState;switch(this.direction){case Fn.FORWARD:t.forward=e;break;case Fn.LEFT:t.left=e;break;case Fn.BACKWARD:t.backward=e;break;case Fn.RIGHT:t.right=e;break;case Fn.DOWN:t.down=e;break;case Fn.UP:t.up=e;}}}]),t}(zn),Fn={FORWARD:0,LEFT:1,BACKWARD:2,RIGHT:3,DOWN:4,UP:5},In=function(e){function t(e,a){var r;return n(this,t),r=u(this,s(t).call(this)),r.rotationManager=e,r.zoomIn=a,r}return i(t,e),o(t,[{key:"execute",value:function(e){e&&this.rotationManager.zoom(this.zoomIn?-1:1)}}]),t}(zn),On=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.body;n(this,e),this.dom=r,this.position=t,this.quaternion=a,this.target=new Ga,this.settings=new Tn,this.rotationManager=new xn(t,a,this.target,this.settings),this.translationManager=new kn(t,a,this.target,this.settings),this.strategies=function(e,t){var a=t.movementState;return new Map([[Ua.MOVE_FORWARD,new Ln(a,Fn.FORWARD)],[Ua.MOVE_LEFT,new Ln(a,Fn.LEFT)],[Ua.MOVE_BACKWARD,new Ln(a,Fn.BACKWARD)],[Ua.MOVE_RIGHT,new Ln(a,Fn.RIGHT)],[Ua.MOVE_DOWN,new Ln(a,Fn.DOWN)],[Ua.MOVE_UP,new Ln(a,Fn.UP)],[Ua.ZOOM_OUT,new In(e,!1)],[Ua.ZOOM_IN,new In(e,!0)]])}(this.rotationManager,this.translationManager),this.lastScreenPosition=new Xa,this.dragging=!1,this.enabled=!1,null!==t&&null!==a&&(this.lookAt(this.target),null!==r&&this.setEnabled())}return o(e,[{key:"getDom",value:function(){return this.dom}},{key:"getPosition",value:function(){return this.position}},{key:"getQuaternion",value:function(){return this.quaternion}},{key:"getTarget",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return e.copy(this.target),this.settings.general.orbit||e.add(this.position),e}},{key:"getViewDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ga;return this.rotationManager.getViewDirection(e)}},{key:"setDom",value:function(e){var t=this.enabled;return null!==e&&(t&&this.setEnabled(!1),this.dom=e,this.setEnabled(t)),this}},{key:"setPosition",value:function(e){return this.position=e,this.rotationManager.setPosition(e),this.translationManager.setPosition(e),this.lookAt(this.target)}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this.rotationManager.setQuaternion(e),this.translationManager.setQuaternion(e),this.lookAt(this.target)}},{key:"setTarget",value:function(e){return this.target=e,this.rotationManager.setTarget(e),this.translationManager.setTarget(e),this.lookAt(this.target)}},{key:"setOrbitEnabled",value:function(e){var t=this.settings.general;return t.orbit!==e&&(this.getTarget(this.target),t.orbit=e,this.lookAt(this.target)),this}},{key:"copy",value:function(e){return this.dom=e.getDom(),this.position=e.getPosition(),this.quaternion=e.getQuaternion(),this.target=e.getTarget(),this.settings.copy(e.settings),this.rotationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.translationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.lookAt(this.target)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"handlePointerMoveEvent",value:function(e){var t=this.settings,a=t.pointer,n=t.sensitivity,r=this.rotationManager,o=this.lastScreenPosition,i,s;document.pointerLockElement===this.dom?(!a.hold||this.dragging)&&r.adjustSpherical(e.movementX*n.rotation,e.movementY*n.rotation).updateQuaternion():(i=e.screenX-o.x,s=e.screenY-o.y,o.set(e.screenX,e.screenY),r.adjustSpherical(i*n.rotation,s*n.rotation).updateQuaternion())}},{key:"handleTouchMoveEvent",value:function(e){var t=this.settings.sensitivity,a=this.rotationManager,n=this.lastScreenPosition,r=e.touches[0],o=r.screenX-n.x,i=r.screenY-n.y;n.set(r.screenX,r.screenY),e.preventDefault(),a.adjustSpherical(o*t.rotation,i*t.rotation).updateQuaternion()}},{key:"handleMainPointerButton",value:function(e,t){this.dragging=t,this.settings.pointer.lock?this.setPointerLocked():t?(this.lastScreenPosition.set(e.screenX,e.screenY),this.dom.addEventListener("mousemove",this)):this.dom.removeEventListener("mousemove",this)}},{key:"handleAuxiliaryPointerButton",value:function(){}},{key:"handleSecondaryPointerButton",value:function(){}},{key:"handlePointerButtonEvent",value:function(e,t){switch(e.preventDefault(),e.button){case vn.MAIN:this.handleMainPointerButton(e,t);break;case vn.AUXILIARY:this.handleAuxiliaryPointerButton(e,t);break;case vn.SECONDARY:this.handleSecondaryPointerButton(e,t);}}},{key:"handleTouchEvent",value:function(e,t){var a=e.touches[0];e.preventDefault(),t?(this.lastScreenPosition.set(a.screenX,a.screenY),this.dom.addEventListener("touchmove",this)):this.dom.removeEventListener("touchmove",this)}},{key:"handleKeyboardEvent",value:function(e,t){var a=this.settings.keyBindings;a.has(e.keyCode)&&(e.preventDefault(),this.strategies.get(a.get(e.keyCode)).execute(t))}},{key:"handleWheelEvent",value:function(e){this.rotationManager.zoom(Ce(e.deltaY))}},{key:"handlePointerLockEvent",value:function(){document.pointerLockElement===this.dom?this.dom.addEventListener("mousemove",this):this.dom.removeEventListener("mousemove",this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.handlePointerMoveEvent(e);break;case"touchmove":this.handleTouchMoveEvent(e);break;case"mousedown":this.handlePointerButtonEvent(e,!0);break;case"mouseup":this.handlePointerButtonEvent(e,!1);break;case"touchstart":this.handleTouchEvent(e,!0);break;case"touchend":this.handleTouchEvent(e,!1);break;case"keydown":this.handleKeyboardEvent(e,!0);break;case"keyup":this.handleKeyboardEvent(e,!1);break;case"wheel":this.handleWheelEvent(e);break;case"pointerlockchange":this.handlePointerLockEvent();}}},{key:"update",value:function(e){this.rotationManager.update(e),this.translationManager.update(e)}},{key:"moveTo",value:function(e){return this.rotationManager.moveTo(e),this}},{key:"lookAt",value:function(e){return this.rotationManager.lookAt(e),this}},{key:"setPointerLocked",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];e?document.pointerLockElement!==this.dom&&void 0!==this.dom.requestPointerLock&&this.dom.requestPointerLock():void 0!==document.exitPointerLock&&document.exitPointerLock()}},{key:"setEnabled",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.dom;return this.translationManager.movementState.reset(),e&&!this.enabled?(document.addEventListener("pointerlockchange",this),document.body.addEventListener("keyup",this),document.body.addEventListener("keydown",this),t.addEventListener("mousedown",this),t.addEventListener("mouseup",this),t.addEventListener("touchstart",this),t.addEventListener("touchend",this),t.addEventListener("wheel",this)):!e&&this.enabled&&(document.removeEventListener("pointerlockchange",this),document.body.removeEventListener("keyup",this),document.body.removeEventListener("keydown",this),t.removeEventListener("mousedown",this),t.removeEventListener("mouseup",this),t.removeEventListener("touchstart",this),t.removeEventListener("touchend",this),t.removeEventListener("wheel",this),t.removeEventListener("mousemove",this),t.removeEventListener("touchmove",this)),this.setPointerLocked(!1),this.enabled=e,this}},{key:"dispose",value:function(){this.setEnabled(!1)}}]),e}(),Rn=function(e){function t(e,a){var r;return n(this,t),r=u(this,s(t).call(this,e,a)),r.composer=a,r.renderPass=new ua(r.scene,null),r.renderPass.renderToScreen=!0,r}return i(t,e),o(t,[{key:"render",value:function(e){this.composer.render(e)}},{key:"reset",value:function(){f(s(t.prototype),"reset",this).call(this);var e=new ua(this.scene,null);return e.enabled=this.renderPass.enabled,e.renderToScreen=!0,this.renderPass=e,this}}]),t}(Fe),Un=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"bloom",e)),t.bloomPass=null,t.texturePass=null,t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space2/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.01,2e3);o.position.set(-10,6,15),o.lookAt(t.position),this.camera=o;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,f;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),f=new e.Mesh(u,g),f.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),f.position.multiplyScalar(4*Math.random()),f.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),f.scale.multiplyScalar(.5*Math.random()),c.add(f);this.object=c,t.add(c),f=new e.Mesh(new e.BoxBufferGeometry(.25,8.25,.25),new e.MeshLambertMaterial({color:723723})),c=new e.Object3D;var p,v,y;p=c.clone();var A=f.clone();A.position.set(-4,0,4),p.add(A),A=f.clone(),A.position.set(4,0,4),p.add(A),A=f.clone(),A.position.set(-4,0,-4),p.add(A),A=f.clone(),A.position.set(4,0,-4),p.add(A),v=p.clone(),v.rotation.set(we/2,0,0),y=p.clone(),y.rotation.set(0,0,we/2),c.add(p),c.add(v),c.add(y),t.add(c),this.renderPass.renderToScreen=!1;var x=new aa({resolutionScale:.5,intensity:2,distinction:4});x.renderToScreen=!0,this.bloomPass=x,n.addPass(x);var h=new ka(x.overlay);h.renderToScreen=!0,h.enabled=!1,h.opacityDestination=0,this.texturePass=h,n.addPass(h)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.bloomPass,a=this.texturePass,n={resolution:t.getResolutionScale(),"kernel size":t.kernelSize,"blend mode":"screen"};e.add(n,"resolution").min(0).max(1).step(.01).onChange(function(){t.setResolutionScale(n.resolution)}),e.add(n,"kernel size").min(Ut.VERY_SMALL).max(Ut.HUGE).step(1).onChange(function(){t.kernelSize=n["kernel size"]}),e.add(t,"intensity").min(0).max(4).step(.01).onChange(function(){a.opacitySource=t.intensity});var r=e.addFolder("Luminance");r.add(t,"distinction").min(1).max(10).step(.1),r.open(),e.add(t,"blend").onChange(function(){t.renderToScreen=t.blend,a.enabled=!t.blend}),e.add(t,"dithering"),e.add(n,"blend mode",["add","screen"]).onChange(function(){t.combineMaterial.setScreenModeEnabled("add"!==n["blend mode"])})}}]),a}(Rn),Gn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"bokeh",e)),t.bokehPass=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space3/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,50);o.position.set(12.5,-.3,1.7),this.camera=o;var i=new On(o.position,o.quaternion,r.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.rotation=425e-6,i.settings.sensitivity.zoom=.15,i.settings.zoom.minDistance=11.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.CylinderBufferGeometry(1,1,20,6),c=new e.MeshPhongMaterial({color:16755370,flatShading:!0,envMap:a.get("sky")}),u=new e.Mesh(d,c);u.rotation.set(0,0,we/2),t.add(u);var g=new na(o,{focus:.32,dof:.02,aperture:.015,maxBlur:.025});this.renderPass.renderToScreen=!1,g.renderToScreen=!0,this.bokehPass=g,n.addPass(g)}},{key:"registerOptions",value:function(e){var t=this.bokehPass.getFullscreenMaterial(),a={focus:t.uniforms.focus.value,dof:t.uniforms.dof.value,aperture:t.uniforms.aperture.value,blur:t.uniforms.maxBlur.value};e.add(a,"focus").min(0).max(1).step(.001).onChange(function(){t.uniforms.focus.value=a.focus}),e.add(a,"dof").min(0).max(1).step(.001).onChange(function(){t.uniforms.dof.value=a.dof}),e.add(a,"aperture").min(0).max(.05).step(1e-4).onChange(function(){t.uniforms.aperture.value=a.aperture}),e.add(a,"blur").min(0).max(.1).step(.001).onChange(function(){t.uniforms.maxBlur.value=a.blur})}}]),a}(Rn),Qn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"realistic-bokeh",e)),t.bokehPass=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space3/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.01,50);o.position.set(3,1,3),o.lookAt(t.position),this.camera=o;var i=new On(o.position,o.quaternion,r.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=.25,i.settings.zoom.minDistance=2.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.SphereBufferGeometry(1,64,64),c=new e.MeshBasicMaterial({color:16776960,envMap:a.get("sky")}),u=new e.Mesh(d,c);t.add(u);var g=new ya(o,{rings:5,samples:5,showFocus:!1,manualDoF:!0,vignette:!0,pentagon:!0,shaderFocus:!0,noise:!1,maxBlur:2,luminanceThreshold:.15,luminanceGain:3.5,bias:.25,fringe:.33});this.renderPass.renderToScreen=!1,g.renderToScreen=!0,this.bokehPass=g,n.addPass(g)}},{key:"registerOptions",value:function(e){var t=this.bokehPass.getFullscreenMaterial(),a={rings:Ee(t.defines.RINGS_INT),samples:Ee(t.defines.SAMPLES_INT),"focal stop":t.uniforms.focalStop.value,"focal length":t.uniforms.focalLength.value,"shader focus":void 0!==t.defines.SHADER_FOCUS,"focal depth":t.uniforms.focalDepth.value,"focus coord X":t.uniforms.focusCoords.value.x,"focus coord Y":t.uniforms.focusCoords.value.y,"max blur":t.uniforms.maxBlur.value,"lum threshold":t.uniforms.luminanceThreshold.value,"lum gain":t.uniforms.luminanceGain.value,bias:t.uniforms.bias.value,fringe:t.uniforms.fringe.value,dithering:t.uniforms.ditherStrength.value,vignette:void 0!==t.defines.VIGNETTE,pentagon:void 0!==t.defines.PENTAGON,"manual DoF":void 0!==t.defines.MANUAL_DOF,"show focus":void 0!==t.defines.SHOW_FOCUS,noise:void 0!==t.defines.NOISE},n=e.addFolder("Focus");n.add(a,"show focus").onChange(function(){t.setShowFocusEnabled(a["show focus"])}),n.add(a,"shader focus").onChange(function(){t.setShaderFocusEnabled(a["shader focus"])}),n.add(a,"manual DoF").onChange(function(){t.setManualDepthOfFieldEnabled(a["manual DoF"])}),n.add(a,"focal stop").min(0).max(100).step(.1).onChange(function(){t.uniforms.focalStop.value=a["focal stop"]}),n.add(a,"focal depth").min(.1).max(35).step(.1).onChange(function(){t.uniforms.focalDepth.value=a["focal depth"]}),n.add(a,"focus coord X").min(0).max(1).step(.01).onChange(function(){t.uniforms.focusCoords.value.x=a["focus coord X"]}),n.add(a,"focus coord Y").min(0).max(1).step(.01).onChange(function(){t.uniforms.focusCoords.value.y=a["focus coord Y"]}),n.open(),n=e.addFolder("Sampling"),n.add(a,"rings").min(1).max(6).step(1).onChange(function(){t.defines.RINGS_INT=a.rings.toFixed(0),t.defines.RINGS_FLOAT=a.rings.toFixed(1),t.needsUpdate=!0}),n.add(a,"samples").min(1).max(6).step(1).onChange(function(){t.defines.SAMPLES_INT=a.samples.toFixed(0),t.defines.SAMPLES_FLOAT=a.samples.toFixed(1),t.needsUpdate=!0}),n=e.addFolder("Blur"),n.add(a,"max blur").min(0).max(10).step(.001).onChange(function(){t.uniforms.maxBlur.value=a["max blur"]}),n.add(a,"bias").min(0).max(3).step(.01).onChange(function(){t.uniforms.bias.value=a.bias}),n.add(a,"fringe").min(0).max(2).step(.05).onChange(function(){t.uniforms.fringe.value=a.fringe}),n.add(a,"noise").onChange(function(){t.setNoiseEnabled(a.noise)}),n.add(a,"dithering").min(0).max(.01).step(1e-4).onChange(function(){t.uniforms.ditherStrength.value=a.dithering}),n.add(a,"pentagon").onChange(function(){t.setPentagonEnabled(a.pentagon)}),n.open(),n=e.addFolder("Luminosity"),n.add(a,"lum threshold").min(0).max(1).step(.01).onChange(function(){t.uniforms.luminanceThreshold.value=a["lum threshold"]}),n.add(a,"lum gain").min(0).max(4).step(.01).onChange(function(){t.uniforms.luminanceGain.value=a["lum gain"]}),e.add(a,"vignette").onChange(function(){t.setVignetteEnabled(a.vignette)})}}]),a}(Rn),_n=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"blur",e)),t.savePass=null,t.blurPass=null,t.texturePass=null,t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/sunset/",o=".png",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(-15,0,-15),o.lookAt(t.position),this.camera=o;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(1440,200,2e3),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,f;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),f=new e.Mesh(u,g),f.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),f.position.multiplyScalar(10*Math.random()),f.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),f.scale.multiplyScalar(Math.random()),c.add(f);this.object=c,t.add(c);var p=new Aa;this.savePass=p,n.addPass(p),p=new ta,this.blurPass=p,n.addPass(p),p=new ka(this.savePass.renderTarget.texture,0,!1),this.renderPass.renderToScreen=!1,p.renderToScreen=!0,this.texturePass=p,n.addPass(p)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.renderPass,a=this.blurPass,n=this.texturePass,r={enabled:a.enabled,resolution:a.getResolutionScale(),"kernel size":a.kernelSize,strength:n.opacityDestination};e.add(r,"resolution").min(0).max(1).step(.01).onChange(function(){a.setResolutionScale(r.resolution)}),e.add(r,"kernel size").min(Ut.VERY_SMALL).max(Ut.HUGE).step(1).onChange(function(){a.kernelSize=r["kernel size"]}),e.add(r,"strength").min(0).max(1).step(.01).onChange(function(){n.opacityDestination=r.strength,n.opacitySource=1-r.strength}),e.add(a,"dithering"),e.add(r,"enabled").onChange(function(){t.renderToScreen=!r.enabled,a.enabled=r.enabled,n.enabled=r.enabled})}}]),a}(Rn),Hn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"depth",e)),t.object=null,t}return i(a,t),o(a,[{key:"initialize",value:function(){var t=this.scene,a=this.composer,n=a.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,2,10);r.position.set(2,1,2),r.lookAt(t.position),this.camera=r;var o=new On(r.position,r.quaternion,n.domElement);o.settings.pointer.lock=!1,o.settings.translation.enabled=!1,o.settings.sensitivity.zoom=.25,o.settings.zoom.minDistance=3,o.settings.zoom.maxDistance=9,o.lookAt(t.position),this.controls=o,n.setClearColor(0);var i=new e.Mesh(new e.DodecahedronBufferGeometry(1),new e.MeshBasicMaterial());this.object=i,t.add(i),this.renderPass.overrideMaterial=new e.MeshDepthMaterial}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.renderPass;e.add(t.overrideMaterial,"dithering").onChange(function(){t.overrideMaterial.needsUpdate=!0})}}]),a}(Rn),Vn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"dot-screen",e)),t.dotScreenPass=null,t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space3/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(10,1,10),o.lookAt(t.position),this.camera=o;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,f;for(f=0;100>f;++f)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var p=new sa({scale:.8,angle:.5*we,intensity:.25});this.renderPass.renderToScreen=!1,p.renderToScreen=!0,this.dotScreenPass=p,n.addPass(p)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.dotScreenPass.getFullscreenMaterial(),a={average:void 0!==t.defines.AVERAGE,scale:t.uniforms.scale.value,angle:t.uniforms.angle.value,intensity:t.uniforms.intensity.value,"center X":t.uniforms.offsetRepeat.value.x,"center Y":t.uniforms.offsetRepeat.value.y};e.add(a,"average").onChange(function(){t.setAverageEnabled(a.average)}),e.add(a,"scale").min(0).max(1).step(.01).onChange(function(){t.uniforms.scale.value=a.scale}),e.add(a,"angle").min(0).max(Math.PI).step(.001).onChange(function(){t.uniforms.angle.value=a.angle}),e.add(a,"intensity").min(0).max(1).step(.01).onChange(function(){t.uniforms.intensity.value=a.intensity});var n=e.addFolder("Center");n.add(a,"center X").min(-1).max(1).step(.01).onChange(function(){t.uniforms.offsetRepeat.value.x=a["center X"]}),n.add(a,"center Y").min(-1).max(1).step(.01).onChange(function(){t.uniforms.offsetRepeat.value.y=a["center Y"]})}}]),a}(Rn),Yn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"film",e)),t.filmPass=null,t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(10,1,10),o.lookAt(t.position),this.camera=o;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,f;for(f=0;100>f;++f)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var p=new la({grayscale:!1,sepia:!0,vignette:!0,eskil:!0,scanlines:!0,grid:!1,noise:!0,noiseIntensity:.5,scanlineIntensity:.5,gridIntensity:.2,scanlineDensity:1.5,gridScale:1.25,greyscaleIntensity:1,sepiaIntensity:.5,vignetteOffset:1,vignetteDarkness:1});this.renderPass.renderToScreen=!1,p.renderToScreen=!0,this.filmPass=p,n.addPass(p)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.filmPass,a=t.getFullscreenMaterial(),n=a.uniforms,r={greyscale:void 0!==a.defines.GREYSCALE,sepia:void 0!==a.defines.SEPIA,vignette:void 0!==a.defines.VIGNETTE,eskil:void 0!==a.defines.ESKIL,noise:void 0!==a.defines.NOISE,scanlines:void 0!==a.defines.SCANLINES,grid:void 0!==a.defines.GRID,"noise intensity":n.noiseIntensity.value,"scanlines intensity":n.scanlineIntensity.value,"grid intensity":n.gridIntensity.value,"scanlines count":t.getScanlineDensity(),"grid scale":t.getGridScale(),"grid line width":t.getGridLineWidth(),"blend mode":"screen","greyscale intensity":n.greyscaleIntensity.value,"sepia intensity":n.sepiaIntensity.value,"vignette offset":n.vignetteOffset.value,"vignette darkness":n.vignetteDarkness.value},o=e.addFolder("Greyscale");o.add(r,"greyscale").onChange(function(){a.setGreyscaleEnabled(r.greyscale)}),o.add(r,"greyscale intensity").min(0).max(1).step(.01).onChange(function(){n.greyscaleIntensity.value=r["greyscale intensity"]}),o=e.addFolder("Noise, Scanlines and Grid"),o.add(r,"blend mode",["add","screen"]).onChange(function(){a.setScreenModeEnabled("add"!==r["blend mode"])}),o.add(r,"noise").onChange(function(){a.setNoiseEnabled(r.noise)}),o.add(r,"noise intensity").min(0).max(1).step(.01).onChange(function(){n.noiseIntensity.value=r["noise intensity"]}),o.add(r,"scanlines").onChange(function(){a.setScanlinesEnabled(r.scanlines)}),o.add(r,"scanlines intensity").min(0).max(1).step(.01).onChange(function(){n.scanlineIntensity.value=r["scanlines intensity"]}),o.add(r,"scanlines count").min(0).max(2).step(.01).onChange(function(){t.setScanlineDensity(r["scanlines count"])}),o.add(r,"grid").onChange(function(){a.setGridEnabled(r.grid)}),o.add(r,"grid intensity").min(0).max(1).step(.01).onChange(function(){n.gridIntensity.value=r["grid intensity"]}),o.add(r,"grid scale").min(.01).max(2).step(.01).onChange(function(){t.setGridScale(r["grid scale"])}),o.add(r,"grid line width").min(0).max(1).step(.001).onChange(function(){t.setGridLineWidth(r["grid line width"])}),o=e.addFolder("Sepia"),o.add(r,"sepia").onChange(function(){a.setSepiaEnabled(r.sepia)}),o.add(r,"sepia intensity").min(0).max(1).step(.01).onChange(function(){n.sepiaIntensity.value=r["sepia intensity"]}),o=e.addFolder("Vignette"),o.add(r,"vignette").onChange(function(){a.setVignetteEnabled(r.vignette)}),o.add(r,"eskil").onChange(function(){a.setEskilEnabled(r.eskil)}),o.add(r,"vignette offset").min(0).max(1).step(.01).onChange(function(){n.vignetteOffset.value=r["vignette offset"]}),o.add(r,"vignette darkness").min(0).max(1).step(.01).onChange(function(){n.vignetteDarkness.value=r["vignette darkness"]})}}]),a}(Rn),Nn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"glitch",e)),t.glitchPass=null,t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),o="textures/skies/space4/",i=".jpg",s=[o+"px"+i,o+"nx"+i,o+"py"+i,o+"ny"+i,o+"pz"+i,o+"nz"+i];return new Promise(function(o,i){0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&o()},r.load(s,function(e){t.set("sky",e)}),n.load("textures/perturb.jpg",function(a){a.magFilter=a.minFilter=e.NearestFilter,t.set("perturb-map",a)})):o()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(6,1,6),o.lookAt(t.position),this.camera=o;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,f;for(f=0;100>f;++f)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var p=new da({perturbMap:a.get("perturb-map")});this.renderPass.renderToScreen=!1,p.renderToScreen=!0,this.glitchPass=p,n.addPass(p)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.glitchPass,a=t.perturbMap,n={mode:t.mode,"custom noise":!0};e.add(n,"mode").min(ca.SPORADIC).max(ca.CONSTANT_WILD).step(1).onChange(function(){t.mode=n.mode}),e.add(n,"custom noise").onChange(function(){n["custom noise"]?t.perturbMap=a:t.generatePerturbMap(64)})}}]),a}(Rn),Xn=new e.Vector2,Wn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"outline",e)),t.raycaster=null,t.selectedObject=null,t.outlinePass=null,t}return i(a,t),o(a,[{key:"raycast",value:function(e){var t=this.raycaster,a,n;Xn.x=2*(e.clientX/window.innerWidth)-1,Xn.y=2*-(e.clientY/window.innerHeight)+1,t.setFromCamera(Xn,this.camera),a=t.intersectObjects(this.scene.children),null!==this.selectedObject&&(this.selectedObject=null),0<a.length&&(n=a[0],void 0===n.object?console.warn("Encountered an undefined object",a):this.selectedObject=n.object)}},{key:"handleSelection",value:function(){var e=this.outlinePass,t=e.selection,a=this.selectedObject;null!==a&&(0<=t.indexOf(a)?e.deselectObject(a):e.selectObject(a))}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.raycast(e);break;case"mousedown":this.handleSelection();}}},{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),o="textures/skies/sunset/",i=".png",s=[o+"px"+i,o+"nx"+i,o+"py"+i,o+"ny"+i,o+"pz"+i,o+"nz"+i];return new Promise(function(o,i){0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&o()},r.load(s,function(e){t.set("sky",e)}),n.load("textures/tripattern.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("pattern-color",a)})):o()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(-4,1.25,-5),o.lookAt(t.position),this.camera=o;var i=new On(o.position,o.quaternion,r.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.Mesh(new e.SphereBufferGeometry(1,32,32),new e.MeshPhongMaterial({color:16776960}));d.position.set(2,0,-2),t.add(d),d=new e.Mesh(new e.ConeBufferGeometry(1,1,32),new e.MeshPhongMaterial({color:65280})),d.position.set(-2,0,2),t.add(d),d=new e.Mesh(new e.OctahedronBufferGeometry(),new e.MeshPhongMaterial({color:16711935})),d.position.set(2,0,2),t.add(d),d=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({color:65535})),d.position.set(-2,0,-2),t.add(d),this.raycaster=new e.Raycaster,r.domElement.addEventListener("mousemove",this),r.domElement.addEventListener("mousedown",this);var c=new pa(t,o,{edgeStrength:2.5,patternScale:7.5});c.setSelection(t.children),c.deselectObject(d),this.renderPass.renderToScreen=!1,c.renderToScreen=!0,this.outlinePass=c,n.addPass(c)}},{key:"registerOptions",value:function(e){var t=this.assets,a=this.outlinePass,n={resolution:a.getResolutionScale(),"kernel size":a.kernelSize,"use pattern":!1,"pattern scale":a.outlineBlendMaterial.uniforms.patternScale.value,"edge strength":a.outlineBlendMaterial.uniforms.edgeStrength.value,"pulse speed":a.pulseSpeed,"visible edge":a.outlineBlendMaterial.uniforms.visibleEdgeColor.value.getHex(),"hidden edge":a.outlineBlendMaterial.uniforms.hiddenEdgeColor.value.getHex(),"alpha blending":!1,"x-ray":!0};e.add(n,"resolution").min(0).max(1).step(.01).onChange(function(){a.setResolutionScale(n.resolution)}),e.add(n,"kernel size").min(Ut.VERY_SMALL).max(Ut.HUGE).step(1).onChange(function(){a.kernelSize=n["kernel size"]}),e.add(a,"blur"),e.add(a,"dithering"),e.add(n,"use pattern").onChange(function(){a.setPatternTexture(n["use pattern"]?t.get("pattern-color"):null)}),e.add(n,"pattern scale").min(1).max(10).step(.01).onChange(function(){a.outlineBlendMaterial.uniforms.patternScale.value=n["pattern scale"]}),e.add(n,"edge strength").min(0).max(10).step(.01).onChange(function(){a.outlineBlendMaterial.uniforms.edgeStrength.value=n["edge strength"]}),e.add(n,"pulse speed").min(0).max(2).step(.01).onChange(function(){a.pulseSpeed=n["pulse speed"]}),e.addColor(n,"visible edge").onChange(function(){a.outlineBlendMaterial.uniforms.visibleEdgeColor.value.setHex(n["visible edge"])}),e.addColor(n,"hidden edge").onChange(function(){a.outlineBlendMaterial.uniforms.hiddenEdgeColor.value.setHex(n["hidden edge"])}),e.add(n,"alpha blending").onChange(function(){a.outlineBlendMaterial.setAlphaBlendingEnabled(n["alpha blending"])}),e.add(n,"x-ray").onChange(function(){a.outlineBlendMaterial.setXRayEnabled(n["x-ray"])})}},{key:"reset",value:function(){f(s(a.prototype),"reset",this).call(this);var e=this.composer.renderer.domElement;return e.removeEventListener("mousemove",this),e.removeEventListener("mousedown",this),this}}]),a}(Rn),jn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"pixelation",e)),t.object=null,t.maskObject=null,t.maskPass=null,t.pixelationPass=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(10,1,10),o.lookAt(t.position),this.camera=o;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,f;for(f=0;100>f;++f)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var p=new e.Scene;m=new e.Mesh(new e.BoxBufferGeometry(4,4,4)),this.maskObject=m,p.add(m),this.renderPass.renderToScreen=!1;var v=new ma(p,o);v.renderToScreen=!0,this.maskPass=v,n.addPass(v),v=new va(5),v.renderToScreen=!0,this.pixelationPass=v,n.addPass(v),n.addPass(new ra)}},{key:"render",value:function(e){var t=this.object,n=this.maskObject,r=2*we,o=.001*performance.now();t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=r&&(t.rotation.x-=r),t.rotation.y>=r&&(t.rotation.y-=r),n.position.x=4*De(o/1.5),n.position.y=4*he(o),n.rotation.x=o,n.rotation.y=.5*o,f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.maskPass,a={"use mask":t.enabled};e.add(this.pixelationPass,"granularity").min(0).max(50).step(.1),e.add(a,"use mask").onChange(function(){t.enabled=a["use mask"]})}}]),a}(Rn),Kn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"god-rays",e)),t.godRaysPass=null,t.sun=null,t.directionalLight=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r=new e.TextureLoader(a),o=new e.ObjectLoader(a),i="textures/skies/starry/",s=".png",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(i,s){0===t.size?(a.onError=s,a.onProgress=function(e,t,a){t===a&&i()},n.load(l,function(e){t.set("sky",e)}),o.load("models/waggon.json",function(e){e.rotation.x=.25*we,e.rotation.y=.75*we,t.set("waggon",e)}),r.load("textures/wood.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("wood-diffuse",a)}),r.load("textures/woodnormals.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("wood-normals",a)}),r.load("textures/sun.png",function(e){t.set("sun-diffuse",e)})):i()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(-5,-1,-4),this.camera=o;var i=new e.Vector3(0,.5,0),s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.rotation=.00125,s.settings.sensitivity.zoom=1,s.lookAt(i),this.controls=s,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(986895),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),this.directionalLight=d,t.add(d),t.add(l);var c=a.get("waggon"),u=new e.MeshPhongMaterial({color:16777215,map:a.get("wood-diffuse"),normalMap:a.get("wood-normals"),fog:!0});c.traverse(function(e){e.material=u}),t.add(c);var g=new e.PointsMaterial({map:a.get("sun-diffuse"),size:100,sizeAttenuation:!0,color:16768426,alphaTest:0,transparent:!0,fog:!1}),m=new e.BufferGeometry;m.addAttribute("position",new e.BufferAttribute(new Float32Array(3),3));var f=new e.Points(m,g);f.frustumCulled=!1,f.position.set(75,25,100),this.sun=f,t.add(f);var p=new ga(t,o,f,{resolutionScale:.6,kernelSize:Ut.SMALL,intensity:1,density:.96,decay:.93,weight:.4,exposure:.6,samples:60,clampMax:1});this.renderPass.renderToScreen=!1,p.renderToScreen=!0,p.dithering=!0,this.godRaysPass=p,n.addPass(p)}},{key:"registerOptions",value:function(e){var t=this.directionalLight,a=this.godRaysPass,n=this.sun,r={resolution:a.getResolutionScale(),blurriness:a.kernelSize,intensity:a.intensity,density:a.godRaysMaterial.uniforms.density.value,decay:a.godRaysMaterial.uniforms.decay.value,weight:a.godRaysMaterial.uniforms.weight.value,exposure:a.godRaysMaterial.uniforms.exposure.value,clampMax:a.godRaysMaterial.uniforms.clampMax.value,samples:a.samples,color:n.material.color.getHex(),"blend mode":"screen"};e.add(r,"resolution").min(0).max(1).step(.01).onChange(function(){a.setResolutionScale(r.resolution)}),e.add(a,"dithering"),e.add(r,"blurriness").min(Ut.VERY_SMALL).max(Ut.HUGE).step(1).onChange(function(){a.kernelSize=r.blurriness}),e.add(r,"intensity").min(0).max(1).step(.01).onChange(function(){a.intensity=r.intensity}),e.add(r,"density").min(0).max(1).step(.01).onChange(function(){a.godRaysMaterial.uniforms.density.value=r.density}),e.add(r,"decay").min(0).max(1).step(.01).onChange(function(){a.godRaysMaterial.uniforms.decay.value=r.decay}),e.add(r,"weight").min(0).max(1).step(.01).onChange(function(){a.godRaysMaterial.uniforms.weight.value=r.weight}),e.add(r,"exposure").min(0).max(1).step(.01).onChange(function(){a.godRaysMaterial.uniforms.exposure.value=r.exposure}),e.add(r,"clampMax").min(0).max(1).step(.01).onChange(function(){a.godRaysMaterial.uniforms.clampMax.value=r.clampMax}),e.add(r,"samples").min(15).max(200).step(1).onChange(function(){a.samples=r.samples}),e.addColor(r,"color").onChange(function(){n.material.color.setHex(r.color),t.color.setHex(r.color)}),e.add(r,"blend mode",["add","screen"]).onChange(function(){a.combineMaterial.setScreenModeEnabled("add"!==r["blend mode"])})}}]),a}(Rn),Jn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"render",e)),t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),o="textures/skies/sunset/",i=".png",s=[o+"px"+i,o+"nx"+i,o+"py"+i,o+"ny"+i,o+"pz"+i,o+"nz"+i];return new Promise(function(o,i){0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&o()},r.load(s,function(e){t.set("sky",e)}),n.load("textures/crate.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("crate-color",a)})):o()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(-3,0,-3),o.lookAt(t.position),this.camera=o;var i=new On(o.position,o.quaternion,r.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({color:16777215,map:a.get("crate-color")}));this.object=d,t.add(d)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}}]),a}(Rn),qn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"shock-wave",e)),t.shockWavePass=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),r="textures/skies/space3/",o=".jpg",i=[r+"px"+o,r+"nx"+o,r+"py"+o,r+"ny"+o,r+"pz"+o,r+"nz"+o];return new Promise(function(e,r){0===t.size?(a.onError=r,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)})):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(5,1,5),o.lookAt(t.position),this.camera=o;var i=new On(o.position,o.quaternion,r.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.SphereBufferGeometry(1,64,64),c=new e.MeshBasicMaterial({color:16776960,envMap:a.get("sky")}),u=new e.Mesh(d,c);t.add(u);var g=new ha(o,u.position,{speed:1,maxRadius:.5,waveSize:.2,amplitude:.05});this.renderPass.renderToScreen=!1,g.renderToScreen=!0,this.shockWavePass=g,n.addPass(g)}},{key:"registerOptions",value:function(e){var t=this.shockWavePass,a=t.shockWaveMaterial,n={size:a.uniforms.size.value,extent:a.uniforms.maxRadius.value,waveSize:a.uniforms.waveSize.value,amplitude:a.uniforms.amplitude.value};e.add(t,"speed").min(0).max(10).step(.001),e.add(n,"size").min(.01).max(2).step(.001).onChange(function(){a.uniforms.size.value=n.size}),e.add(n,"extent").min(0).max(10).step(.001).onChange(function(){a.uniforms.maxRadius.value=n.extent}),e.add(n,"waveSize").min(0).max(2).step(.001).onChange(function(){a.uniforms.waveSize.value=n.waveSize}),e.add(n,"amplitude").min(0).max(.25).step(.001).onChange(function(){a.uniforms.amplitude.value=n.amplitude}),e.add(t,"explode")}}]),a}(Rn),Zn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"smaa",e)),t.originalRenderer=null,t.rendererAA=null,t.controls2=null,t.smaaPass=null,t.texturePass=null,t.objectA=null,t.objectB=null,t.objectC=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),o="textures/skies/sunset/",i=".png",s=[o+"px"+i,o+"nx"+i,o+"py"+i,o+"ny"+i,o+"pz"+i,o+"nz"+i];return new Promise(function(o,i){var l;0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&o()},r.load(s,function(e){t.set("sky",e)}),n.load("textures/crate.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("crate-color",a)}),l=new Image,l.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),l.src=Ca.searchImageDataURL,l=new Image,l.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),l.src=Ca.areaImageDataURL):o()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(-3,0,-3),o.lookAt(t.position),this.camera=o,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color);var i=function(t,a,n){var r=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!0});return r.setSize(t.width,t.height),r.setClearColor(a),r.setPixelRatio(n),r}(r.getSize(),r.getClearColor(),r.getPixelRatio());this.originalRenderer=n.renderer,this.rendererAA=i;var s=new On(o.position,o.quaternion,r.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s;var l=s.clone();l.setDom(i.domElement),l.setEnabled(!1),this.controls2=l,t.background=a.get("sky");var d=new e.AmbientLight(6710886),c=new e.DirectionalLight(16759722);c.position.set(1440,200,2e3),c.target.position.copy(t.position),t.add(c),t.add(d);var u=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshBasicMaterial({color:0,wireframe:!0}));u.position.set(1.25,0,-1.25),this.objectA=u,t.add(u),u=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({map:a.get("crate-color")})),u.position.set(-1.25,0,1.25),this.objectB=u,t.add(u),u=new e.Mesh(new e.BoxBufferGeometry(.25,8.25,.25),new e.MeshPhongMaterial({color:855309}));var g=new e.Object3D,m,f,p;m=g.clone();var v=u.clone();v.position.set(-4,0,4),m.add(v),v=u.clone(),v.position.set(4,0,4),m.add(v),v=u.clone(),v.position.set(-4,0,-4),m.add(v),v=u.clone(),v.position.set(4,0,-4),m.add(v),f=m.clone(),f.rotation.set(we/2,0,0),p=m.clone(),p.rotation.set(0,0,we/2),g.add(m),g.add(f),g.add(p),g.scale.set(.1,.1,.1),this.objectC=g,t.add(g),this.renderPass.renderToScreen=!1;var y=new Ca(a.get("smaa-search"),a.get("smaa-area"));y.renderToScreen=!0,this.smaaPass=y,n.addPass(y),y=new ka(this.smaaPass.renderTargetColorEdges.texture,1,!1),y.renderToScreen=!0,y.enabled=!1,this.texturePass=y,n.addPass(y)}},{key:"render",value:function(e){var t=this.objectA,n=this.objectB,r=this.objectC,o=2*we;t.rotation.x+=5e-4,t.rotation.y+=.001,n.rotation.copy(t.rotation),r.rotation.copy(t.rotation),t.rotation.x>=o&&(t.rotation.x-=o),t.rotation.y>=o&&(t.rotation.y-=o),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=Number.parseFloat,a=this.composer,n=this.renderPass,r=this.smaaPass,o=this.texturePass,i=this.originalRenderer,s=this.rendererAA,l=this.controls,d=this.controls2,c={disabled:"disabled",edges:"edges",blend:"blend"},u={"browser AA":!1,SMAA:c.blend,sensitivity:t(r.colorEdgesMaterial.defines.EDGE_THRESHOLD),"search steps":t(r.weightsMaterial.defines.MAX_SEARCH_STEPS_INT)};e.add(u,"browser AA").onChange(function(){var e=a.renderer.getSize();u["browser AA"]?(s.setSize(e.width,e.height),a.replaceRenderer(s),l.setEnabled(!1),d.setEnabled(!0).lookAt(l.getTarget())):(i.setSize(e.width,e.height),a.replaceRenderer(i),l.setEnabled(!0).lookAt(d.getTarget()),d.setEnabled(!1))}),e.add(u,"SMAA",c).onChange(function(){n.renderToScreen=u.SMAA===c.disabled,r.renderToScreen=u.SMAA===c.blend,r.enabled=u.SMAA!==c.disabled,o.enabled=u.SMAA===c.edges}),e.add(u,"sensitivity").min(.05).max(.5).step(.01).onChange(function(){r.colorEdgesMaterial.setEdgeDetectionThreshold(u.sensitivity)}),e.add(u,"search steps").min(8).max(112).step(1).onChange(function(){r.weightsMaterial.setOrthogonalSearchSteps(u["search steps"])})}},{key:"reset",value:function(){f(s(a.prototype),"reset",this).call(this),null!==this.rendererAA&&(this.rendererAA.dispose(),this.rendererAA=null),null!==this.controls2&&(this.controls2.dispose(),this.controls2=null)}}]),a}(Rn),$n=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"tone-mapping",e)),t.toneMappingPass=null,t.object=null,t}return i(a,t),o(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),r=new e.CubeTextureLoader(a),o="textures/skies/sunset/",i=".png",s=[o+"px"+i,o+"nx"+i,o+"py"+i,o+"ny"+i,o+"pz"+i,o+"nz"+i];return new Promise(function(o,i){0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&o()},r.load(s,function(e){t.set("sky",e)}),n.load("textures/crate.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("crate-color",a)})):o()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,r=n.renderer,o=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);o.position.set(-3,0,-3),o.lookAt(t.position),this.camera=o;var i=new On(o.position,o.quaternion,r.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.settings.zoom.minDistance=2.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),r.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({map:a.get("crate-color")}));this.object=d,t.add(d);var c=new ba({adaptive:!0,resolution:256,distinction:2});c.adaptiveLuminosityMaterial.uniforms.tau.value=2,this.renderPass.renderToScreen=!1,c.renderToScreen=!0,c.dithering=!0,this.toneMappingPass=c,n.addPass(c)}},{key:"render",value:function(e){var t=this.object,n=2*we;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),f(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.toneMappingPass,a={resolution:Se(t.resolution),distinction:t.luminosityMaterial.uniforms.distinction.value,"adaption rate":t.adaptiveLuminosityMaterial.uniforms.tau.value,"average lum":t.toneMappingMaterial.uniforms.averageLuminance.value,"min lum":t.adaptiveLuminosityMaterial.uniforms.minLuminance.value,"max lum":t.toneMappingMaterial.uniforms.maxLuminance.value,"middle grey":t.toneMappingMaterial.uniforms.middleGrey.value};e.add(a,"resolution").min(6).max(11).step(1).onChange(function(){t.resolution=Me(2,a.resolution)}),e.add(t,"adaptive"),e.add(t,"dithering");var n=e.addFolder("Luminance");n.add(a,"distinction").min(1).max(10).step(.1).onChange(function(){t.luminosityMaterial.uniforms.distinction.value=a.distinction}),n.add(a,"adaption rate").min(1).max(3).step(.01).onChange(function(){t.adaptiveLuminosityMaterial.uniforms.tau.value=a["adaption rate"]}),n.add(a,"average lum").min(.01).max(1).step(.01).onChange(function(){t.toneMappingMaterial.uniforms.averageLuminance.value=a["average lum"]}),n.add(a,"min lum").min(0).max(1).step(.01).onChange(function(){t.adaptiveLuminosityMaterial.uniforms.minLuminance.value=a["min lum"]}),n.add(a,"max lum").min(0).max(32).step(1).onChange(function(){t.toneMappingMaterial.uniforms.maxLuminance.value=a["max lum"]}),n.add(a,"middle grey").min(0).max(1).step(.01).onChange(function(){t.toneMappingMaterial.uniforms.middleGrey.value=a["middle grey"]}),n.open()}}]),a}(Rn),er,tr,ar;window.addEventListener("load",function t(){this.removeEventListener("load",t);var a=document.getElementById("viewport");er=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!1}),er.setSize(a.clientWidth,a.clientHeight),er.setPixelRatio(window.devicePixelRatio),er.setClearColor(0),tr=new Sa(er,{stencilBuffer:!0,depthTexture:!0}),ar=new Pt(a,{aside:document.getElementById("aside"),renderer:er}),ar.addEventListener("change",ve),ar.addEventListener("load",ye),ar.addDemo(new Jn(tr)),ar.addDemo(new Un(tr)),ar.addDemo(new _n(tr)),ar.addDemo(new Gn(tr)),ar.addDemo(new Qn(tr)),ar.addDemo(new Hn(tr)),ar.addDemo(new Vn(tr)),ar.addDemo(new Yn(tr)),ar.addDemo(new Nn(tr)),ar.addDemo(new Kn(tr)),ar.addDemo(new Wn(tr)),ar.addDemo(new jn(tr)),ar.addDemo(new qn(tr)),ar.addDemo(new Zn(tr)),ar.addDemo(new $n(tr)),pe()}),window.addEventListener("resize",function(){function e(e){var a=e.target.innerWidth,n=e.target.innerHeight;ar.setSize(a,n),tr.setSize(a,n),t=0}var t=0;return function(a){0===t&&(t=setTimeout(e,66,a))}}()),document.addEventListener("keydown",function(e){var t=this.getElementById("aside");e.altKey&&null!==t&&(e.preventDefault(),t.style.visibility="hidden"===t.style.visibility?"visible":"hidden")})})(THREE);
